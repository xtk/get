/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 * 
 *
 * 
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 * 
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function g(a){throw a;}var i=void 0,l=!0,m=null,p=!1;function aa(a){return function(b){this[a]=b}}function q(a){return function(){return this[a]}}var u,ba=this;function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return a!==i}function v(a){return a!=m}function ga(a){return"array"==da(a)}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function w(a){return"string"==typeof a}function x(a){return"number"==typeof a}function ia(a){return"function"==da(a)}function ja(a){a=da(a);return"object"==a||"array"==a||"function"==a}function ka(a){return a[la]||(a[la]=++ma)}
var la="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}function oa(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(m,arguments)}function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ra=Date.now||function(){return+new Date};
function y(a,b){var c=a.split("."),d=ba;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&fa(b)?d[f]=b:d=d[f]?d[f]:d[f]={}}function z(a,b){function c(){}c.prototype=b.prototype;a.z=b.prototype;a.prototype=new c};window["X.Counter"]=function(){var a=0;return{Vf:function(){a+=1},vh:function(){a+=-1},value:function(){return a}}}();
if(!Function.prototype.bind)Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c?this:a||window,f.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&g(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,f=d.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b};y("Function.prototype.bind",Function.prototype.bind);function sa(a){if(!ta.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(xa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ya,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(za,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Aa,"&quot;"));return a}var xa=/&/g,ya=/</g,za=/>/g,Aa=/\"/g,ta=/[&<>\"]/;var Ba,Ca,Da,Ea,Fa,Ga,Ha;function Ia(){return ba.navigator?ba.navigator.userAgent:m}function Ja(){return ba.navigator}Fa=Ea=Da=Ca=Ba=p;var Ka;if(Ka=Ia()){var La=Ja();Ba=0==Ka.indexOf("Opera");Ca=!Ba&&-1!=Ka.indexOf("MSIE");Ea=(Da=!Ba&&-1!=Ka.indexOf("WebKit"))&&-1!=Ka.indexOf("Mobile");Fa=!Ba&&!Da&&"Gecko"==La.product}var Ma=Ba,A=Ca,Na=Fa,B=Da,Oa=Ea,Pa,Qa=Ja();Pa=Qa&&Qa.platform||"";Ga=-1!=Pa.indexOf("Mac");Ha=-1!=Pa.indexOf("Win");var Ra=!!Ja()&&-1!=(Ja().appVersion||"").indexOf("X11"),Sa;
a:{var Ta="",Ua;if(Ma&&ba.opera)var Va=ba.opera.version,Ta="function"==typeof Va?Va():Va;else if(Na?Ua=/rv\:([^\);]+)(\)|;)/:A?Ua=/MSIE\s+([^\);]+)(\)|;)/:B&&(Ua=/WebKit\/(\S+)/),Ua)var Wa=Ua.exec(Ia()),Ta=Wa?Wa[1]:"";if(A){var Xa,Ya=ba.document;Xa=Ya?Ya.documentMode:i;if(Xa>parseFloat(Ta)){Sa=""+Xa;break a}}Sa=Ta}var Za={};
function C(a){var b;if(!(b=Za[a])){b=0;for(var c=(""+Sa).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var h=c[e]||"",j=d[e]||"",k=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var t=k.exec(h)||["","",""],r=n.exec(j)||["","",""];if(0==t[0].length&&0==r[0].length)break;b=((0==t[1].length?0:parseInt(t[1],10))<(0==r[1].length?0:parseInt(r[1],10))?-1:(0==t[1].length?0:parseInt(t[1],
10))>(0==r[1].length?0:parseInt(r[1],10))?1:0)||((0==t[2].length)<(0==r[2].length)?-1:(0==t[2].length)>(0==r[2].length)?1:0)||(t[2]<r[2]?-1:t[2]>r[2]?1:0)}while(0==b)}b=Za[a]=0<=b}return b}var $a={};function ab(a){return $a[a]||($a[a]=A&&document.documentMode&&document.documentMode>=a)};function bb(a,b){for(var c in a)b.call(i,a[c],c,a)}function cb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function db(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var eb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function fb(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<eb.length;e++)c=eb[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var gb=Array.prototype,hb=gb.indexOf?function(a,b,c){return gb.indexOf.call(a,b,c)}:function(a,b,c){c=c==m?0:0>c?Math.max(0,a.length+c):c;if(w(a))return!w(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ib=gb.forEach?function(a,b,c){gb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=w(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)},jb=gb.map?function(a,b,c){return gb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),e=w(a)?
a.split(""):a,h=0;h<d;h++)h in e&&(f[h]=b.call(c,e[h],h,a));return f},kb=gb.every?function(a,b,c){return gb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=w(a)?a.split(""):a,e=0;e<d;e++)if(e in f&&!b.call(c,f[e],e,a))return p;return l};function lb(a,b){var c=hb(a,b);0<=c&&gb.splice.call(a,c,1)}function mb(a){return gb.concat.apply(gb,arguments)}function nb(a){if(ga(a))return mb(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}
function ob(a,b,c){return 2>=arguments.length?gb.slice.call(a,b):gb.slice.call(a,b,c)};function pb(a){if("function"==typeof a.ea)a=a.ea();else if(ha(a)||w(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function qb(a){if("function"==typeof a.Z)return a.Z();if(w(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return cb(a)}function rb(a){if("function"==typeof a.Jb)return a.Jb();if("function"!=typeof a.Z){if(ha(a)||w(a)){for(var b=[],a=a.length,c=0;c<a;c++)b.push(c);return b}return db(a)}}
function sb(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ha(a)||w(a))ib(a,b,c);else for(var d=rb(a),f=qb(a),e=f.length,h=0;h<e;h++)b.call(c,f[h],d&&d[h],a)}function tb(a,b){if("function"==typeof a.every)return a.every(b,i);if(ha(a)||w(a))return kb(a,b,i);for(var c=rb(a),d=qb(a),f=d.length,e=0;e<f;e++)if(!b.call(i,d[e],c&&c[e],a))return p;return l};var ub="StopIteration"in ba?ba.StopIteration:Error("StopIteration");function vb(){}vb.prototype.next=function(){g(ub)};vb.prototype.ob=function(){return this};function wb(a){if(a instanceof vb)return a;if("function"==typeof a.ob)return a.ob(p);if(ha(a)){var b=0,c=new vb;c.next=function(){for(;;){b>=a.length&&g(ub);if(b in a)return a[b++];b++}};return c}g(Error("Not implemented"))}
function xb(a,b){if(ha(a))try{ib(a,b,i)}catch(c){c!==ub&&g(c)}else{a=wb(a);try{for(;;)b.call(i,a.next(),i,a)}catch(d){d!==ub&&g(d)}}};function D(a,b){this.n={};this.j=[];var c=arguments.length;if(1<c){c%2&&g(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Tc(a)}u=D.prototype;u.g=0;u.Xb=0;u.ea=q("g");u.Z=function(){yb(this);for(var a=[],b=0;b<this.j.length;b++)a.push(this.n[this.j[b]]);return a};u.Jb=function(){yb(this);return this.j.concat()};u.Xc=function(a){for(var b=0;b<this.j.length;b++){var c=this.j[b];if(zb(this.n,c)&&this.n[c]==a)return l}return p};
u.Eb=function(a,b){if(this===a)return l;if(this.g!=a.ea())return p;var c=b||Ab;yb(this);for(var d,f=0;d=this.j[f];f++)if(!c(this.get(d),a.get(d)))return p;return l};function Ab(a,b){return a===b}u.clear=function(){this.n={};this.Xb=this.g=this.j.length=0};u.remove=function(a){return zb(this.n,a)?(delete this.n[a],this.g--,this.Xb++,this.j.length>2*this.g&&yb(this),l):p};
function yb(a){if(a.g!=a.j.length){for(var b=0,c=0;b<a.j.length;){var d=a.j[b];zb(a.n,d)&&(a.j[c++]=d);b++}a.j.length=c}if(a.g!=a.j.length){for(var f={},c=b=0;b<a.j.length;)d=a.j[b],zb(f,d)||(a.j[c++]=d,f[d]=1),b++;a.j.length=c}}u.get=function(a,b){return zb(this.n,a)?this.n[a]:b};u.set=function(a,b){zb(this.n,a)||(this.g++,this.j.push(a),this.Xb++);this.n[a]=b};u.Tc=function(a){var b;a instanceof D?(b=a.Jb(),a=a.Z()):(b=db(a),a=cb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};u.c=function(){return new D(this)};
u.ob=function(a){yb(this);var b=0,c=this.j,d=this.n,f=this.Xb,e=this,h=new vb;h.next=function(){for(;;){f!=e.Xb&&g(Error("The map has changed since the iterator was created"));b>=c.length&&g(ub);var h=c[b++];return a?h:d[h]}};return h};function zb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Bb(a){this.n=new D;a&&this.Tc(a)}function Cb(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}u=Bb.prototype;u.ea=function(){return this.n.ea()};u.add=function(a){this.n.set(Cb(a),a)};u.Tc=function(a){for(var a=qb(a),b=a.length,c=0;c<b;c++)this.add(a[c])};u.vc=function(a){for(var a=qb(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};u.remove=function(a){return this.n.remove(Cb(a))};u.clear=function(){this.n.clear()};
u.contains=function(a){a=Cb(a);return zb(this.n.n,a)};u.ue=function(a){for(var b=new Bb,a=qb(a),c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};u.Z=function(){return this.n.Z()};u.c=function(){return new Bb(this)};u.Eb=function(a){return this.ea()==pb(a)&&Db(this,a)};
function Db(a,b){var c=pb(b);if(a.ea()>c)return p;!(b instanceof Bb)&&5<c&&(b=new Bb(b));return tb(a,function(a){if("function"==typeof b.contains)a=b.contains(a);else if("function"==typeof b.Xc)a=b.Xc(a);else if(ha(b)||w(b))a=0<=hb(b,a);else a:{for(var c in b)if(b[c]==a){a=l;break a}a=p}return a})}u.ob=function(){return this.n.ob(p)};function Eb(){}Eb.prototype.ge=p;Eb.prototype.X=function(){if(!this.ge)this.ge=l,this.p()};Eb.prototype.p=function(){this.Lf&&Fb.apply(m,this.Lf)};function Gb(a){a&&"function"==typeof a.X&&a.X()}function Fb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Fb.apply(m,d):Gb(d)}};function Hb(a,b){this.ze=b;this.Hb=[];a>this.ze&&g(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Hb.push(this.ic())}z(Hb,Eb);u=Hb.prototype;u.ce=m;u.fe=m;function Ib(a,b){a.Hb.length<a.ze?a.Hb.push(b):a.ad(b)}u.ic=function(){return this.ce?this.ce():{}};u.ad=function(a){if(this.fe)this.fe(a);else if(ja(a))if(ia(a.X))a.X();else for(var b in a)delete a[b]};u.p=function(){Hb.z.p.call(this);for(var a=this.Hb;a.length;)this.ad(a.pop());delete this.Hb};function Jb(){this.Fb=[];this.sd=new D;this.jf=this.kf=this.lf=this.df=0;this.Wb=new D;this.$d=this.hf=0;this.md=1;this.bd=new Hb(0,4E3);this.bd.ic=function(){return new Kb};this.ef=new Hb(0,50);this.ef.ic=function(){return new Lb};var a=this;this.ed=new Hb(0,2E3);this.ed.ic=function(){return""+a.md++};this.ed.ad=function(){};this.Kf=3}function Lb(){this.Bd=this.ff=this.W=0}
Lb.prototype.toString=function(){var a=[];a.push(this.type," ",this.W," (",Math.round(10*this.ff)/10," ms)");this.Bd&&a.push(" [VarAlloc = ",this.Bd,"]");return a.join("")};function Kb(){}function Mb(a,b,c,d){var f=[];-1==c?f.push("    "):f.push(Nb(a.je-c));f.push(" ",Ob(a.je-b));0==a.cd?f.push(" Start        "):1==a.cd?(f.push(" Done "),f.push(Nb(a.Bh-a.startTime)," ms ")):f.push(" Comment      ");f.push(d,a);0<a.Ig&&f.push("[VarAlloc ",a.Ig,"] ");return f.join("")}
Kb.prototype.toString=function(){return this.type==m?this.If:"["+this.type+"] "+this.If};Jb.prototype.reset=function(a){this.Kf=a;for(a=0;a<this.Fb.length;a++){var b=this.bd.id;b&&Ib(this.ed,b);Ib(this.bd,this.Fb[a])}this.Fb.length=0;this.sd.clear();this.df=ra();this.$d=this.hf=this.jf=this.kf=this.lf=0;b=this.Wb.Jb();for(a=0;a<b.length;a++){var c=this.Wb.get(b[a]);c.W=0;c.ff=0;c.Bd=0;Ib(this.ef,c)}this.Wb.clear()};
Jb.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Fb.length;d++){var f=this.Fb[d];1==f.cd&&c.pop();a.push(" ",Mb(f,this.df,b,c.join("")));b=f.je;a.push("\n");0==f.cd&&c.push("|  ")}if(0!=this.sd.ea()){var e=ra();a.push(" Unstopped timers:\n");xb(this.sd,function(b){a.push("  ",b," (",e-b.startTime," ms, started at ",Ob(b.startTime),")\n")})}b=this.Wb.Jb();for(d=0;d<b.length;d++)c=this.Wb.get(b[d]),1<c.W&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.hf,"\n","Total comments created ",
this.$d,"\n","Overhead start: ",this.lf," ms\n","Overhead end: ",this.kf," ms\n","Overhead comment: ",this.jf," ms\n");return a.join("")};function Nb(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function Ob(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new Jb;function Pb(){}var Qb=0;u=Pb.prototype;u.key=0;u.hb=p;u.Uc=p;u.fa=function(a,b,c,d,f,e){ia(a)?this.ve=l:a&&a.handleEvent&&ia(a.handleEvent)?this.ve=p:g(Error("Invalid listener argument"));this.Pb=a;this.Xe=b;this.src=c;this.type=d;this.capture=!!f;this.dd=e;this.Uc=p;this.key=++Qb;this.hb=p};u.handleEvent=function(a){return this.ve?this.Pb.call(this.dd||this.src,a):this.Pb.handleEvent.call(this.Pb,a)};!A||ab(9);var Rb=!A||ab(9),Sb=A&&!C("8");!B||C("528");Na&&C("1.9b")||A&&C("8")||Ma&&C("9.5")||B&&C("528");!Na||C("8");function Tb(a,b){this.type=a;this.currentTarget=this.target=b}z(Tb,Eb);u=Tb.prototype;u.p=function(){delete this.type;delete this.target;delete this.currentTarget};u.Ta=p;u.Sb=l;u.stopPropagation=function(){this.Ta=l};u.preventDefault=function(){this.Sb=p};function Ub(a){Ub[" "](a);return a}Ub[" "]=ca;function Vb(a,b){a&&this.fa(a,b)}z(Vb,Tb);u=Vb.prototype;u.target=m;u.relatedTarget=m;u.offsetX=0;u.offsetY=0;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.button=0;u.keyCode=0;u.charCode=0;u.ctrlKey=p;u.altKey=p;u.shiftKey=p;u.metaKey=p;u.kg=p;u.da=m;
u.fa=function(a,b){var c=this.type=a.type;Tb.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Na){var f;a:{try{Ub(d.nodeName);f=l;break a}catch(e){}f=p}f||(d=m)}}else if("mouseover"==c)d=a.fromElement;else if("mouseout"==c)d=a.toElement;this.relatedTarget=d;this.offsetX=B||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=B||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.kg=Ga?a.metaKey:a.ctrlKey;this.state=a.state;this.da=a;delete this.Sb;delete this.Ta};u.stopPropagation=function(){Vb.z.stopPropagation.call(this);this.da.stopPropagation?this.da.stopPropagation():this.da.cancelBubble=l};
u.preventDefault=function(){Vb.z.preventDefault.call(this);var a=this.da;if(a.preventDefault)a.preventDefault();else if(a.returnValue=p,Sb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};u.Pf=q("da");u.p=function(){Vb.z.p.call(this);this.relatedTarget=this.currentTarget=this.target=this.da=m};var Wb={},Xb={},Yb={},Zb={};
function E(a,b,c,d,f){if(b){if(ga(b)){for(var e=0;e<b.length;e++)E(a,b[e],c,d,f);return m}var d=!!d,h=Xb;b in h||(h[b]={g:0,R:0});h=h[b];d in h||(h[d]={g:0,R:0},h.g++);var h=h[d],j=ka(a),k;h.R++;if(h[j]){k=h[j];for(e=0;e<k.length;e++)if(h=k[e],h.Pb==c&&h.dd==f){if(h.hb)break;return k[e].key}}else k=h[j]=[],h.g++;e=$b();e.src=a;h=new Pb;h.fa(c,e,a,b,d,f);c=h.key;e.key=c;k.push(h);Wb[c]=h;Yb[j]||(Yb[j]=[]);Yb[j].push(h);a.addEventListener?(a==ba||!a.de)&&a.addEventListener(b,e,d):a.attachEvent(b in
Zb?Zb[b]:Zb[b]="on"+b,e);return c}g(Error("Invalid event type"))}function $b(){var a=ac,b=Rb?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function bc(a,b,c,d,f){if(ga(b))for(var e=0;e<b.length;e++)bc(a,b[e],c,d,f);else a=E(a,b,c,d,f),Wb[a].Uc=l}
function cc(a,b,c,d,f){if(ga(b))for(var e=0;e<b.length;e++)cc(a,b[e],c,d,f);else{d=!!d;a:{e=Xb;if(b in e&&(e=e[b],d in e&&(e=e[d],a=ka(a),e[a]))){a=e[a];break a}a=m}if(a)for(e=0;e<a.length;e++)if(a[e].Pb==c&&a[e].capture==d&&a[e].dd==f){dc(a[e].key);break}}}
function dc(a){if(!Wb[a])return p;var b=Wb[a];if(b.hb)return p;var c=b.src,d=b.type,f=b.Xe,e=b.capture;c.removeEventListener?(c==ba||!c.de)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in Zb?Zb[d]:Zb[d]="on"+d,f);c=ka(c);f=Xb[d][e][c];if(Yb[c]){var h=Yb[c];lb(h,b);0==h.length&&delete Yb[c]}b.hb=l;f.De=l;ec(d,e,c,f);delete Wb[a];return l}
function ec(a,b,c,d){if(!d.qc&&d.De){for(var f=0,e=0;f<d.length;f++)d[f].hb?d[f].Xe.src=m:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.De=p;0==e&&(delete Xb[a][b][c],Xb[a][b].g--,0==Xb[a][b].g&&(delete Xb[a][b],Xb[a].g--),0==Xb[a].g&&delete Xb[a])}}function fc(a){var b,c=0,d=b==m;b=!!b;if(a==m)bb(Yb,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)dc(f.key),c++}});else if(a=ka(a),Yb[a])for(var a=Yb[a],f=a.length-1;0<=f;f--){var e=a[f];if(d||b==e.capture)dc(e.key),c++}}
function gc(a,b,c,d,f){var e=1,b=ka(b);if(a[b]){a.R--;a=a[b];a.qc?a.qc++:a.qc=1;try{for(var h=a.length,j=0;j<h;j++){var k=a[j];k&&!k.hb&&(e&=hc(k,f)!==p)}}finally{a.qc--,ec(c,d,b,a)}}return Boolean(e)}function hc(a,b){var c=a.handleEvent(b);a.Uc&&dc(a.key);return c}
function ac(a,b){if(!Wb[a])return l;var c=Wb[a],d=c.type,f=Xb;if(!(d in f))return l;var f=f[d],e,h;if(!Rb){var j;if(!(j=b))a:{j="window.event".split(".");for(var k=ba;e=j.shift();)if(v(k[e]))k=k[e];else{j=m;break a}j=k}e=j;j=l in f;k=p in f;if(j){if(0>e.keyCode||e.returnValue!=i)return l;a:{var n=p;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(t){n=l}if(n||e.returnValue==i)e.returnValue=l}}n=new Vb;n.fa(e,this);e=l;try{if(j){for(var r=[],o=n.currentTarget;o;o=o.parentNode)r.push(o);h=f[l];h.R=h.g;
for(var s=r.length-1;!n.Ta&&0<=s&&h.R;s--)n.currentTarget=r[s],e&=gc(h,r[s],d,l,n);if(k){h=f[p];h.R=h.g;for(s=0;!n.Ta&&s<r.length&&h.R;s++)n.currentTarget=r[s],e&=gc(h,r[s],d,p,n)}}else e=hc(c,n)}finally{if(r)r.length=0;n.X()}return e}d=new Vb(b,this);try{e=hc(c,d)}finally{d.X()}return e}var ic=0;function jc(a){return a+"_"+ic++};function H(a){Tb.call(this,a);this._className="event"}z(H,Tb);var kc=jc("pan"),lc=jc("rotate"),mc=jc("zoom"),nc=jc("render"),oc=jc("resetview"),pc=jc("modified"),qc=jc("progress"),rc=jc("hover"),sc=jc("hover_end"),tc={Zg:kc,fh:lc,rh:mc,dh:nc,eh:oc,Ug:pc,bh:qc,Sg:rc,Tg:sc};function uc(){H.call(this,kc);this.Wa=new vc(0,0)}z(uc,H);function wc(){H.call(this,lc);this.Wa=new vc(0,0);this.sf=0}z(wc,H);function xc(){H.call(this,mc);this.ua=this.Ka=p}z(xc,H);
function yc(){H.call(this,nc);this.uh=Date.now()}z(yc,H);function zc(){H.call(this,rc);this.hc=this.gc=0}z(zc,H);function Ac(){H.call(this,sc)}z(Ac,H);function Bc(){H.call(this,oc)}z(Bc,H);function Cc(){H.call(this,pc);this.Ma=new I}z(Cc,H);function Dc(){H.call(this,qc);this.Wd=0}z(Dc,H);y("X.event",H);y("X.event.events",tc);y("X.event.uniqueId",function(a){return jc(a)});y("X.event.PanEvent",uc);y("X.event.RotateEvent",wc);y("X.event.ZoomEvent",xc);y("X.event.RenderEvent",yc);
y("X.event.ResetViewEvent",Bc);y("X.event.ModifiedEvent",Cc);y("X.event.HoverEvent",zc);y("X.event.ProgressEvent",Dc);function Ec(a,b,c){this.x=fa(a)?a:0;this.y=fa(b)?b:0;this.b=fa(c)?c:0}Ec.prototype.c=function(){return new Ec(this.x,this.y,this.b)};Ec.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.b+")"};Ec.prototype.gf=function(){return[this.x,this.y,this.b]};function K(a,b,c){this.x=a;this.y=b;this.b=c}z(K,Ec);u=K.prototype;u.c=function(){return new K(this.x,this.y,this.b)};u.rc=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};u.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};u.F=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};u.normalize=function(){return this.scale(1/this.rc())};u.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
u.ia=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};u.Eb=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function Fc(a,b){return new K(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};function Gc(){}z(Gc,Eb);u=Gc.prototype;u.de=l;u.tc=m;u.wd=aa("tc");u.addEventListener=function(a,b,c,d){E(this,a,b,c,d)};u.removeEventListener=function(a,b,c,d){cc(this,a,b,c,d)};
u.dispatchEvent=function(a){var b=a.type||a,c=Xb;if(b in c){if(w(a))a=new Tb(a,this);else if(a instanceof Tb)a.target=a.target||this;else{var d=a,a=new Tb(b,this);fb(a,d)}var d=1,f,c=c[b],b=l in c,e;if(b){f=[];for(e=this;e;e=e.tc)f.push(e);e=c[l];e.R=e.g;for(var h=f.length-1;!a.Ta&&0<=h&&e.R;h--)a.currentTarget=f[h],d&=gc(e,f[h],a.type,l,a)&&a.Sb!=p}if(p in c)if(e=c[p],e.R=e.g,b)for(h=0;!a.Ta&&h<f.length&&e.R;h++)a.currentTarget=f[h],d&=gc(e,f[h],a.type,p,a)&&a.Sb!=p;else for(f=this;!a.Ta&&f&&e.R;f=
f.tc)a.currentTarget=f,d&=gc(e,f,a.type,p,a)&&a.Sb!=p;a=Boolean(d)}else a=l;return a};u.p=function(){Gc.z.p.call(this);fc(this);this.tc=m};function L(){this._className="base";this.f=p}z(L,Gc);L.prototype.className=q("_className");L.prototype.print=function(){var a=Object.keys(this),b="",c="<unknown>",d=0;for(d in a){var f="this."+a[d],e=eval(f);"this._className"==f?c=e:b+=f+": "+e+"\n"}return"== X."+c+" ==\n"+b};L.prototype.Mf=q("f");L.prototype.Ha=function(){this.f=p};y("X.base",L);y("X.base.prototype.className",L.prototype.className);y("X.base.prototype.print",L.prototype.print);y("X.base.prototype.dirty",L.prototype.Mf);
y("X.base.prototype.setClean",L.prototype.Ha);function N(a){L.call(this);this._className="triplets";this.za=this.Ca=this.ya=this.Ba=this.xa=this.Aa=m;this.Zb=[0,0,0];this.P=[];if(v(a)&&a instanceof N)this.P=a.all().slice(),this.Aa=a.Aa,this.xa=a.xa,this.Ba=a.Ba,this.ya=a.ya,this.Ca=a.Ca,this.za=a.za,this.Zb=a.Zb.slice()}z(N,L);u=N.prototype;
u.add=function(a,b,c){(!x(a)||!x(b)||!x(c))&&g(Error("Invalid triplet."));if(!this.Aa||a<this.Aa)this.Aa=a;if(!this.xa||a>this.xa)this.xa=a;if(!this.Ba||b<this.Ba)this.Ba=b;if(!this.ya||b>this.ya)this.ya=b;if(!this.Ca||c<this.Ca)this.Ca=c;if(!this.za||c>this.za)this.za=c;this.Zb=[(this.Aa+this.xa)/2,(this.Ba+this.ya)/2,(this.Ca+this.za)/2];this.f=l;return this.P.push(a,b,c)/3};u.get=function(a){(!x(a)||3*a>this.P.length)&&g(Error("Invalid id."));a*=3;return[this.P[a],this.P[a+1],this.P[a+2]]};
u.remove=function(a){(!x(a)||3*a>this.P.length)&&g(Error("Invalid id."));this.P.splice(a,3);this.f=l};u.all=q("P");u.clear=function(){this.P=[];this.f=l};u.W=function(){return this.P.length/3};u.length=function(){return this.P.length};y("X.triplets",N);y("X.triplets.prototype.add",N.prototype.add);y("X.triplets.prototype.get",N.prototype.get);y("X.triplets.prototype.remove",N.prototype.remove);y("X.triplets.prototype.all",N.prototype.all);y("X.triplets.prototype.clear",N.prototype.clear);
y("X.triplets.prototype.count",N.prototype.W);y("X.triplets.prototype.length",N.prototype.length);function Hc(){L.call(this);this._className="parser"}z(Hc,L);Hc.prototype.parse=function(){g(Error("The function parse() should be overloaded."))};function Ic(a,b){var c=O(a,b+2),d=O(a,b+3),f=(d<<1&255|c>>7)-127,c=(c&127)<<16|O(a,b+1)<<8|O(a,b);return 0==c&&-127==f?0:(1-2*(d>>7))*(1+c*Math.pow(2,-23))*Math.pow(2,f)}function Jc(a,b){var c=O(a,b),d=O(a,b+1),f=(c<<1&255|d>>7)-127,d=(d&127)<<16|O(a,b+2)<<8|O(a,b+3);return 0==d&&-127==f?0:(1-2*(c>>7))*(1+d*Math.pow(2,-23))*Math.pow(2,f)}
function Kc(a,b,c){var d=[],f;for(f=0;f<c;f++)d[f]=Ic(a,b+4*f);return d}function Lc(a,b){return(O(a,b+3)<<24)+(O(a,b+2)<<16)+(O(a,b+1)<<8)+O(a,b)}function Mc(a,b){return(O(a,b)<<24)+(O(a,b+1)<<16)+(O(a,b+2)<<8)+O(a,b+3)}function O(a,b){return a.charCodeAt(b)&255}y("X.parser",Hc);y("X.parser.prototype.parse",Hc.prototype.parse);function Nc(){Hc.call(this);this._className="parserTRK"}z(Nc,Hc);
Nc.prototype.parse=function(a,b){var c=a.s,d=a.t,f=a.T,e=0,h;for(h=0;3>h;h++);var j=Kc(b,e+12,3);Kc(b,e+24,3);var k=(O(b,e+36+1)<<8)+O(b,e+36),n=(O(b,e+238+1)<<8)+O(b,e+238);Kc(b,e+440,16);Kc(b,e+956,6);h=Lc(b,e+988);var e=Lc(b,e+996),t=[],r=m,o=m,s=m,F=m,G=m,Q=m,J;for(J=0;J<h;J++){for(var ea=Lc(b,e),Y=new N,e=e+4,M=0;M<ea;M++){var ua=Ic(b,e),e=e+4,va=Ic(b,e),e=e+4,wa=Ic(b,e),e=e+4;0<k&&(Kc(b,e,k),e+=4*k);ua/=j[0];va/=j[1];wa/=j[2];Y.add(ua,va,wa)}0<n&&(e+=4*n);var M=Y.Aa,ea=Y.xa,ua=Y.Ba,va=Y.ya,
wa=Y.Ca,ee=Y.za;if(!r||M<r)r=M;if(!o||ea>o)o=ea;if(!s||ua<s)s=ua;if(!F||va>F)F=va;if(!G||wa<G)G=wa;if(!Q||ee>Q)Q=ee;t.push(Y)}e=(r+o)/2;s=(s+F)/2;G=(G+Q)/2;for(J=0;J<h;J++){Q=t[J];F=Q.W();for(M=0;M<F-1;M++)k=Q.get(M),j=Q.get(M+1),c.add(k[0],k[1],k[2]),c.add(j[0],j[1],j[2]),n=k[0]-e,r=k[1]-s,o=k[2]-G,Y=Math.sqrt(n*n+r*r+o*o),ea=j[0]-e,ua=j[1]-s,va=j[2]-G,wa=Math.sqrt(ea*ea+ua*ua+va*va),d.add(n/Y,r/Y,o/Y),d.add(ea/wa,ua/wa,va/wa),j=[Math.abs(j[0]-k[0]),Math.abs(j[1]-k[1]),Math.abs(j[2]-k[2])],k=Math.sqrt(j[0]*
j[0]+j[1]*j[1]+j[2]*j[2]),j[0]/=k,j[1]/=k,j[2]/=k,f.add(j[0],j[1],j[2]),f.add(j[0],j[1],j[2])}a.kb(Oc);c=new Cc;c.Ma=a;this.dispatchEvent(c)};y("X.parserTRK",Nc);y("X.parserTRK.prototype.parse",Nc.prototype.parse);function Pc(){Hc.call(this);this._className="parserSTL"}z(Pc,Hc);Pc.prototype.parse=function(a,b){for(var c=b.split("\n"),d=c.length,f=a.s,e=a.t,h=0,j=d%8;j--;)this.o(f,e,c[h]),h++;for(j=0.125*d^0;j--;)this.o(f,e,c[h]),h++,this.o(f,e,c[h]),h++,this.o(f,e,c[h]),h++,this.o(f,e,c[h]),h++,this.o(f,e,c[h]),h++,this.o(f,e,c[h]),h++,this.o(f,e,c[h]),h++,this.o(f,e,c[h]),h++;c=new Cc;c.Ma=a;this.dispatchEvent(c)};
Pc.prototype.o=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),d=c.split(" ");if("vertex"==d[0]){var c=parseFloat(d[1]),f=parseFloat(d[2]),d=parseFloat(d[3]);a.add(c,f,d)}else"facet"==d[0]&&(c=parseFloat(d[2]),f=parseFloat(d[3]),d=parseFloat(d[4]),b.add(c,f,d),b.add(c,f,d),b.add(c,f,d))};y("X.parserSTL",Pc);y("X.parserSTL.prototype.parse",Pc.prototype.parse);y("X.parserSTL.prototype.parseLine",Pc.prototype.o);function P(a,b,c){this.N=this.M=this.L=0;3==arguments.length?(this.L=Number(a),this.M=Number(b),this.N=Number(c)):"x"in a&&"y"in a&&"z"in a?(this.L=Number(a.x()),this.M=Number(a.y()),this.N=Number(a.b())):(this.L=Number(a[0]),this.M=Number(a[1]),this.N=Number(a[2]))}
P.prototype={c:function(){return new P(this.L,this.M,this.N)},sc:function(){return new P(-this.L,-this.M,-this.N)},Sa:function(a){return new P(this.L+a.x(),this.M+a.y(),this.N+a.b())},eb:function(a){return new P(this.L-a.x(),this.M-a.y(),this.N-a.b())},ra:function(a){return new P(this.L*a,this.M*a,this.N*a)},he:function(a){return new P(this.L/a,this.M/a,this.N/a)},Pa:function(a){return this.L*a.x()+this.M*a.y()+this.N*a.b()},jd:function(a,b){return this.Sa(a.eb(this).ra(b))},length:function(){return Math.sqrt(this.Pa(this))},
mb:function(){return this.he(this.length())},jc:function(a){return new P(this.M*a.b()-this.N*a.y(),this.N*a.x()-this.L*a.b(),this.L*a.y()-this.M*a.x())},x:q("L"),y:q("M"),b:q("N")};y("csgVector",P);y("csgVector.prototype.clone",P.prototype.c);y("csgVector.prototype.plus",P.prototype.Sa);y("csgVector.prototype.minus",P.prototype.eb);y("csgVector.prototype.dividedBy",P.prototype.he);y("csgVector.prototype.times",P.prototype.ra);y("csgVector.prototype.dot",P.prototype.Pa);
y("csgVector.prototype.lerp",P.prototype.jd);y("csgVector.prototype.length",P.prototype.length);y("csgVector.prototype.unit",P.prototype.mb);y("csgVector.prototype.cross",P.prototype.jc);y("csgVector.prototype.negated",P.prototype.sc);y("csgVector.prototype.x",P.prototype.x);y("csgVector.prototype.y",P.prototype.y);y("csgVector.prototype.z",P.prototype.b);function Qc(){this.wc=i}
function Rc(a,b,c){switch(typeof b){case "string":Sc(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==m){c.push("null");break}if(ga(b)){var d=b.length;c.push("[");for(var f="",e=0;e<d;e++)c.push(f),f=b[e],Rc(a,a.wc?a.wc.call(b,""+e,f):f,c),f=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),Sc(e,c),c.push(":"),
Rc(a,a.wc?a.wc.call(b,e,f):f,c),d=","));c.push("}");break;case "function":break;default:g(Error("Unknown type: "+typeof b))}}var Tc={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\u000b"},Uc=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function Sc(a,b){b.push('"',a.replace(Uc,function(a){if(a in Tc)return Tc[a];var b=a.charCodeAt(0),f="\\u";16>b?f+="000":256>b?f+="00":4096>b&&(f+="0");return Tc[a]=f+b.toString(16)}),'"')};function Vc(){L.call(this);this._className="indexer";this.Rc=[];this.th=[];this.Jc={}}z(Vc,L);Vc.prototype.add=function(a){v(a)||g(Error("Invalid object."));var b;b=[];Rc(new Qc,a,b);b=b.join("");if(!(b in this.Jc))this.Jc[b]=this.Rc.length,this.Rc.push(a);return this.Jc[b]};Vc.prototype.unique=q("Rc");y("X.indexer.prototype.add",Vc.prototype.add);y("X.indexer.prototype.unique",Vc.prototype.unique);function R(a,b){this.G=new P(a);this.r=new P(b)}R.prototype={c:function(){return new R(this.G.c(),this.r.c())},ma:function(){this.r=this.r.sc()},te:function(a,b){return new R(this.G.jd(a.G,b),this.r.jd(a.r,b))},ng:q("G"),nd:q("r")};y("csgVertex",R);y("csgVertex.prototype.clone",R.prototype.c);y("csgVertex.prototype.flip",R.prototype.ma);y("csgVertex.prototype.interpolate",R.prototype.te);y("csgVertex.prototype.pos",R.prototype.ng);y("csgVertex.prototype.normal",R.prototype.nd);function Wc(a,b){this.r=a;this.nb=b}Wc.prototype={c:function(){return new Wc(this.r.c(),this.nb)},ma:function(){this.r=this.r.sc();this.nb=-this.nb},Pg:q("nb"),nd:q("r")};y("csgPlane.prototype.w",Wc.prototype.Pg);y("csgPlane.prototype.normal",Wc.prototype.nd);function Xc(a,b){this.ja=a;this.Ub=b;var c=a[0].G,d=a[2].G,d=a[1].G.eb(c).jc(d.eb(c)).mb();this.J=new Wc(d,d.Pa(c))}
Xc.prototype={c:function(){var a=this.ja.map(function(a){return a.c()});return new Xc(a,this.Ub)},ma:function(){this.ja.reverse().map(function(a){a.ma()});this.J.ma()},Og:q("ja"),Dg:q("Ub"),cf:function(a,b,c,d,f){for(var e=0,h=[],j=0;j<this.ja.length;j++){var k=a.r.Pa(this.ja[j].G)-a.nb,k=-1.0E-5>k?2:1.0E-5<k?1:0,e=e|k;h.push(k)}switch(e){case 0:(0<a.r.Pa(this.J.r)?b:c).push(this);break;case 1:d.push(this);break;case 2:f.push(this);break;case 3:b=[];c=[];for(j=0;j<this.ja.length;j++){var n=(j+1)%
this.ja.length,k=h[j],t=h[n],e=this.ja[j],n=this.ja[n];2!=k&&b.push(e);1!=k&&c.push(2!=k?e.c():e);3==(k|t)&&(k=(a.nb-a.r.Pa(e.G))/a.r.Pa(n.G.eb(e.G)),k=e.te(n,k),b.push(k),c.push(k.c()))}3<=b.length&&d.push(new Xc(b,this.Ub));3<=c.length&&f.push(new Xc(c,this.Ub))}}};y("csgPolygon",Xc);y("csgPolygon.prototype.clone",Xc.prototype.c);y("csgPolygon.prototype.flip",Xc.prototype.ma);y("csgPolygon.prototype.vertices",Xc.prototype.Og);y("csgPolygon.prototype.shared",Xc.prototype.Dg);function Yc(a){this.u=this.w=this.J=m;this.h=[];a&&this.ab(a)}
Yc.prototype={c:function(){var a=new Yc;a.zg(this.J&&this.J.c());a.wg(this.w&&this.w.c());a.tg(this.u&&this.u.c());a.Tb(this.h.map(function(a){return a.c()}));return a},F:function(){for(var a=0;a<this.h.length;a++)this.h[a].ma();this.J.ma();this.w&&this.w.F();this.u&&this.u.F();a=this.w;this.w=this.u;this.u=a},Wc:function(a){if(!this.J)return a.slice();for(var b=[],c=[],d=0;d<a.length;d++)a[d].cf(this.J,b,c,b,c);this.w&&(b=this.w.Wc(b));c=this.u?this.u.Wc(c):[];return b.concat(c)},V:function(a){this.h=
a.Wc(this.h);this.w&&this.w.V(a);this.u&&this.u.V(a)},Ga:function(){var a=this.h.slice();this.w&&(a=a.concat(this.w.Ga()));this.u&&(a=a.concat(this.u.Ga()));return a},ab:function(a){if(a.length){if(!this.J)this.J=a[0].J.c();for(var b=[],c=[],d=0;d<a.length;d++)a[d].cf(this.J,this.h,this.h,b,c);if(b.length){if(!this.w)this.w=new Yc;this.w.ab(b)}if(c.length){if(!this.u)this.u=new Yc;this.u.ab(c)}}},zg:aa("J"),wg:aa("w"),tg:aa("u"),We:q("h"),Tb:aa("h")};function S(){this.h=[]}function Zc(a){var b=new S;b.Tb(a);return b}
S.prototype={c:function(){var a=new S;a.Tb(this.h.map(function(a){return a.c()}));return a},Hg:q("h"),Ac:function(a){var b=new Yc(this.c().h),a=new Yc(a.c().h);b.V(a);a.V(b);a.F();a.V(b);a.F();b.ab(a.Ga());return Zc(b.Ga())},ia:function(a){var b=new Yc(this.c().h),a=new Yc(a.c().h);b.F();b.V(a);a.V(b);a.F();a.V(b);a.F();b.ab(a.Ga());b.F();return Zc(b.Ga())},pc:function(a){var b=new Yc(this.c().h),a=new Yc(a.c().h);b.F();a.V(b);a.F();b.V(a);a.V(b);b.ab(a.Ga());b.F();return Zc(b.Ga())},inverse:function(){var a=
this.c();a.h.map(function(a){a.ma()});return a},We:q("h"),Tb:aa("h")};y("CSG",S);y("CSG.fromPolygons",Zc);y("CSG.prototype.toPolygons",S.prototype.Hg);y("CSG.prototype.union",S.prototype.Ac);y("CSG.prototype.subtract",S.prototype.ia);y("CSG.prototype.intersect",S.prototype.pc);y("CSG.prototype.inverse",S.prototype.inverse);y("CSG.prototype.polygons",S.prototype.We);y("CSG.prototype.setPolygons",S.prototype.Tb);function T(a,b){this.x=fa(a)?a:0;this.y=fa(b)?b:0}T.prototype.c=function(){return new T(this.x,this.y)};T.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function $c(a,b){return new T(a.x-b.x,a.y-b.y)};function vc(a,b){this.x=a;this.y=b}z(vc,T);u=vc.prototype;u.c=function(){return new vc(this.x,this.y)};u.rc=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};u.scale=function(a){this.x*=a;this.y*=a;return this};u.F=function(){this.x=-this.x;this.y=-this.y;return this};u.normalize=function(){return this.scale(1/this.rc())};u.add=function(a){this.x+=a.x;this.y+=a.y;return this};u.ia=function(a){this.x-=a.x;this.y-=a.y;return this};
u.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};u.Eb=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function ad(a,b){this.width=a;this.height=b}function bd(a,b){return a==b?l:!a||!b?p:a.width==b.width&&a.height==b.height}u=ad.prototype;u.c=function(){return new ad(this.width,this.height)};u.toString=function(){return"("+this.width+" x "+this.height+")"};u.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};u.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
u.scale=function(a){this.width*=a;this.height*=a;return this};function cd(a,b){if(a instanceof cd)this.C=a.gf();else{var c;if(c=ha(a))a:{for(var d=c=0;d<a.length;d++){if(!ha(a[d])||0<c&&a[d].length!=c){c=p;break a}for(var f=0;f<a[d].length;f++)if(!x(a[d][f])){c=p;break a}if(0==c)c=a[d].length}c=0!=c}c?this.C=nb(a):a instanceof ad?this.C=dd(a.height,a.width):x(a)&&x(b)&&0<a&&0<b?this.C=dd(a,b):g(Error("Invalid argument(s) for Matrix contructor"))}this.m=new ad(this.C[0].length,this.C.length)}
function ed(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new cd(b)}function fd(a,b,c){for(var d=0;d<a.Q().height;d++)for(var f=0;f<a.Q().width;f++)b.call(c,a.C[d][f],d,f,a)}function gd(a,b){var c=new cd(a.Q());fd(a,function(d,f,e){c.C[f][e]=b.call(i,d,f,e,a)});return c}function dd(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var f=0;f<b;f++)c[d][f]=0}return c}u=cd.prototype;
u.add=function(a){bd(this.m,a.Q())||g(Error("Matrix summation is only supported on arrays of equal size"));return gd(this,function(b,c,d){return b+a.C[c][d]})};u.Eb=function(a,b){if(this.m.width!=a.m.width||this.m.height!=a.m.height)return p;for(var c=b||0,d=0;d<this.m.height;d++)for(var f=0;f<this.m.width;f++)if(!(Math.abs(this.C[d][f]-a.C[d][f])<=(c||1.0E-6)))return p;return l};u.Q=q("m");function hd(a,b,c){return!(0<=b&&b<a.m.height&&0<=c&&c<a.m.width)?m:a.C[b][c]}
function U(a,b,c,d){0<=b&&b<a.m.height&&0<=c&&c<a.m.width||g(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.m.height+","+a.m.width+")"));a.C[b][c]=d}u.multiply=function(a){if(a instanceof cd)return this.m.width!=a.Q().height&&g(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),id(this,a);if(x(a))return jd(this,a);g(Error("A matrix can only be multiplied by a number or another matrix."))};
u.ia=function(a){bd(this.m,a.Q())||g(Error("Matrix subtraction is only supported on arrays of equal size."));return gd(this,function(b,c,d){return b-a.C[c][d]})};u.gf=q("C");u.toString=function(){var a=0;fd(this,function(b){b=(""+b).length;b>a&&(a=b)});var b=[];ib(this.C,function(c){b.push("[ ");ib(c,function(c){c=""+c;b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};
function id(a,b){var c=new cd(a.m.height,b.Q().width);fd(c,function(a,f,e){for(var h=a=0;h<this.m.width;h++)a+=hd(this,f,h)*hd(b,h,e);U(c,f,e,a)},a);return c}function jd(a,b){return gd(a,function(a){return a*b})};function V(a,b){cd.call(this,a,b);this._className="matrix"}z(V,cd);function kd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new V(b)}V.prototype.v=function(){var a=[],b=this.Q();if(0==b.height||0==b.width)return[];var c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(hd(this,c,d));return a};
V.prototype.translate=function(a){this.m.width!=this.m.height&&g(Error("Can not translate non-square matrix."));var b=this.Q(),c=ed(b.height);a instanceof vc&&3==b.height?(U(c,0,2,a.x),U(c,1,2,a.y)):a instanceof K&&4==b.height?(U(c,0,3,a.x),U(c,1,3,a.y),U(c,2,3,a.b)):g(Error("Translation failed."));return new V(this.multiply(c))};
V.prototype.rotate=function(a,b){(4!=this.Q().height||this.m.width!=this.m.height)&&g(Error("Only 4x4 matrices can be rotated."));(!v(b)||!(b instanceof K))&&g(Error("Invalid axis vector."));x(a)||g(Error("Invalid angle."));var c=b.normalize(),d=Math.cos(a),f=Math.sin(a),e=ed(4);U(e,0,0,d+c.x*c.x*(1-d));U(e,0,1,c.x*c.y*(1-d)-c.b*f);U(e,0,2,c.x*c.b*(1-d)+c.y*f);U(e,1,0,c.y*c.x*(1-d)+c.b*f);U(e,1,1,d+c.y*c.y*(1-d));U(e,1,2,c.y*c.b*(1-d)-c.x*f);U(e,2,0,c.b*c.x*(1-d)-c.y*f);U(e,2,1,c.b*c.y*(1-d)+c.x*
f);U(e,2,2,d+c.b*c.b*(1-d));return new V(this.multiply(e))};V.prototype.Rb=function(a){var b=this.Q(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;a instanceof K&&3<=b.width?(c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.b):g(Error("Multiplication by vector failed."));a=this.multiply(new cd(c));return new K(parseFloat(hd(a,0,0)),parseFloat(hd(a,1,0)),parseFloat(hd(a,2,0)))};y("X.matrix",V);y("X.matrix.createIdentityMatrix",kd);y("X.matrix.prototype.flatten",V.prototype.v);
y("X.matrix.prototype.translate",V.prototype.translate);y("X.matrix.prototype.rotate",V.prototype.rotate);y("X.matrix.prototype.multiplyByVector",V.prototype.Rb);function ld(){L.call(this);this._className="transform";this.i=kd(4);this.wa=new Float32Array(this.i.v())}z(ld,L);u=ld.prototype;u.qg=function(a){(!x(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.i=this.i.rotate(a*Math.PI/180,new K(0,1,0));this.wa=new Float32Array(this.i.v());this.f=l};u.rg=function(a){(!x(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.i=this.i.rotate(a*Math.PI/180,new K(1,0,0));this.wa=new Float32Array(this.i.v());this.f=l};
u.sg=function(a){(!x(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.i=this.i.rotate(a*Math.PI/180,new K(0,0,1));this.wa=new Float32Array(this.i.v());this.f=l};u.Jg=function(a){x(a)||g(Error("Invalid distance."));this.i=this.i.translate(new K(a,0,0));this.wa=new Float32Array(this.i.v());this.f=l};u.Kg=function(a){x(a)||g(Error("Invalid distance."));this.i=this.i.translate(new K(0,a,0));this.wa=new Float32Array(this.i.v());this.f=l};
u.Lg=function(a){x(a)||g(Error("Invalid distance."));this.i=this.i.translate(new K(0,0,a));this.wa=new Float32Array(this.i.v());this.f=l};u.cg=q("i");u.$e=function(a){var b=kd(4);v(a)&&a instanceof V&&(b=a);this.i=b;this.wa=new Float32Array(this.i.v());this.f=l};function md(a){return a.wa}y("X.transform",ld);y("X.transform.prototype.rotateX",ld.prototype.qg);y("X.transform.prototype.rotateY",ld.prototype.rg);y("X.transform.prototype.rotateZ",ld.prototype.sg);y("X.transform.prototype.translateX",ld.prototype.Jg);
y("X.transform.prototype.translateY",ld.prototype.Kg);y("X.transform.prototype.translateZ",ld.prototype.Lg);y("X.transform.prototype.matrix",ld.prototype.cg);y("X.transform.prototype.setMatrix",ld.prototype.$e);function nd(){L.call(this);this._className="file";this.Pd=m}z(nd,L);nd.prototype.path=q("Pd");nd.prototype.xd=function(a){this.Pd=a;this.f=l};y("X.file",nd);y("X.file.prototype.path",nd.prototype.path);y("X.file.prototype.setPath",nd.prototype.xd);function od(a){v(a)||g(Error("Missing image file for the texture."));L.call(this);this._className="texture";this.ka=a;this.sh=pd;this.Jd=m;this.f=l}z(od,L);var pd="SHARP",qd={gh:pd,hh:"SMOOTH"};od.prototype.file=q("ka");od.prototype.fd=q("Jd");y("X.texture",od);y("X.texture.filters",qd);y("X.texture.prototype.file",od.prototype.file);function I(a){L.call(this);this._className="object";var b=window["X.Counter"];b.Vf();this._id=b.value();this._type=rd;this.Vd=new ld;this._color=[1,1,1];this.s=new N;this.t=new N;this.T=new N;this.ka=this.ec=this.O=m;this._opacity=1;this.Ua=m;this._visible=l;this._lineWidth=this._pointSize=1;this._caption=m;this._magicMode=p;if(v(a)){this._type=a.type();this.Vd.$e(new V(a.transform().i));this._color=Array(a.color());this.s=new N(a.s);this.t=new N(a.t);this.T=new N(a.T);this.O=a.O;this.ec=a.ec;if(a.file())this.ka=
new nd,this.ka.xd((new String(a.file().path())).toString());this._opacity=a.opacity();this.Ua=a.children();this._visible=a.Cd();this._pointSize=a.td();this._lineWidth=a.lineWidth();a.caption()&&(this._caption=(new String(a.caption())).toString());this._magicMode=a.kd()}}z(I,L);var rd="TRIANGLES",Oc="LINES";u=I.prototype;u.id=q("_id");
function sd(a){for(var b=a.s.W(),c=[],d=0,d=0;d<b;d+=3){var f=a.s.get(d),e=a.s.get(d+1),h=a.s.get(d+2),j=a.t.get(d),k=a.t.get(d+1),n=a.t.get(d+2),t=a._color;0<a.T.length()&&(t=a.T.get(d));var r=[];r.push(new R(f,j));r.push(new R(e,k));r.push(new R(h,n));c.push(new Xc(r,t))}return Zc(c)}
function td(a,b){(!v(b)||!(b instanceof S))&&g(Error("Invalid CSG object."));a.s.clear();a.t.clear();a.T.clear();var c=new Vc,d=[];jb(b.h,function(a){for(var b=[],h=a.Ub,b=jb(a.ja,function(a){a.color=h;return c.add(a)}),a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.rf=jb(c.unique(),function(a){return[a.G.x(),a.G.y(),a.G.b()]});a.qf=jb(c.unique(),function(a){return[a.r.x(),a.r.y(),a.r.b()]});a.pf=jb(c.unique(),function(a){return!a.color?m:[a.color[0],a.color[1],a.color[2]]});jb(d,function(a){var b=
a[0],c=a[1],a=a[2],d=this.rf,k=this.qf,n=this.pf;this.s.add(d[b][0],d[b][1],d[b][2]);this.s.add(d[c][0],d[c][1],d[c][2]);this.s.add(d[a][0],d[a][1],d[a][2]);this.t.add(k[b][0],k[b][1],k[b][2]);this.t.add(k[c][0],k[c][1],k[c][2]);this.t.add(k[a][0],k[a][1],k[a][2]);n[b]&&this.T.add(n[b][0],n[b][1],n[b][2]);n[c]&&this.T.add(n[c][0],n[c][1],n[c][2]);n[a]&&this.T.add(n[a][0],n[a][1],n[a][2])}.bind(a));a.kb(rd)}u.type=q("_type");u.kb=aa("_type");u.transform=q("Vd");u.lg=q("s");u.gg=q("t");u.Hf=q("T");
u.color=q("_color");u.Gg=q("O");u.Bg=function(a){v(a)?(w(a)&&(a=new od(a)),a instanceof od||g(Error("Invalid texture.")),this.O=a):this.O=m};u.Ze=function(a,b,c){(!x(a)&&0>a&&1<a||!x(b)&&0>b&&1<b||!x(c)&&0>c&&1<c)&&g(Error("Invalid color."));if(this.Mb())for(var d=this.children(),f=d.length,e=0,e=0;e<f;e++)d[e].Ze(a,b,c);this._color[0]=a;this._color[1]=b;this._color[2]=c;this.f=l};
u.Ac=function(a){(!v(a)||!(a instanceof S)&&!(a instanceof I))&&g(Error("Invalid object."));var b=a;a instanceof I&&(b=sd(b));a=new I;td(a,sd(this).Ac(b));return a};u.ia=function(a){(!v(a)||!(a instanceof S)&&!(a instanceof I))&&g(Error("Invalid object."));var b=a;a instanceof I&&(b=sd(b));a=new I;td(a,sd(this).ia(b));return a};u.pc=function(a){(!v(a)||!(a instanceof S)&&!(a instanceof I))&&g(Error("Invalid object."));var b=a;a instanceof I&&(b=sd(b));a=new I;td(a,sd(this).pc(b));return a};
u.inverse=function(a){(!v(a)||!(a instanceof S)&&!(a instanceof I))&&g(Error("Invalid object."));var b=a;a instanceof I&&(b=sd(b));a=new I;td(a,sd(this).inverse(b));return a};u.opacity=q("_opacity");u.caption=q("_caption");u.ug=function(a){this._caption=a;this.f=l};u.aa=function(a){if(this.Mb())for(var b=this.children(),c=b.length,d=0,d=0;d<c;d++)b[d].aa(a);this._visible=a;this.f=l};u.Cd=q("_visible");
u.af=function(a){(!x(a)||1<a||0>a)&&g(Error("Invalid opacity."));if(this.Mb())for(var b=this.children(),c=b.length,d=0,d=0;d<c;d++)b[d].af(a);this._opacity=a;this.f=l};u.load=function(a){if(v(a)){if(!this.ka)this.ka=new nd;this.ka.xd(a)}else this.ka=m};u.file=q("ka");function ud(a){var b=new Cc;b.Ma=a;a.dispatchEvent(b)}u.children=function(){if(!this.Ua)this.Ua=[];return this.Ua};u.Mb=function(){return!this.Ua?p:0<this.Ua.length};
u.xg=function(a){x(a)||g(Error("Invalid line width."));this._lineWidth=a;this.f=l};u.lineWidth=q("_lineWidth");u.Ag=function(a){x(a)||g(Error("Invalid point size."));this._pointSize=a;this.f=l};u.td=q("_pointSize");u.kd=q("_magicMode");u.yg=function(a){"boolean"!=typeof a&&g(Error("Invalid magicMode setting."));this._magicMode=a};
function vd(a,b){(!v(a)||!v(b)||!(a instanceof I)||!(b instanceof I))&&g(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.opacity()?-1:1==b.opacity()?1:v(a.kc)&&v(b.kc)&&a.kc>b.kc?-1:1}y("X.object",I);y("X.object.prototype.id",I.prototype.id);y("X.object.prototype.type",I.prototype.type);y("X.object.prototype.transform",I.prototype.transform);y("X.object.prototype.points",I.prototype.lg);y("X.object.prototype.normals",I.prototype.gg);y("X.object.prototype.texture",I.prototype.Gg);
y("X.object.prototype.setTexture",I.prototype.Bg);y("X.object.prototype.colors",I.prototype.Hf);y("X.object.prototype.color",I.prototype.color);y("X.object.prototype.setColor",I.prototype.Ze);y("X.object.prototype.opacity",I.prototype.opacity);y("X.object.prototype.setOpacity",I.prototype.af);y("X.object.prototype.lineWidth",I.prototype.lineWidth);y("X.object.prototype.setLineWidth",I.prototype.xg);y("X.object.prototype.pointSize",I.prototype.td);y("X.object.prototype.setPointSize",I.prototype.Ag);
y("X.object.prototype.load",I.prototype.load);y("X.object.prototype.file",I.prototype.file);y("X.object.prototype.caption",I.prototype.caption);y("X.object.prototype.visible",I.prototype.Cd);y("X.object.prototype.setCaption",I.prototype.ug);y("X.object.prototype.setVisible",I.prototype.aa);y("X.object.prototype.magicMode",I.prototype.kd);y("X.object.prototype.setMagicMode",I.prototype.yg);y("X.object.prototype.intersect",I.prototype.pc);y("X.object.prototype.inverse",I.prototype.inverse);
y("X.object.prototype.subtract",I.prototype.ia);y("X.object.prototype.union",I.prototype.Ac);y("X.object.OPACITY_COMPARATOR",vd);y("X.object.prototype.children",I.prototype.children);function wd(){Hc.call(this);this._className="parserVTK"}z(wd,Hc);
wd.prototype.parse=function(a,b){var c=a.s,d=a.t,f=b.split("\n"),e=f.length,h=new N,j=new N;this.A=[];this.U=rd;this.Nc=this.Ea=this.va=this.Fa=p;for(var k=0,n=e%8;n--;)this.o(h,j,f[k]),k++;for(n=0.125*e^0;n--;)this.o(h,j,f[k]),k++,this.o(h,j,f[k]),k++,this.o(h,j,f[k]),k++,this.o(h,j,f[k]),k++,this.o(h,j,f[k]),k++,this.o(h,j,f[k]),k++,this.o(h,j,f[k]),k++,this.o(h,j,f[k]),k++;if(this.U==rd){f=j.length();k=e=this.A.length;do{var n=this.A[e-k],t=n.length,r;for(r=0;r<t;r++){var o=parseInt(n[r],10),s=
h.get(o);c.add(s[0],s[1],s[2]);o<f?(o=j.get(o),d.add(o[0],o[1],o[2])):(o=new K(s[0],s[1],s[2]),o.normalize(),d.add(o.x,o.y,o.b))}k--}while(0<k)}else if("TRIANGLE_STRIPS"==this.U){f=j.length();k=e=this.A.length;do{n=this.A[e-k];t=n.length;for(r=0;r<t;r++)o=parseInt(n[r],10),s=h.get(o),c.add(s[0],s[1],s[2]),(0==r||r==t-1)&&c.add(s[0],s[1],s[2]),o<f?(o=j.get(o),d.add(o[0],o[1],o[2]),(0==r||r==t-1)&&d.add(o[0],o[1],o[2])):(o=new K(s[0],s[1],s[2]),o.normalize(),d.add(o.x,o.y,o.b),(0==r||r==t-1)&&d.add(o.x,
o.y,o.b));k--}while(0<k)}else if(this.U==Oc){f=j.length();k=e=this.A.length;do{n=this.A[e-k];t=n.length;for(r=0;r<t-1;r++){var F=parseInt(n[r],10),o=parseInt(n[r+1],10),G=h.get(F),s=h.get(o);c.add(G[0],G[1],G[2]);c.add(s[0],s[1],s[2]);F<f-1?(s=j.get(F),o=j.get(o),d.add(s[0],s[1],s[2]),d.add(o[0],o[1],o[2])):(o=new K(G[0],G[1],G[2]),o.normalize(),d.add(o.x,o.y,o.b),o=new K(s[0],s[1],s[2]),o.normalize(),d.add(o.x,o.y,o.b))}k--}while(0<k)}else if("POINTS"==this.U){f=j.length();k=e=this.A.length;do{n=
this.A[e-k];t=n.length;for(r=0;r<t;r++)o=parseInt(n[r],10),s=h.get(o),c.add(s[0],s[1],s[2]),o<f?(o=j.get(o),d.add(o[0],o[1],o[2])):(o=new K(s[0],s[1],s[2]),o.normalize(),d.add(o.x,o.y,o.b));k--}while(0<k)}else if("POLYGONS"==this.U){f=j.length();k=e=this.A.length;do{n=this.A[e-k];t=n.length;for(r=0;r<t;r++)o=parseInt(n[r],10),s=h.get(o),c.add(s[0],s[1],s[2]),o<f?(o=j.get(o),d.add(o[0],o[1],o[2])):(o=new K(s[0],s[1],s[2]),o.normalize(),d.add(o.x,o.y,o.b));k--}while(0<k)}a.kb(this.U);c=new Cc;c.Ma=
a;this.dispatchEvent(c)};
wd.prototype.o=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),c=c.split(" "),d=c.length,f=c[0];if("POINTS"==f)this.Fa=l,this.Ea=this.va=p;else if("VERTICES"==f)this.va=l,this.Ea=this.Fa=p,a=parseInt(c[1],10),3<=a?this.U=rd:1==a?this.U="POINTS":g(Error("VTK file not supported!")),this.A=[];else if("TRIANGLE_STRIPS"==f)this.va=l,this.Ea=this.Fa=p,this.U="TRIANGLE_STRIPS",this.A=[];else if("LINES"==f)this.va=l,this.Ea=this.Fa=p,this.U=Oc,this.A=[];else if("POLYGONS"==f)this.va=l,this.Ea=this.Fa=p,
this.U="POLYGONS",this.A=[];else if("POINT_DATA"==f)this.Ea=l,this.va=this.Fa=p;else if(this.Fa)if(1==d||isNaN(parseFloat(f)))this.Fa=p;else{if(3<=d){var f=parseFloat(c[0]),e=parseFloat(c[1]),h=parseFloat(c[2]);a.add(f,e,h)}6<=d&&(f=parseFloat(c[3]),e=parseFloat(c[4]),h=parseFloat(c[5]),a.add(f,e,h));9<=d&&(d=parseFloat(c[6]),f=parseFloat(c[7]),c=parseFloat(c[8]),a.add(d,f,c))}else if(this.va)1==d||isNaN(parseFloat(f))?this.va=p:this.A.push(c.slice(1));else if(this.Ea)"NORMALS"==f?this.Nc=l:1==d||
isNaN(parseFloat(f))?this.Nc=this.Ea=p:this.Nc&&(3<=d&&(f=parseFloat(c[0]),e=parseFloat(c[1]),h=parseFloat(c[2]),b.add(f,e,h)),6<=d&&(f=parseFloat(c[3]),e=parseFloat(c[4]),h=parseFloat(c[5]),b.add(f,e,h)),9<=d&&(d=parseFloat(c[6]),f=parseFloat(c[7]),c=parseFloat(c[8]),b.add(d,f,c)))};y("X.parserVTK",wd);y("X.parserVTK.prototype.parse",wd.prototype.parse);y("X.parserVTK.prototype.parseLine",wd.prototype.o);function xd(){Hc.call(this);this._className="parserFSM"}z(xd,Hc);
xd.prototype.parse=function(a,b){var c=a.s,d=a.t,f=new N,e;e=3;var h=0,j;do j=O(b,e++),h++;while(200>h&&10!=j);e++;var k=Mc(b,e);e+=4;h=Mc(b,e);e+=4;j=[];for(var n=0,n=0;n<k;n++){var t=Jc(b,e);e+=4;var r=Jc(b,e);e+=4;var o=Jc(b,e);e+=4;j[n]=0;f.add(t,r,o)}k=[];n=[];for(t=0;t<h;t++){var s=Mc(b,e);e+=4;o=Mc(b,e);e+=4;r=Mc(b,e);e+=4;j[s]+=1;j[o]+=1;j[r]+=1;k.push([s,o,r]);n.push(new K(0,0,0))}for(t=0;t<h;t++){var s=k[t][0],o=k[t][1],r=k[t][2],F=f.get(s);e=f.get(o);var G=f.get(r),F=new K(F[0],F[1],F[2]),
G=new K(G[0],G[1],G[2]);e=(new K(e[0],e[1],e[2])).c().ia(F);F=G.c().ia(F);e=Fc(e,F).normalize();n[s]=n[s].add(e);n[o]=n[o].add(e);n[r]=n[r].add(e)}for(t=0;t<h;t++)s=k[t][0],o=k[t][1],r=k[t][2],F=f.get(s),e=f.get(o),G=f.get(r),c.add(F[0],F[1],F[2]),c.add(e[0],e[1],e[2]),c.add(G[0],G[1],G[2]),s=n[s].scale(1/j[s]).normalize(),o=n[o].scale(1/j[o]).normalize(),r=n[r].scale(1/j[r]).normalize(),d.add(s.x,s.y,s.b),d.add(o.x,o.y,o.b),d.add(r.x,r.y,r.b);a.kb(rd);c=new Cc;c.Ma=a;this.dispatchEvent(c)};
y("X.parserFSM",xd);y("X.parserFSM.prototype.parse",xd.prototype.parse);function yd(){L.call(this);this._className="loader";this.qb=m;this.yb=0}z(yd,L);function zd(a){if(!v(a.qb))a.qb=new D;return a.qb}function Ad(a){return!v(a.qb)?l:!a.qb.Xc(p)}yd.prototype.bg=function(a){Bd(this,1.7);setTimeout(function(){a.O.Ha();ud(a);zd(this).set(a.id(),l)}.bind(this),100)};function Bd(a,b){a.yb+=b/zd(a).ea()/3;if(1<a.yb)a.yb=1;var c=new Dc;c.Wd=a.yb;a.dispatchEvent(c)}yd.prototype.ye=function(){g(Error("Could not get the file."))};
yd.prototype.ag=function(a,b){Bd(this,1);setTimeout(function(){var c=b.file().path().split(".").pop().toLowerCase();"stl"==c?(c=new Pc,bc(c,pc,this.uc.bind(this)),c.parse(b,a.response)):"vtk"==c?(c=new wd,bc(c,pc,this.uc.bind(this)),c.parse(b,a.response)):"trk"==c?(c=new Nc,bc(c,pc,this.uc.bind(this)),c.parse(b,a.response)):"fsm"==c&&(c=new xd,bc(c,pc,this.uc.bind(this)),c.parse(b,a.response))}.bind(this),100)};
yd.prototype.uc=function(a){Bd(this,1);setTimeout(function(){var b=a.Ma;b.file().Ha();ud(b);zd(this).set(b.id(),l)}.bind(this),100)};y("X.loader",yd);function Cd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Cd.prototype.c=function(){return new Cd(this.top,this.right,this.bottom,this.left)};Cd.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};Cd.prototype.contains=function(a){return!this||!a?p:a instanceof Cd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Dd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}u=Dd.prototype;u.c=function(){return new Dd(this.left,this.top,this.width,this.height)};u.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
u.ue=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,l}return p};u.contains=function(a){return a instanceof Dd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
u.Q=function(){return new ad(this.width,this.height)};var Ed;function Fd(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=ob(arguments,1),f;f=c;for(var e=0,h=0;h<d.length;h++)0<=hb(f,d[h])||(f.push(d[h]),e++);f=e==d.length;a.className=c.join(" ");return f};var Gd=!A||ab(9);!Na&&!A||A&&ab(9)||Na&&C("1.9.1");A&&C("9");function Hd(a){return a?new Id(Jd(a)):Ed||(Ed=new Id)}function Kd(a){return w(a)?document.getElementById(a):a}function Ld(a,b){bb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Md?a.setAttribute(Md[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}
var Md={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function Nd(a,b,c){return Od(document,arguments)}
function Od(a,b){var c=b[0],d=b[1];if(!Gd&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',sa(d.name),'"');if(d.type){c.push(' type="',sa(d.type),'"');var f={};fb(f,d);d=f;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)w(d)?c.className=d:ga(d)?Fd.apply(m,[c].concat(d)):Ld(c,d);2<b.length&&Pd(a,c,b);return c}
function Pd(a,b,c){function d(c){c&&b.appendChild(w(c)?a.createTextNode(c):c)}for(var f=2;f<c.length;f++){var e=c[f];ha(e)&&!(ja(e)&&0<e.nodeType)?ib(Qd(e)?nb(e):e,d):d(e)}}function Rd(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Sd(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function Td(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Jd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Qd(a){if(a&&"number"==typeof a.length){if(ja(a))return"function"==typeof a.item||"string"==typeof a.item;if(ia(a))return"function"==typeof a.item}return p}function Id(a){this.q=a||ba.document||document}u=Id.prototype;
u.Ib=Hd;u.d=function(a){return w(a)?this.q.getElementById(a):a};u.Oa=function(a,b,c){return Od(this.q,arguments)};u.createElement=function(a){return this.q.createElement(a)};u.createTextNode=function(a){return this.q.createTextNode(a)};function Ud(a){return"CSS1Compat"==a.q.compatMode}function Vd(a){var b=a.q,a=!B&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new T(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}u.appendChild=function(a,b){a.appendChild(b)};
u.contains=Td;function Wd(a,b){var c=Jd(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,m))?c[b]||c.getPropertyValue(b):""}function Xd(a,b){return a.currentStyle?a.currentStyle[b]:m}function Yd(a,b){return Wd(a,b)||Xd(a,b)||a.style&&a.style[b]}function Zd(a){a=a?9==a.nodeType?a:Jd(a):document;return A&&!ab(9)&&!Ud(Hd(a))?a.body:a.documentElement}
function $d(a){var b=a.getBoundingClientRect();if(A)a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop;return b}
function ae(a){if(A&&!ab(8))return a.offsetParent;for(var b=Jd(a),c=Yd(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Yd(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return m}
function be(a){for(var b=new Cd(0,Infinity,Infinity,0),c=Hd(a),d=c.q.body,f=c.q.documentElement,e=!B&&"CSS1Compat"==c.q.compatMode?c.q.documentElement:c.q.body;a=ae(a);)if((!A||0!=a.clientWidth)&&(!B||0!=a.clientHeight||a!=d)&&a!=d&&a!=f&&"visible"!=Yd(a,"overflow")){var h=ce(a),j;j=a;if(Na&&!C("1.9")){var k=parseFloat(Wd(j,"borderLeftWidth"));if(de(j))var n=j.offsetWidth-j.clientWidth-k-parseFloat(Wd(j,"borderRightWidth")),k=k+n;j=new T(k,parseFloat(Wd(j,"borderTopWidth")))}else j=new T(j.clientLeft,
j.clientTop);h.x+=j.x;h.y+=j.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=e.scrollLeft;e=e.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,e);c=c.q.parentWindow||c.q.defaultView||window;f=c.document;B&&!C("500")&&!Oa?("undefined"==typeof c.innerHeight&&(c=window),f=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<f&&(f-=15),c=new ad(c.innerWidth,f)):(c="CSS1Compat"==
f.compatMode?f.documentElement:f.body,c=new ad(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,e+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:m}
function ce(a){var b,c=Jd(a),d=Yd(a,"position"),f=Na&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),e=new T(0,0),h=Zd(c);if(a==h)return e;if(a.getBoundingClientRect)b=$d(a),a=Vd(Hd(c)),e.x=b.left+a.x,e.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),e.x=b.screenX-a.screenX,e.y=b.screenY-a.screenY;else{b=a;do{e.x+=b.offsetLeft;e.y+=b.offsetTop;b!=a&&(e.x+=b.clientLeft||0,e.y+=b.clientTop||0);
if(B&&"fixed"==Yd(b,"position")){e.x+=c.body.scrollLeft;e.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Ma||B&&"absolute"==d)e.y-=c.body.offsetTop;for(b=a;(b=ae(b))&&b!=c.body&&b!=h;)if(e.x-=b.scrollLeft,!Ma||"TR"!=b.tagName)e.y-=b.scrollTop}return e}function fe(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function ge(a){if("none"!=Yd(a,"display"))return he(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=he(a);b.display=c;b.position=f;b.visibility=d;return a}function he(a){var b=a.offsetWidth,c=a.offsetHeight,d=B&&!b&&!c;return(!fa(b)||d)&&a.getBoundingClientRect?(a=$d(a),new ad(a.right-a.left,a.bottom-a.top)):new ad(b,c)}function ie(a,b){a.style.display=b?"":"none"}function de(a){return"rtl"==Yd(a,"direction")}
function je(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}var ke={thin:2,medium:4,thick:6};function le(a,b){if("none"==Xd(a,b+"Style"))return 0;var c=Xd(a,b+"Width");return c in ke?ke[c]:je(a,c)};function me(a){this.$=a;this.j=[]}z(me,Eb);var ne=[];function oe(a,b,c,d,f){ga(c)||(ne[0]=c,c=ne);for(var e=0;e<c.length;e++)a.j.push(E(b,c[e],d||a,f||p,a.$||a))}me.prototype.vc=function(){ib(this.j,dc);this.j.length=0};me.prototype.p=function(){me.z.p.call(this);this.vc()};me.prototype.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))};function pe(){}(function(a){a.le=function(){return a.Wf||(a.Wf=new a)}})(pe);pe.prototype.md=0;pe.le();function qe(a){this.Y=a||Hd();this.pg=re}z(qe,Gc);qe.prototype.Uf=pe.le();var re=m;u=qe.prototype;u.se=m;u.Ra=p;u.e=m;u.pg=m;u.eg=m;u.fb=m;u.bb=m;u.Cb=m;u.Qg=p;u.d=q("e");u.wd=function(a){this.fb&&this.fb!=a&&g(Error("Method not supported"));qe.z.wd.call(this,a)};u.Ib=q("Y");u.Oa=function(){this.e=this.Y.createElement("div")};u.ib=function(a){this.jb(a)};
u.jb=function(a,b){this.Ra&&g(Error("Component already rendered"));this.e||this.Oa();a?a.insertBefore(this.e,b||m):this.Y.q.body.appendChild(this.e);(!this.fb||this.fb.Ra)&&this.lc()};u.lc=function(){this.Ra=l;se(this,function(a){!a.Ra&&a.d()&&a.lc()})};u.Gb=function(){se(this,function(a){a.Ra&&a.Gb()});this.nc&&this.nc.vc();this.Ra=p};
u.p=function(){qe.z.p.call(this);this.Ra&&this.Gb();this.nc&&(this.nc.X(),delete this.nc);se(this,function(a){a.X()});!this.Qg&&this.e&&Rd(this.e);this.fb=this.eg=this.e=this.Cb=this.bb=m};u.Mb=function(){return!!this.bb&&0!=this.bb.length};function se(a,b){a.bb&&ib(a.bb,b,i)}
u.removeChild=function(a,b){if(a){var c=w(a)?a:a.se||(a.se=":"+(a.Uf.md++).toString(36)),a=this.Cb&&c?(c in this.Cb?this.Cb[c]:i)||m:m;if(c&&a){var d=this.Cb;c in d&&delete d[c];lb(this.bb,a);b&&(a.Gb(),a.e&&Rd(a.e));c=a;c==m&&g(Error("Unable to set parent component"));c.fb=m;qe.z.wd.call(c,m)}}a||g(Error("Child is not in parent component"));return a};function te(){}z(te,Gc);u=te.prototype;u.Ad=0;u.Qb=0;u.ld=100;u.ke=0;u.zd=1;u.Yf=p;u.fg=p;u.zc=function(a){a=ue(this,a);if(this.Ad!=a)this.Ad=a+this.ke>this.ld?this.ld-this.ke:a<this.Qb?this.Qb:a,!this.Yf&&!this.fg&&this.dispatchEvent("change")};u.mc=function(){return ue(this,this.Ad)};u.Lb=function(){return ue(this,this.Qb)};u.Kb=function(){return ue(this,this.ld)};function ue(a,b){return a.zd==m?b:a.Qb+Math.round((b-a.Qb)/a.zd)*a.zd};function ve(a){qe.call(this,a);this.gb=new te;E(this.gb,"change",this.Rf,p,this)}z(ve,qe);var we={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};u=ve.prototype;u.Oa=function(){this.ba=this.Ib().Oa("div","progress-bar-thumb");var a=we[this.Se];this.e=this.Ib().Oa("div",a,this.ba);xe(this);this.d().setAttribute("aria-valuemin",this.Lb());this.d().setAttribute("aria-valuemax",this.Kb())};
u.lc=function(){ve.z.lc.call(this);A&&7>Sa&&E(this.d(),"resize",this.Bc,p,this);this.Bc();var a=this.d();a.setAttribute("role","progressbar");a.zh="progressbar";this.d().setAttribute("aria-live","polite")};u.Gb=function(){ve.z.Gb.call(this);ye(this)};function ye(a){A&&7>Sa&&cc(a.d(),"resize",a.Bc,p,a)}u.mc=function(){return this.gb.mc()};u.zc=function(a){this.gb.zc(a);this.d()&&xe(this)};function xe(a){var b=a.mc();a.d().setAttribute("aria-valuenow",b)}u.Lb=function(){return this.gb.Lb()};u.Kb=function(){return this.gb.Kb()};
u.Se="horizontal";u.Rf=function(){this.Bc();this.dispatchEvent("change")};u.Bc=function(){if(this.ba){var a=this.Lb(),b=this.Kb(),a=(this.mc()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Se?A&&7>Sa?(this.ba.style.top=0,this.ba.style.height="100%",b=this.ba.offsetHeight,a=Math.round(a*b),this.ba.style.top=b-a+"px",this.ba.style.height=a+"px"):(this.ba.style.top=100-b+"%",this.ba.style.height=b+"%"):this.ba.style.width=b+"%"}};u.p=function(){ye(this);ve.z.p.call(this);this.ba=m;this.gb.X()};function ze(a,b){v(a)||g(Error("No valid parent element."));v(b)||g(Error("Invalid initial value."));ve.call(this);this._className="progressbar";this.Da=a;this.ac=this.la=m;this.Ja=[];this.Ja=[".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n  background: white;\n  padding: 1px;\n  overflow: hidden;\n  margin: 2px;\n  width: 100px;\n  height: 5px;\n}",".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n  overflow: hidden;\n  width: 0%;\n  height: 100%;\n}",
".progress-bar-thumb-done {\n  background: #57E964;\n}"];this.zc(b);this.gd()}z(ze,ve);
ze.prototype.gd=function(){this.Da.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Nd("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Ja[0]),d=document.createTextNode(this.Ja[1]),f=document.createTextNode(this.Ja[2]);a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(f);this.la=b;this.ib(this.Da);a=this.d();a.style.position="absolute";a.style.top=(this.Da.clientHeight-5)/2;a.style.left=(this.Da.clientWidth-100)/2};
ze.prototype.ie=function(){var a=this.d().style.top,b=this.d().style.left;Rd(this.d());var c=new ze(this.Da,100),d=c.d();d.style.position="absolute";d.style.top=a;d.style.left=b;(d.firstElementChild!=i?d.firstElementChild:Sd(d.firstChild)).classList.add("progress-bar-thumb-done");this.ac=c};ze.prototype.Ob=function(){this.la&&Rd(this.la);this.d()&&Rd(this.d());this.ac&&Rd(this.ac.d());this.ac=this.la=m};y("X.progressbar",ze);y("X.progressbar.prototype.done",ze.prototype.ie);
y("X.progressbar.prototype.kill",ze.prototype.Ob);function Ae(){L.call(this);this._className="shader";this.Bb="";this.Bb="precision mediump float;\n\nattribute vec3 vertexPosition;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\nattribute vec2 vertexTexturePos;\n\nuniform mat4 view;\nuniform mat4 perspective;\nuniform vec3 center;\nuniform mat4 objectTransform;\nuniform bool useObjectColor;\nuniform vec3 objectColor;\nuniform float pointSize;\n\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * vertexNormal;\n  vec3 vertexPosition2 = vertexPosition - center;\n  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n  fragmentTexturePos = vertexTexturePos;\n  if (useObjectColor) {\n    fragmentColor = objectColor;\n  } else {\n    fragmentColor = vertexColor;\n  }\n  gl_PointSize = pointSize;\n  gl_Position = perspective * fVertexPosition;\n}\n";
this.pb="";this.pb="precision mediump float;\n\nuniform bool usePicking;\nuniform bool useTexture;\nuniform sampler2D textureSampler;\nuniform float objectOpacity;\n\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n if (usePicking) {\n   gl_FragColor = vec4(fragmentColor, 1.0);\n } else if (useTexture) {\n   gl_FragColor = texture2D(textureSampler,   vec2(fragmentTexturePos.s,fragmentTexturePos.t));\n } else {\n   vec3 nNormal = normalize(fTransformedVertexNormal);\n   vec3 light = vec3(0.0, 0.0, 1.0);\n   vec3 lightDirection = vec3(0,0,-10);\n   lightDirection = normalize(lightDirection);\n   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n   float ambient = 0.3;\n   gl_FragColor = vec4(fragmentColor * ambient +\n                       fragmentColor * diffuse +\n                       vec3(0.2, 0.2, 0.2) * specular,\n                       objectOpacity);\n }\n}\n"}
z(Ae,L);var Be={oh:"vertexPosition",nh:"vertexNormal",mh:"vertexColor",ph:"vertexTexturePos"},Ce={qh:"view",$g:"perspective",Rg:"center",Yg:"objectTransform",jh:"useObjectColor",Wg:"objectColor",ah:"pointSize",Xg:"objectOpacity",Vg:"normal",kh:"usePicking",lh:"useTexture",ih:"textureSampler"};Ae.prototype.Ng=q("Bb");Ae.prototype.Of=q("pb");
Ae.prototype.mf=function(){var a=Object.keys(Ce);Object.keys(Be).every(function(a){a=eval("X.shaders.attributes."+a);return-1!=this.Bb.search(a)||-1!=this.pb.search(a)}.bind(this))||g(Error("Could not find all attributes in the shader sources."));a.every(function(a){a=eval("X.shaders.uniforms."+a);return-1!=this.Bb.search(a)||-1!=this.pb.search(a)}.bind(this))||g(Error("Could not find all uniforms in the shader sources."));return l};y("X.shaders",Ae);y("X.shaders.attributes",Be);
y("X.shaders.uniforms",Ce);y("X.shaders.prototype.vertex",Ae.prototype.Ng);y("X.shaders.prototype.fragment",Ae.prototype.Of);y("X.shaders.prototype.validate",Ae.prototype.mf);A||Na&&C("1.9.3");var De=ba.window;function Ee(a,b,c){ia(a)?c&&(a=pa(a,c)):a&&"function"==typeof a.handleEvent?a=pa(a.handleEvent,a):g(Error("Invalid listener argument"));return 2147483647<b?-1:De.setTimeout(a,b||0)};function Fe(a,b){this.$=new me(this);this.vd(a||m);b&&this.kb(b)}z(Fe,Gc);u=Fe.prototype;u.e=m;u.Df=l;u.Yd=m;u.I=p;u.Eg=p;u.hd=-1;u.we=-1;u.Tf=p;u.Nf=l;u.lb="toggle_display";u.kb=aa("lb");u.d=q("e");u.vd=function(a){this.I&&g(Error("Can not change this state of the popup while showing."));this.e=a};
u.aa=function(a){this.Vb&&this.Vb.stop();this.Nb&&this.Nb.stop();if(a){if(!this.I&&this.pd()){this.e||g(Error("Caller must call setElement before trying to show the popup"));this.ha();a=Jd(this.e);this.Tf&&oe(this.$,a,"keydown",this.hg,l);if(this.Df)if(oe(this.$,a,"mousedown",this.Fe,l),A){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(f){break}a=d;b=a.activeElement}oe(this.$,a,"mousedown",this.Fe,l);oe(this.$,a,"deactivate",
this.Ee)}else oe(this.$,a,"blur",this.Ee);"toggle_display"==this.lb?(this.e.style.visibility="visible",ie(this.e,l)):"move_offscreen"==this.lb&&this.ha();this.I=l;this.Vb?(bc(this.Vb,"end",this.Qe,p,this),this.Vb.play()):this.Qe()}}else Ge(this)};u.ha=ca;function Ge(a,b){if(!a.I||!a.dispatchEvent({type:"beforehide",target:b}))return p;a.$&&a.$.vc();a.Nb?(bc(a.Nb,"end",qa(a.ae,b),p,a),a.Nb.play()):a.ae(b);return l}
u.ae=function(a){if("toggle_display"==this.lb)this.Eg?Ee(this.re,0,this):this.re();else if("move_offscreen"==this.lb)this.e.style.left="-200px",this.e.style.top="-200px";this.I=p;this.qd(a)};u.re=function(){this.e.style.visibility="hidden";ie(this.e,p)};u.pd=function(){return this.dispatchEvent("beforeshow")};u.Qe=function(){this.hd=ra();this.we=-1;this.dispatchEvent("show")};u.qd=function(a){this.we=ra();this.dispatchEvent({type:"hide",target:a})};
u.Fe=function(a){a=a.target;!Td(this.e,a)&&(!this.Yd||Td(this.Yd,a))&&!(150>ra()-this.hd)&&Ge(this,a)};u.hg=function(a){27==a.keyCode&&Ge(this,a.target)&&(a.preventDefault(),a.stopPropagation())};u.Ee=function(a){if(this.Nf){var b=Jd(this.e);if(A||Ma){if(a=b.activeElement,!a||Td(this.e,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>ra()-this.hd||Ge(this)}};u.p=function(){Fe.z.p.call(this);this.$.X();Gb(this.Vb);Gb(this.Nb);delete this.e;delete this.$};function He(a){this.Y=a||Hd();D.call(this)}z(He,D);u=He.prototype;u.Gf="goog-buttonset";u.ee=m;u.e=m;u.Ff=m;u.set=function(a,b,c,d){D.prototype.set.call(this,a,b);if(c)this.ee=a;if(d)this.Ff=a;return this};function Ie(a,b,c,d){return a.set(b.key,b.caption,c,d)}u.ib=function(){if(this.e){this.e.innerHTML="";var a=Hd(this.e);sb(this,function(b,c){var d=a.Oa("button",{name:c},b);if(c==this.ee)d.className=this.Gf+"-default";this.e.appendChild(d)},this)}};u.d=q("e");u.Ib=q("Y");
var Je={key:"ok",caption:"OK"},Ke={key:"cancel",caption:"Cancel"},Le={key:"yes",caption:"Yes"},Me={key:"no",caption:"No"},Ne={key:"save",caption:"Save"},Oe={key:"continue",caption:"Continue"};"undefined"!=typeof document&&(Ie(new He,Je,l,l),Ie(Ie(new He,Je,l),Ke,p,l),Ie(Ie(new He,Le,l),Me,p,l),Ie(Ie(Ie(new He,Le),Me,l),Ke,p,l),Ie(Ie(Ie(new He,Oe),Ne),Ke,l,l));function Pe(a){this.Na=a||Qe}function Qe(a,b){return""+a<""+b?-1:""+a>""+b?1:0}u=Pe.prototype;u.K=m;u.Na=m;u.pa=m;u.oa=m;u.g=0;
u.add=function(a){if(this.K==m)return this.oa=this.pa=this.K=new Re(a),this.g=1,l;var b=p;Se(this,function(c){var d=m;if(0<this.Na(c.value,a)){if(d=c.left,c.left==m){var f=new Re(a,c);c.left=f;if(c==this.pa)this.pa=f;b=l;Te(this,c)}}else if(0>this.Na(c.value,a)&&(d=c.right,c.right==m)){f=new Re(a,c);c.right=f;if(c==this.oa)this.oa=f;b=l;Te(this,c)}return d});b&&(this.g+=1);return b};
u.remove=function(a){var b=m;Se(this,function(c){var d=m;if(0<this.Na(c.value,a))d=c.left;else if(0>this.Na(c.value,a))d=c.right;else if(b=c.value,c.left!=m||c.right!=m){var f=m,e;if(c.left!=m){e=Ue(this,c.left);if(e!=c.left){if(e.parent.right=e.left)e.left.parent=e.parent;e.left=c.left;e.left.parent=e;f=e.parent}e.parent=c.parent;e.right=c.right;if(e.right)e.right.parent=e;if(c==this.oa)this.oa=e}else{e=Ve(this,c.right);if(e!=c.right){if(e.parent.left=e.right)e.right.parent=e.parent;e.right=c.right;
e.right.parent=e;f=e.parent}e.parent=c.parent;e.left=c.left;if(e.left)e.left.parent=e;if(c==this.pa)this.pa=e}We(c)?c.parent.left=e:Xe(c)?c.parent.right=e:this.K=e;Te(this,f?f:e)}else if(We(c)){this.Ah=1;c.parent.left=m;if(c==this.pa)this.pa=c.parent;Te(this,c.parent)}else if(Xe(c)){c.parent.right=m;if(c==this.oa)this.oa=c.parent;Te(this,c.parent)}else this.clear();return d});if(b)this.g=this.K?this.g-1:0;return b};u.clear=function(){this.oa=this.pa=this.K=m;this.g=0};
u.contains=function(a){var b=p;Se(this,function(c){var d=m;0<this.Na(c.value,a)?d=c.left:0>this.Na(c.value,a)?d=c.right:b=l;return d});return b};u.ea=q("g");u.Lb=function(){return Ve(this).value};u.Kb=function(){return Ue(this).value};u.Z=function(){var a=[];Ye(this,function(b){a.push(b)});return a};
function Ye(a,b){if(a.K){var c,d=c=Ve(a);for(c=c.left?c.left:c;d!=m;)if(d.left!=m&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var f=d,d=d.right!=m&&d.right!=c?d.right:d.parent;c=f}}}function Se(a,b,c){for(c=c?c:a.K;c&&c!=m;)c=b.call(a,c)}
function Te(a,b){Se(a,function(a){var b=a.left?a.left.height:0,f=a.right?a.right.height:0;1<b-f?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Ze(this,a.left),$e(this,a)):1<f-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&$e(this,a.right),Ze(this,a));b=a.left?a.left.height:0;f=a.right?a.right.height:0;a.height=Math.max(b,f)+1;return a.parent},b)}
function Ze(a,b){We(b)?(b.parent.left=b.right,b.right.parent=b.parent):Xe(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.K=b.right,a.K.parent=m);var c=b.right;b.right=b.right.left;if(b.right!=m)b.right.parent=b;c.left=b;b.parent=c}function $e(a,b){We(b)?(b.parent.left=b.left,b.left.parent=b.parent):Xe(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.K=b.left,a.K.parent=m);var c=b.left;b.left=b.left.right;if(b.left!=m)b.left.parent=b;c.right=b;b.parent=c}
function Ve(a,b){if(!b)return a.pa;var c=b;Se(a,function(a){var b=m;if(a.left)b=c=a.left;return b},b);return c}function Ue(a,b){if(!b)return a.oa;var c=b;Se(a,function(a){var b=m;if(a.right)b=c=a.right;return b},b);return c}function Re(a,b){this.value=a;this.parent=b?b:m}Re.prototype.left=m;Re.prototype.right=m;Re.prototype.height=1;function Xe(a){return!!a.parent&&a.parent.right==a}function We(a){return!!a.parent&&a.parent.left==a};function af(a,b,c){v(a)||g(Error("Invalid GL Buffer."));v(b)||g(Error("Invalid number of items."));v(c)||g(Error("Invalid item size."));L.call(this);this._className="buffer";this.H=a;this.Fc=b;this.La=c}z(af,L);af.prototype.Qf=q("H");af.prototype.Zf=q("Fc");af.prototype.$f=q("La");y("X.buffer",af);y("X.buffer.prototype.glBuffer",af.prototype.Qf);y("X.buffer.prototype.itemCount",af.prototype.Zf);y("X.buffer.prototype.itemSize",af.prototype.$f);function bf(a,b,c,d,f,e,h,j){var k,n=c.offsetParent;if(n){var t="HTML"==n.tagName||"BODY"==n.tagName;if(!t||"static"!=Yd(n,"position"))k=ce(n),t||(k=$c(k,new T(n.scrollLeft,n.scrollTop)))}n=ce(a);t=ge(a);n=new Dd(n.x,n.y,t.width,t.height);(t=be(a))&&n.ue(new Dd(t.left,t.top,t.right-t.left,t.bottom-t.top));var t=Hd(a),r=Hd(c);if(t.q!=r.q){var o=t.q.body,r=r.q.parentWindow||r.q.defaultView,s=new T(0,0),F=Jd(o)?Jd(o).parentWindow||Jd(o).defaultView:window,G=o;do{var Q;if(F==r)Q=ce(G);else{var J=G;Q=
new T;if(1==J.nodeType)if(J.getBoundingClientRect)J=$d(J),Q.x=J.left,Q.y=J.top;else{var ea=Vd(Hd(J)),J=ce(J);Q.x=J.x-ea.x;Q.y=J.y-ea.y}else{var ea=ia(J.Pf),Y=J;J.targetTouches?Y=J.targetTouches[0]:ea&&J.da.targetTouches&&(Y=J.da.targetTouches[0]);Q.x=Y.clientX;Q.y=Y.clientY}}s.x+=Q.x;s.y+=Q.y}while(F&&F!=r&&(G=F.frameElement)&&(F=F.parent));o=$c(s,ce(o));A&&!Ud(t)&&(o=$c(o,Vd(t)));n.left+=o.x;n.top+=o.y}a=(b&4&&de(a)?b^2:b)&-5;b=new T(a&2?n.left+n.width:n.left,a&1?n.top+n.height:n.top);k&&(b=$c(b,
k));f&&(b.x+=(a&2?-1:1)*f.x,b.y+=(a&1?-1:1)*f.y);var M;if(h&&(M=be(c))&&k)M.top-=k.y,M.right-=k.x,M.bottom-=k.y,M.left-=k.x;return cf(b,c,d,e,M,h,j)}
function cf(a,b,c,d,f,e,h){var a=a.c(),j=0,k=(c&4&&de(b)?c^2:c)&-5,c=ge(b),h=h?h.c():c.c();if(d||0!=k)k&2?a.x-=h.width+(d?d.right:0):d&&(a.x+=d.left),k&1?a.y-=h.height+(d?d.bottom:0):d&&(a.y+=d.top);if(e){if(f){j=a;d=0;if(65==(e&65)&&(j.x<f.left||j.x>=f.right))e&=-2;if(132==(e&132)&&(j.y<f.top||j.y>=f.bottom))e&=-5;if(j.x<f.left&&e&1)j.x=f.left,d|=1;if(j.x<f.left&&j.x+h.width>f.right&&e&16)h.width=Math.max(h.width-(j.x+h.width-f.right),0),d|=4;if(j.x+h.width>f.right&&e&1)j.x=Math.max(f.right-h.width,
f.left),d|=1;e&2&&(d|=(j.x<f.left?16:0)|(j.x+h.width>f.right?32:0));if(j.y<f.top&&e&4)j.y=f.top,d|=2;if(j.y>=f.top&&j.y+h.height>f.bottom&&e&32)h.height=Math.max(h.height-(j.y+h.height-f.bottom),0),d|=8;if(j.y+h.height>f.bottom&&e&4)j.y=Math.max(f.bottom-h.height,f.top),d|=2;e&8&&(d|=(j.y<f.top?64:0)|(j.y+h.height>f.bottom?128:0));j=d}else j=256;if(j&496)return j}e=a;f=Na&&(Ga||Ra)&&C("1.9");e instanceof T?(a=e.x,e=e.y):(a=e,e=i);b.style.left=fe(a,f);b.style.top=fe(e,f);if(!bd(c,h))a=Ud(Hd(Jd(b))),
A&&(!a||!C("8"))?(c=b.style,a?(A?(a=je(b,Xd(b,"paddingLeft")),f=je(b,Xd(b,"paddingRight")),e=je(b,Xd(b,"paddingTop")),d=je(b,Xd(b,"paddingBottom")),a=new Cd(e,f,d,a)):(a=Wd(b,"paddingLeft"),f=Wd(b,"paddingRight"),e=Wd(b,"paddingTop"),d=Wd(b,"paddingBottom"),a=new Cd(parseFloat(e),parseFloat(f),parseFloat(d),parseFloat(a))),A?(f=le(b,"borderLeft"),e=le(b,"borderRight"),d=le(b,"borderTop"),b=le(b,"borderBottom"),b=new Cd(d,e,b,f)):(f=Wd(b,"borderLeftWidth"),e=Wd(b,"borderRightWidth"),d=Wd(b,"borderTopWidth"),
b=Wd(b,"borderBottomWidth"),b=new Cd(parseFloat(d),parseFloat(e),parseFloat(b),parseFloat(f))),c.pixelWidth=h.width-b.left-a.left-a.right-b.right,c.pixelHeight=h.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=h.width,c.pixelHeight=h.height)):(b=b.style,Na?b.MozBoxSizing="border-box":B?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(h.width,0)+"px",b.height=Math.max(h.height,0)+"px");return j};function df(){}df.prototype.ha=function(){};function ef(a,b){this.element=a;this.be=b}z(ef,df);ef.prototype.ha=function(a,b,c){bf(this.element,this.be,a,b,i,c)};function ff(a,b){this.Yc=a instanceof T?a:new T(a,b)}z(ff,df);ff.prototype.ha=function(a,b,c,d){bf(Zd(a),0,a,b,this.Yc,c,m,d)};function gf(a,b){this.mg=4;this.ud=b||i;Fe.call(this,a)}z(gf,Fe);gf.prototype.yc=function(a){this.ud=a||i;this.I&&this.ha()};gf.prototype.ha=function(){if(this.ud){var a=!this.I&&"move_offscreen"!=this.lb,b=this.d();if(a)b.style.visibility="hidden",ie(b,l);this.ud.ha(b,this.mg,this.xh);a&&ie(b,p)}};function hf(a,b,c){this.Y=c||(a?Hd(Kd(a)):Hd());gf.call(this,this.Y.Oa("div",{style:"position:absolute;display:none;"}));this.Zc=new T(1,1);this.Qa=new Bb;a&&jf(this,a);if(b!=m)if(a=this.d(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(Jd(a).createTextNode(b))}}z(hf,gf);var kf=[];u=hf.prototype;u.D=m;u.className="goog-tooltip";
u.bf=500;u.Sf=0;u.Ib=q("Y");function jf(a,b){b=Kd(b);a.Qa.add(b);E(b,"mouseover",a.oe,p,a);E(b,"mouseout",a.oc,p,a);E(b,"mousemove",a.ne,p,a);E(b,"focus",a.me,p,a);E(b,"blur",a.oc,p,a)}u.detach=function(a){if(a)a=Kd(a),lf(this,a),this.Qa.remove(a);else{for(var b=this.Qa.Z(),c=0;a=b[c];c++)lf(this,a);this.Qa.clear()}};function lf(a,b){cc(b,"mouseover",a.oe,p,a);cc(b,"mouseout",a.oc,p,a);cc(b,"mousemove",a.ne,p,a);cc(b,"focus",a.me,p,a);cc(b,"blur",a.oc,p,a)}
u.vd=function(a){var b=this.d();b&&Rd(b);hf.z.vd.call(this,a);if(a)b=this.Y.q.body,b.insertBefore(a,b.lastChild)};u.pd=function(){if(!Fe.prototype.pd.call(this))return p;if(this.anchor)for(var a,b=0;a=kf[b];b++)Td(a.d(),this.anchor)||a.aa(p);0<=hb(kf,this)||kf.push(this);a=this.d();a.className=this.className;mf(this);E(a,"mouseover",this.qe,p,this);E(a,"mouseout",this.pe,p,this);nf(this);return l};
u.qd=function(){lb(kf,this);for(var a=this.d(),b,c=0;b=kf[c];c++)b.anchor&&Td(a,b.anchor)&&b.aa(p);this.Ue&&of(this.Ue);cc(a,"mouseover",this.qe,p,this);cc(a,"mouseout",this.pe,p,this);this.anchor=i;if(0==(this.qa?this.I?4:1:this.cb?3:this.I?2:0))this.xc=p;Fe.prototype.qd.call(this)};u.Ce=function(a,b){if(this.anchor==a&&this.Qa.contains(this.anchor))if(this.xc||!this.yh){if(this.aa(p),!this.I)this.anchor=a,this.yc(b||pf(this,0)),this.aa(l)}else this.anchor=i;this.qa=i};
u.dg=function(a){this.cb=i;a==this.anchor&&(this.D==m||this.D!=this.d()&&!this.Qa.contains(this.D))&&(!this.Zd||!this.Zd.D)&&this.aa(p)};function qf(a,b){var c=Vd(a.Y);a.Zc.x=b.clientX+c.x;a.Zc.y=b.clientY+c.y}u.oe=function(a){var b=rf(this,a.target);this.D=b;mf(this);if(b!=this.anchor){this.anchor=b;if(!this.qa)this.qa=Ee(pa(this.Ce,this,b,i),this.bf);sf(this);qf(this,a)}};function rf(a,b){try{for(;b&&!a.Qa.contains(b);)b=b.parentNode;return b}catch(c){return m}}
u.ne=function(a){qf(this,a);this.xc=l};u.me=function(a){this.D=a=rf(this,a.target);this.xc=l;if(this.anchor!=a){this.anchor=a;var b=pf(this,1);mf(this);if(!this.qa)this.qa=Ee(pa(this.Ce,this,a,b),this.bf);sf(this)}};function pf(a,b){if(0==b){var c=a.Zc.c();return new tf(c)}return new uf(a.D)}function sf(a){if(a.anchor)for(var b,c=0;b=kf[c];c++)if(Td(b.d(),a.anchor))b.Zd=a,a.Ue=b}
u.oc=function(a){var b=rf(this,a.target),c=rf(this,a.relatedTarget);if(b!=c){if(b==this.D)this.D=m;nf(this);this.xc=p;this.I&&(!a.relatedTarget||!Td(this.d(),a.relatedTarget))?of(this):this.anchor=i}};u.qe=function(){var a=this.d();if(this.D!=a)mf(this),this.D=a};u.pe=function(a){var b=this.d();if(this.D==b&&(!a.relatedTarget||!Td(b,a.relatedTarget)))this.D=m,of(this)};function nf(a){if(a.qa)De.clearTimeout(a.qa),a.qa=i}
function of(a){if(2==(a.qa?a.I?4:1:a.cb?3:a.I?2:0))a.cb=Ee(pa(a.dg,a,a.anchor),a.Sf)}function mf(a){if(a.cb)De.clearTimeout(a.cb),a.cb=i}u.p=function(){this.aa(p);nf(this);this.detach();this.d()&&Rd(this.d());this.D=m;delete this.Y;hf.z.p.call(this)};function tf(a,b){ff.call(this,a,b)}z(tf,ff);tf.prototype.ha=function(a,b,c){b=Zd(a);b=be(b);c=c?new Cd(c.top+10,c.right,c.bottom,c.left+10):new Cd(10,0,0,10);cf(this.Yc,a,4,c,b,9)&496&&cf(this.Yc,a,4,c,b,5)};function uf(a){ef.call(this,a,3)}z(uf,ef);
uf.prototype.ha=function(a,b,c){var d=new T(10,0);bf(this.element,this.be,a,b,d,c,9)&496&&bf(this.element,2,a,1,d,c,5)};function vf(a){this.e=a;this.xe=E(this.e,Na?"DOMMouseScroll":"mousewheel",this)}z(vf,Gc);
vf.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.da;if("mousewheel"==a.type){c=1;if(A||B&&(Ha||C("532.0")))c=40;d=B&&Ga&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;fa(a.wheelDeltaX)?(b=B&&Ga&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=B&&Ga&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),fa(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;x(this.Ae)&&(b=Math.min(Math.max(b,-this.Ae),this.Ae));x(this.Be)&&(c=Math.min(Math.max(c,
-this.Be),this.Be));b=new wf(d,a,b,c);try{this.dispatchEvent(b)}finally{b.X()}};vf.prototype.p=function(){vf.z.p.call(this);dc(this.xe);delete this.xe};function wf(a,b,c,d){b&&this.fa(b,i);this.type="mousewheel";this.detail=a;this.wh=c;this.$c=d}z(wf,Vb);A||B&&C("525");function W(a){(!v(a)||!(a instanceof Element))&&g(Error("Could not add interactor to the given element."));L.call(this);this._className="interactor";this.Xa=a;this.Lc=this.Md=this.Ld=this.Nd=this.Kd=this.Od=m;this.Kc=l;this.zb=this.ub=this.Za=p;this.Gc=new vc(0,0)}z(W,L);u=W.prototype;u.k={Gd:l,Fd:l,Yb:l,Ed:l,Dd:p};
u.fa=function(){this.k.Gd?(this.Lc=new vf(this.Xa),this.Od=E(this.Lc,"mousewheel",this.Me.bind(this))):(dc(this.Od),this.Lc=m);this.k.Fd?(this.Kd=E(this.Xa,"mousedown",this.Ie.bind(this)),this.Nd=E(this.Xa,"mouseup",this.Le.bind(this))):(dc(this.Kd),dc(this.Nd));this.Xa.oncontextmenu=this.k.Dd?m:function(){return p};window.onkeydown=this.k.Yb?this.rd.bind(this):m;dc(this.Ld);dc(this.Md);this.Ld=E(this.Xa,"mousemove",this.Je.bind(this));this.Md=E(this.Xa,"mouseout",this.Ke.bind(this))};
u.Ie=function(a){if(0==a.button)this.Za=l;else if(1==a.button)this.ub=l;else if(2==a.button)this.zb=l;xf(this);a.preventDefault()};u.Le=function(a){if(0==a.button)this.Za=p;else if(1==a.button)this.ub=p;else if(2==a.button)this.zb=p;xf(this);a.preventDefault()};u.Ke=function(a){this.Kc=p;if(this.k.Yb)window.onkeydown=m;this.zb=this.ub=this.Za=p;xf(this);this.Gc=new vc(0,0);a.preventDefault()};
u.Je=function(a){this.dispatchEvent("mouseup");this.Kc=l;if(this.k.Yb&&window.onkeydown==m)window.onkeydown=this.rd.bind(this);a.preventDefault();var b=a.shiftKey,c=new vc(a.offsetX,a.offsetY),a=this.Gc.ia(c);this.Gc=c.c();if(this.k.Ed)(0<Math.abs(a.x)||0<Math.abs(a.y)||this.ub||this.Za||this.zb)&&xf(this),this.Ec=setTimeout(function(){xf(this);var a=new zc;a.gc=c.x;a.hc=c.y;this.dispatchEvent(a);this.Ec=m}.bind(this),300);if(2>Math.abs(a.x))a.x=0;if(2>Math.abs(a.y))a.y=0;if(0!=a.rc())if(this.Za&&
!b)b=new wc,b.Wa=a,b.sf=0,this.dispatchEvent(b);else if(this.ub||this.Za&&b){b=new uc;if(5<a.x)a.x=5;else if(-5>a.x)a.x=-5;if(5<a.y)a.y=5;else if(-5>a.y)a.y=-5;b.Wa=a;this.dispatchEvent(b)}else if(this.zb)b=new xc,b.Ka=0<a.y,b.ua=p,this.dispatchEvent(b)};function xf(a){a.Ec&&clearTimeout(a.Ec);a.dispatchEvent(new Ac)}u.Me=function(a){xf(this);a.preventDefault();var b=new xc;if(!v(a.$c))a.$c=0;b.Ka=0>a.$c;b.ua=l;this.dispatchEvent(b)};
u.rd=function(a){if(this.Kc){xf(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,f=a.shiftKey,e=a.keyCode;if(82==e&&!b&&!c&&!d&&!f)a.preventDefault(),a=new Bc,this.dispatchEvent(a);else if(37<=e&&40>=e&&(a.preventDefault(),a=f?new uc:b?new xc:new wc)){c=new vc(0,0);if(37==e){if(c.x=5,b)a.Ka=l,a.ua=p}else if(39==e){if(c.x=-5,b)a.Ka=p,a.ua=p}else if(38==e){if(c.y=5,b)a.Ka=l,a.ua=l}else if(40==e&&(c.y=-5,b))a.Ka=p,a.ua=l;a.Wa=c;this.dispatchEvent(a)}}};y("X.interactor",W);
y("X.interactor.prototype.config",W.prototype.k);y("X.interactor.prototype.config.MOUSEWHEEL_ENABLED",W.prototype.k.Gd);y("X.interactor.prototype.config.MOUSECLICKS_ENABLED",W.prototype.k.Fd);y("X.interactor.prototype.config.KEYBOARD_ENABLED",W.prototype.k.Yb);y("X.interactor.prototype.config.HOVERING_ENABLED",W.prototype.k.Ed);y("X.interactor.prototype.config.CONTEXTMENU_ENABLED",W.prototype.k.Dd);y("X.interactor.prototype.init",W.prototype.fa);y("X.interactor.prototype.onMouseDown",W.prototype.Ie);
y("X.interactor.prototype.onMouseUp",W.prototype.Le);y("X.interactor.prototype.onMouseMovementOutside",W.prototype.Ke);y("X.interactor.prototype.onMouseMovementInside",W.prototype.Je);y("X.interactor.prototype.onMouseWheel",W.prototype.Me);y("X.interactor.prototype.onKey",W.prototype.rd);function yf(a,b,c,d){v(a)||g(Error("No valid parent element."));(!x(b)||!x(c))&&g(Error("Invalid coordinates."));(!v(d)||!(d instanceof W))&&g(Error("Invalid interactor."));hf.call(this);this._className="caption";this.Da=a;this.gc=b;this.hc=c;this.cc=d;this.la=m;this.Ja=[];this.Ja=[".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n  border: 1px solid infotext;\n  padding: 1px;\n  font-family: sans-serif;\n}"];bc(d,sc,this.Ob.bind(this));this.gd()}z(yf,hf);
yf.prototype.gd=function(){this.Da.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Nd("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Ja[0]);a.appendChild(b);b.appendChild(c);this.la=b;this.yc(new ff(this.gc,this.hc));this.aa(l);jf(this,this.Da);this.d().classList.add("x-tooltip")};yf.prototype.Ob=function(){this.aa(p);this.la&&Rd(this.la);this.d()&&Rd(this.d());this.la=m};y("X.caption",yf);y("X.caption.prototype.kill",yf.prototype.Ob);function Z(a,b){(!x(a)||!x(b))&&g(Error("A camera needs valid width and height values."));L.call(this);this._className="camera";this.uf=45;this.dc=new K(0,0,100);this.bc=new K(0,0,0);this.Sc=new K(0,1,0);var c=Float32Array,d;d=a/b;var f=1*Math.tan(this.uf*Math.PI/360),e=-f;d=new V([[2/(f*d-e*d),0,(f*d+e*d)/(f*d-e*d),0],[0,2/(f-e),(f+e)/(f-e),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]]);this.Qd=new c(d.v());this.l=zf(this,this.dc,this.bc);this.Ya=new Float32Array(this.l.v())}z(Z,L);u=Z.prototype;
u.od=function(a){(!v(a)||!(a instanceof W))&&g(Error("Could not observe the interactor."));E(a,kc,this.Ne.bind(this));E(a,lc,this.Pe.bind(this));E(a,mc,this.Re.bind(this))};u.Re=function(a){a instanceof xc||g(Error("Received no valid zoom event."));a.Ka?this.nf(a.ua):this.of(a.ua)};u.Ne=function(a){a instanceof uc||g(Error("Received no valid pan event."));this.Te(a.Wa)};u.Pe=function(a){a instanceof wc||g(Error("Received no valid rotate event."));this.rotate(a.Wa)};u.jg=q("Qd");u.view=q("l");
u.position=q("dc");u.yc=function(a,b,c){(!x(a)||!x(b)||!x(c))&&g(Error("The position was invalid."));this.dc=new K(a,b,c);this.reset()};u.reset=function(){this.l=zf(this,this.dc,this.bc);this.Ya=new Float32Array(this.l.v())};u.focus=q("bc");u.vg=function(a,b,c){(!x(a)||!x(b)||!x(c))&&g(Error("The focus was invalid."));this.bc=new K(a,b,c);this.reset()};u.Mg=q("Sc");u.Cg=function(a,b,c){(!x(a)||!x(b)||!x(c))&&g(Error("The up-vector was invalid."));this.Sc=new K(a,b,c);this.reset()};
u.Te=function(a){a instanceof vc||g(Error("Invalid distance vector for pan operation."));a=new K(-a.x,a.y,0);a=kd(4).translate(a);this.l=new V(a.multiply(this.l));this.Ya=new Float32Array(this.l.v());this.dispatchEvent(new yc)};
u.rotate=function(a){a instanceof Array&&2==a.length?a=new vc(a[0],a[1]):a instanceof vc||g(Error("Invalid distance vector for rotate operation."));var b=-a.x/5*Math.PI/180,a=-a.y/5*Math.PI/180,c=kd(4),d=new K(parseFloat(hd(this.l,0,0)),parseFloat(hd(this.l,0,1)),parseFloat(hd(this.l,0,2))),b=c.rotate(b,new K(parseFloat(hd(this.l,1,0)),parseFloat(hd(this.l,1,1)),parseFloat(hd(this.l,1,2)))),a=c.rotate(a,d);this.l=new V(this.l.multiply(a.multiply(b)));this.Ya=new Float32Array(this.l.v());this.dispatchEvent(new yc)};
u.nf=function(a){var b=20;v(a)&&!a&&(b=1);a=new K(0,0,b);a=kd(4).translate(a);this.l=new V(a.multiply(this.l));this.Ya=new Float32Array(this.l.v());this.dispatchEvent(new yc)};u.of=function(a){var b=30;v(a)&&!a&&(b=1);a=new K(0,0,-b);a=kd(4).translate(a);this.l=new V(a.multiply(this.l));this.Ya=new Float32Array(this.l.v());this.dispatchEvent(new yc)};
function zf(a,b,c){(!(b instanceof K)||!(c instanceof K))&&g(Error("3D vectors required for calculating the view."));var d=kd(4),c=new K(b.x-c.x,b.y-c.y,b.b-c.b),c=c.normalize(),a=a.Sc.c();a.Eb(c)&&(a.b+=1.0E-6);var f=Fc(a,c),a=Fc(c,f),f=f.normalize(),a=a.normalize();U(d,0,0,f.x);U(d,0,1,f.y);U(d,0,2,f.b);U(d,0,3,0);U(d,1,0,a.x);U(d,1,1,a.y);U(d,1,2,a.b);U(d,1,3,0);U(d,2,0,c.x);U(d,2,1,c.y);U(d,2,2,c.b);U(d,2,3,0);U(d,3,0,0);U(d,3,1,0);U(d,3,2,0);U(d,3,3,1);b=b.c();return d.translate(b.F())}
y("X.camera",Z);y("X.camera.prototype.observe",Z.prototype.od);y("X.camera.prototype.onZoom",Z.prototype.Re);y("X.camera.prototype.onPan",Z.prototype.Ne);y("X.camera.prototype.onRotate",Z.prototype.Pe);y("X.camera.prototype.perspective",Z.prototype.jg);y("X.camera.prototype.view",Z.prototype.view);y("X.camera.prototype.position",Z.prototype.position);y("X.camera.prototype.setPosition",Z.prototype.yc);y("X.camera.prototype.focus",Z.prototype.focus);y("X.camera.prototype.setFocus",Z.prototype.vg);
y("X.camera.prototype.up",Z.prototype.Mg);y("X.camera.prototype.setUp",Z.prototype.Cg);y("X.camera.prototype.pan",Z.prototype.Te);y("X.camera.prototype.rotate",Z.prototype.rotate);y("X.camera.prototype.zoomIn",Z.prototype.nf);y("X.camera.prototype.zoomOut",Z.prototype.of);y("X.camera.prototype.observe",Z.prototype.od);function $(a){v(a)||g(Error("An ID to a valid container (<div>..) is required."));a=Kd(a);(!(ja(a)&&1==a.nodeType)||0==a.clientWidth||0==a.clientHeight)&&g(Error("Could not find the given container or it has an undefined size."));L.call(this);this._className="renderer";this.Va=a;this.Cf=this.Va.clientWidth;this.Id=this.Va.clientHeight;this.cc=this.S=this.Pc=this.yf=this.a=this.ta=m;this.$a=new Pe(vd);this.Bf=[];this.tb=this.xb=this.sb=this.wb=this.rb=this.vb=m;this.Ia=[0,0,0];this.Rd=m;this.sa=new D;
this.B=new D;this.Ab=new D;this.Mc=new D;this.$b=new D;this.fc=new D;this.Ud=new D;this.ca=this.Hc=m;this.Ic=p;window.console.log("XTK Release 2 -- 2/12/12 -- http://www.goXTK.com")}z($,L);u=$.prototype;u.k={Dc:l,Cc:l,Hd:l};u.width=q("Cf");u.height=q("Id");u.canvas=function(){if(!v(this.ta))this.ta=Nd("canvas");return this.ta};u.Jf=q("Va");u.Ef=q("S");u.Xf=q("cc");u.na=function(){if(!v(this.Hc))this.Hc=new yd,E(this.na(),qc,this.Oe.bind(this));return this.Hc};
u.Oe=function(a){this.ca&&this.ca.zc(100*a.Wd)};u.He=function(a){v(a)&&a instanceof Cc&&Af(this,a.Ma)};u.Ge=function(a){if(v(a)&&a instanceof zc){var b=a.gc,c=a.hc;if((a=this.get(this.Ve(b,c)))&&a.caption())b=new yf(this.Va,b+10,c+10,this.cc),a=a.caption(),b.d().innerHTML=a}};u.og=function(){this.tb=this.xb=this.sb=this.wb=this.rb=this.vb=m;this.Ia=[0,0,0]};function Bf(a){if(a.k.Dc&&a.ca&&!a.Td)a.ca.ie(),a.Td=Ee(function(){this.Td=m;if(this.ca)this.ca.Ob(),this.ca=m;this.ib()}.bind(a),700)}
u.Ye=function(){this.S.reset();this.jb(p)};
u.fa=function(){var a=this.canvas();a.width=this.width();a.height=this.height();this.Va.appendChild(a);try{var b=a.getContext("experimental-webgl");b||g(Error())}catch(c){alert("WebGL not supported! See http://wiki.goXTK.com/index.php/X:Browsers for instructions.."),g(Error("WebGL not supported! See http://wiki.goXTK.com/index.php/X:Browsers for instructions.."))}try{if(b.clearColor(0,0,0,0),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),b.enable(b.DEPTH_TEST),
b.depthFunc(b.LEQUAL),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),this.k.Cc){var d=b.createFramebuffer(),f=b.createRenderbuffer(),e=b.createTexture();b.bindTexture(b.TEXTURE_2D,e);b.texImage2D(b.TEXTURE_2D,0,b.RGB,this.width(),this.height(),0,b.RGB,b.UNSIGNED_BYTE,m);b.bindFramebuffer(b.FRAMEBUFFER,d);b.bindRenderbuffer(b.RENDERBUFFER,f);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,this.width(),this.height());b.bindRenderbuffer(b.RENDERBUFFER,m);b.framebufferTexture2D(b.FRAMEBUFFER,
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,e,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,f);b.bindFramebuffer(b.FRAMEBUFFER,m);this.Rd=d}}catch(h){g(Error("Exception while accessing GL Context!\n"+h))}d=new W(a);d.fa();E(d,oc,this.Ye.bind(this));E(d,rc,this.Ge.bind(this));f=new Z(this.width(),this.height());f.od(d);E(f,nc,this.jb.bind(this,p));this.ta=a;this.a=b;this.S=f;this.cc=d;this.Xd(new Ae)};
u.Xd=function(a){(!v(this.ta)||!v(this.a)||!v(this.S))&&g(Error("Renderer was not initialized properly."));(!v(a)||!(a instanceof Ae))&&g(Error("Could not add shaders."));a.mf();var b=this.a.createShader(this.a.FRAGMENT_SHADER),c=this.a.createShader(this.a.VERTEX_SHADER);this.a.shaderSource(b,a.pb);this.a.shaderSource(c,a.Bb);this.a.compileShader(b);this.a.compileShader(c);this.a.getShaderParameter(b,this.a.COMPILE_STATUS)||g(Error("Fragement Shader compilation failed!\n"+this.a.getShaderInfoLog(b)));
this.a.getShaderParameter(c,this.a.COMPILE_STATUS)||g(Error("Vertex Shader compilation failed!\n"+this.a.getShaderInfoLog(c)));var d=this.a.createProgram();this.a.attachShader(d,c);this.a.attachShader(d,b);this.a.linkProgram(d);this.a.getProgramParameter(d,this.a.LINK_STATUS)||g(Error("Could not create shader program!\n"+this.a.getShaderInfoLog(b)+"\n"+this.a.getShaderInfoLog(c)+"\n"+this.a.getProgramInfoLog(d)));this.a.useProgram(d);this.Pc=d;Object.keys(Be).forEach(function(a){a=eval("X.shaders.attributes."+
a);this.sa.set(a,this.a.getAttribLocation(this.Pc,a));this.a.enableVertexAttribArray(this.sa.get(a))}.bind(this));Object.keys(Ce).forEach(function(a){a=eval("X.shaders.uniforms."+a);this.B.set(a,this.a.getUniformLocation(this.Pc,a))}.bind(this));this.yf=a};
u.add=function(a){this.Bf.push(a);(!v(this.ta)||!v(this.a)||!v(this.S))&&g(Error("Renderer was not initialized properly."));(!v(a)||!(a instanceof I))&&g(Error("Illegal object."));if(a.Mb())for(var b=a.children(),c=b.length,d=0,d=0;d<c;d++)this.add(b[d]);E(a,pc,this.He.bind(this));Af(this,a)};
function Af(a,b){(!v(a.ta)||!v(a.a)||!v(a.S))&&g(Error("Renderer was not initialized properly."));(!v(b)||!(b instanceof I))&&g(Error("Illegal object."));var c=p;a.get(b.id())&&(c=l);var d=b.id(),f=b.s,e=b.t,h=b.T,j=b.O,k=b.file(),n=b.transform();if(v(j)&&j.f)c=a.na(),v(b.O)||g(Error("Internal error during texture loading.")),d=new Image,j=b.O.file(),d.src=j,b.O.Jd=d,bc(d,"load",c.bg.bind(c,b)),zd(c).set(b.id(),p),Bd(c,0.3);else if(v(k)&&k.f)c=a.na(),v(b.file())||g(Error("Internal error during file loading.")),
b.s.clear(),b.t.clear(),d=b.file().path(),j=d.split(".").pop(),j=j.toUpperCase(),"TRK"==j||"STL"==j||"FSM"==j||"VTK"==j||g(Error("The "+j+" file format is not supported.")),j=new XMLHttpRequest,E(j,"abort",c.ye.bind(c,j,b)),E(j,"error",c.ye.bind(c,j,b)),E(j,"load",c.ag.bind(c,j,b)),j.open("GET",d,l),j.overrideMimeType("text/plain; charset=x-user-defined"),j.setRequestHeader("Content-Type","text/plain"),j.send(m),zd(c).set(b.id(),p);else if(0!=f.W()){for(k=0;a.Ic;)k++;a.Ic=l;if(f.f||n.f){var t=n.i,
k=t.Rb(new K(f.Aa,f.Ba,f.Ca)),t=t.Rb(new K(f.xa,f.ya,f.za));if(a.vb===m||k.x<a.vb)a.vb=k.x;if(a.rb===m||t.x>a.rb)a.rb=t.x;if(a.wb===m||k.y<a.wb)a.wb=k.y;if(a.sb===m||t.y>a.sb)a.sb=t.y;if(a.xb===m||k.b<a.xb)a.xb=k.b;if(a.tb===m||t.b>a.tb)a.tb=t.b;a.Ia=[(a.vb+a.rb)/2,(a.wb+a.sb)/2,(a.xb+a.tb)/2];n.Ha()}c&&f.f&&(n=a.Ab.get(d),v(n)&&a.a.isBuffer(n.H)&&a.a.deleteBuffer(n.H));n=m;!c||f.f?(n=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,n),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(f.all()),a.a.STATIC_DRAW),
n=new af(n,f.W(),3),f.Ha()):n=a.Ab.get(d);Bd(a.na(),0.3);c&&e.f&&(k=a.Ab.get(d),v(k)&&a.a.isBuffer(k.H)&&a.a.deleteBuffer(k.H));k=m;!c||e.f?(k=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,k),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(e.all()),a.a.STATIC_DRAW),k=new af(k,e.W(),3),e.Ha()):k=a.Mc.get(d);Bd(a.na(),0.3);c&&h.f&&(e=a.$b.get(d),v(e)&&a.a.isBuffer(e.H)&&a.a.deleteBuffer(e.H));e=m;0<h.length()&&(!c||h.f?(h.length()!=f.length()&&g(Error("Mismatch between points and point colors.")),
f=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,f),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(h.all()),a.a.STATIC_DRAW),e=new af(f,h.W(),3),h.Ha()):e=a.$b.get(d));Bd(a.na(),0.3);c&&v(j)&&j.f&&(h=a.fc.get(d),v(h)&&a.a.isBuffer(h.H)&&a.a.deleteBuffer(h.H));h=m;if(v(j))!c||j.f?(h=b.ec,v(h)||g(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),f=a.a.createTexture(),f.fd=j.fd(),a.Ud.set(j.file(),f),a.a.pixelStorei(a.a.UNPACK_FLIP_Y_WEBGL,
p),a.a.bindTexture(a.a.TEXTURE_2D,f),a.a.texImage2D(a.a.TEXTURE_2D,0,a.a.RGBA,a.a.RGBA,a.a.UNSIGNED_BYTE,f.fd),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MAG_FILTER,a.a.LINEAR),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MIN_FILTER,a.a.LINEAR),a.a.bindTexture(a.a.TEXTURE_2D,m),f=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,f),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(h),a.a.STATIC_DRAW),h=new af(f,h.length,2),j.Ha()):h=a.fc.get(d);Bd(a.na(),0.1);!c&&!a.$a.add(b)&&g(Error("Could not add object to this renderer."));
a.Ab.set(d,n);a.Mc.set(d,k);a.$b.set(d,e);a.fc.set(d,h);a.Ic=p}}u.ib=function(){(!this.ta||!this.a||!this.S)&&g(Error("The renderer was not initialized properly."));if(!v(this.Sd))if(Ad(this.na()))this.ca?(Bf(this),eval("this.onShowtime()")):this.jb(p);else{if(this.k.Dc&&!this.ca)this.ca=new ze(this.Va,0);this.Sd=Ee(function(){this.Sd=m;this.ib()}.bind(this),100)}};u.ig=function(){};
u.get=function(a){v(a)||g(Error("Invalid object id."));for(var b=this.$a.Z(),c=0,d=b.length,c=0;c<d;c++)if(b[c].id()==a)return b[c];return m};u.Ve=function(a,b){if(this.k.Cc){this.jb(l);var c=new Uint8Array(4);this.a.readPixels(a,this.Id-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);var d=Math.round(10*(c[0]/255)),f=Math.round(10*(c[1]/255)),c=Math.round(10*(c[2]/255));return 100*d+10*f+c}return-1};
u.jb=function(a){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.Rd):this.a.bindFramebuffer(this.a.FRAMEBUFFER,m);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var b=this.S.Qd,c=this.S.Ya;this.a.uniformMatrix4fv(this.B.get("perspective"),p,b);this.a.uniformMatrix4fv(this.B.get("view"),p,c);b=this.Ia;this.a.uniform3f(this.B.get("center"),parseFloat(b[0]),parseFloat(b[1]),parseFloat(b[2]));if(this.k.Hd){var d=p,b=this.$a.Z(),c=b.length,f;for(f=0;f<c;++f){var e=b[f];if(1!=e.opacity()){var d=
e.s.Zb,d=new K(d[0],d[1],d[2]),e=e.transform().i.Rb(d),h=this.S.view().Rb(e),j=this.S.focus(),e=j.x-h.x,d=j.y-h.y,h=j.b-h.b;b[f].kc=Math.sqrt(e*e+d*d+h*h);d=l}}if(d){this.$a.clear();for(f=0;f<c;++f)this.$a.add(b[f])}}b=this.$a.Z();c=b.length;for(f=0;f<c;++f)if(e=b[f]){if(e.Cd()){var h=e.id(),k=e.kd(),d=this.Ab.get(h),n=this.Mc.get(h),t=this.$b.get(h),j=this.fc.get(h);this.a.bindBuffer(this.a.ARRAY_BUFFER,d.H);this.a.vertexAttribPointer(this.sa.get("vertexPosition"),d.La,this.a.FLOAT,p,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,
n.H);this.a.vertexAttribPointer(this.sa.get("vertexNormal"),n.La,this.a.FLOAT,p,0,0);a?this.a.uniform1i(this.B.get("usePicking"),l):this.a.uniform1i(this.B.get("usePicking"),p);v(t)&&!a&&!k?(this.a.uniform1i(this.B.get("useObjectColor"),p),this.a.bindBuffer(this.a.ARRAY_BUFFER,t.H),this.a.vertexAttribPointer(this.sa.get("vertexColor"),t.La,this.a.FLOAT,p,0,0)):(n=l,k&&!a&&(n=p),this.a.uniform1i(this.B.get("useObjectColor"),n),k=e.color(),a&&(999<h&&g(Error("Id out of bounds.")),k=Math.floor(0.01*
h),n=Math.floor(0.1*h)-10*k,k=[k/10,n/10,(h-100*k-10*n)/10]),this.a.uniform3f(this.B.get("objectColor"),parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])),this.a.vertexAttribPointer(this.sa.get("vertexColor"),d.La,this.a.FLOAT,p,0,0));this.a.uniform1f(this.B.get("objectOpacity"),parseFloat(e.opacity()));v(e.O)&&v(j)&&!a?(this.a.uniform1i(this.B.get("useTexture"),l),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.Ud.get(e.O.file())),this.a.uniform1i(this.B.get("textureSampler"),
0),this.a.bindBuffer(this.a.ARRAY_BUFFER,j.H),this.a.vertexAttribPointer(this.sa.get("vertexTexturePos"),j.La,this.a.FLOAT,p,0,0)):(this.a.uniform1i(this.B.get("useTexture"),p),this.a.vertexAttribPointer(this.sa.get("vertexTexturePos"),d.La,this.a.FLOAT,p,0,0));this.a.uniformMatrix4fv(this.B.get("objectTransform"),p,md(e.transform()));h=1;"POINTS"==e.type()&&(h=e.td());this.a.uniform1f(this.B.get("pointSize"),h);h=-1;e.type()==rd?h=this.a.TRIANGLES:e.type()==Oc?(this.a.lineWidth(e.lineWidth()),h=
this.a.LINES):"POINTS"==e.type()?h=this.a.POINTS:"TRIANGLE_STRIPS"==e.type()?h=this.a.TRIANGLE_STRIP:"POLYGONS"==e.type()&&(h=0==d.Fc%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN);this.a.drawArrays(h,0,d.Fc)}}else g(Error("Could not retrieve object for (re-)drawing!"))};y("X.renderer",$);y("X.renderer.prototype.config",$.prototype.k);y("X.renderer.prototype.config.PROGRESSBAR_ENABLED",$.prototype.k.Dc);y("X.renderer.prototype.config.PICKING_ENABLED",$.prototype.k.Cc);
y("X.renderer.prototype.config.ORDERING_ENABLED",$.prototype.k.Hd);y("X.renderer.prototype.width",$.prototype.width);y("X.renderer.prototype.height",$.prototype.height);y("X.renderer.prototype.canvas",$.prototype.canvas);y("X.renderer.prototype.container",$.prototype.Jf);y("X.renderer.prototype.camera",$.prototype.Ef);y("X.renderer.prototype.interactor",$.prototype.Xf);y("X.renderer.prototype.loader",$.prototype.na);y("X.renderer.prototype.onProgress",$.prototype.Oe);
y("X.renderer.prototype.onModified",$.prototype.He);y("X.renderer.prototype.onHover",$.prototype.Ge);y("X.renderer.prototype.resetBoundingBox",$.prototype.og);y("X.renderer.prototype.resetViewAndRender",$.prototype.Ye);y("X.renderer.prototype.init",$.prototype.fa);y("X.renderer.prototype.addShaders",$.prototype.Xd);y("X.renderer.prototype.add",$.prototype.add);y("X.renderer.prototype.onShowtime",$.prototype.ig);y("X.renderer.prototype.get",$.prototype.get);y("X.renderer.prototype.pick",$.prototype.Ve);
y("X.renderer.prototype.render",$.prototype.ib);function Cf(a){function b(a,b){var a=a*2*Math.PI,b=b*Math.PI,e=new P(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));h.push(new R(c.Sa(e.ra(d)),e))}this.h=[];for(var a=a||{},c=new P(a.Vc||[0,0,0]),d=a.ga||1,f=a.yd||16,a=a.Fg||8,e=[],h,j=0;j<f;j++)for(var k=0;k<a;k++)h=[],b(j/f,k/a),0<k&&b((j+1)/f,k/a),k<a-1&&b((j+1)/f,(k+1)/a),b(j/f,(k+1)/a),e.push(new Xc(h));return Zc(e)}z(Cf,S);y("CSG.sphere",Cf);function Df(a,b){(!v(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));x(b)||g(Error("Invalid radius."));I.call(this);this._className="Sphere";this.Ia=a;this.Oc=b;this.Qc=32;this.zf=16;this.Db()}z(Df,I);Df.prototype.Db=function(){td(this,new Cf({Vc:this.Ia,ga:this.Oc,yd:this.Qc,Fg:this.zf}))};y("X.sphere",Df);function Ef(a){function b(a,b,d){b=2*b*Math.PI;b=k.ra(Math.cos(b)).Sa(n.ra(Math.sin(b)));a=c.Sa(f.ra(a)).Sa(b.ra(e));d=b.ra(1-Math.abs(d)).Sa(h.ra(d));return new R(a,d)}this.h=[];for(var a=a||{},c=new P(a.start||[0,-1,0]),d=new P(a.end||[0,1,0]),f=d.eb(c),e=a.ga||1,a=a.yd||16,h=f.mb(),j=0.5<Math.abs(h.y()),k=(new P(j,!j,0)).jc(h).mb(),n=k.jc(h).mb(),j=new R(c,h.sc()),d=new R(d,h.mb()),t=[],r=0;r<a;r++){var o=r/a,s=(r+1)/a;t.push(new Xc([j,b(0,o,-1),b(0,s,-1)]));t.push(new Xc([b(0,s,0),b(0,o,0),b(1,
o,0),b(1,s,0)]));t.push(new Xc([d,b(1,s,1),b(1,o,1)]))}return Zc(t)}z(Ef,S);y("CSG.cylinder",Ef);function Ff(a,b,c){(!v(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid start position."));(!v(b)||!(b instanceof Array)||3!=b.length)&&g(Error("Invalid end position."));x(c)||g(Error("Invalid radius."));I.call(this);this._className="cylinder";this.Af=a;this.tf=b;this.Oc=c;this.Qc=32;this.Db()}z(Ff,I);Ff.prototype.Db=function(){td(this,new Ef({start:this.Af,end:this.tf,ga:this.Oc,yd:this.Qc}))};y("X.cylinder",Ff);function Gf(a){this.h=[];var a=a||{},b=new P(a.Vc||[0,0,0]),c=!a.ga?[1,1,1]:a.ga.length?a.ga:[a.ga,a.ga,a.ga];return Zc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Xc(a[0].map(function(f){f=new P(b.x()+c[0]*(2*!!(f&1)-1),b.y()+c[1]*(2*!!(f&2)-1),b.b()+c[2]*(2*!!(f&4)-1));return new R(f,new P(a[1]))}))}))}z(Gf,S);y("CSG.cube",Gf);function Hf(a,b,c,d){(!v(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));(!x(b)||!x(c)||!x(d))&&g(Error("Invalid radii."));I.call(this);this._className="cube";this.Ia=a;this.vf=b;this.wf=c;this.xf=d;this.ec=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];this.Db()}z(Hf,I);Hf.prototype.Db=function(){td(this,new Gf({Vc:this.Ia,ga:[this.vf,this.wf,this.xf]}))};y("X.cube",Hf);
