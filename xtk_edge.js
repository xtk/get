/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 * 
 *  - the JSXCompressor library (http://jsxgraph.uni-bayreuth.de/wp/jsxcompressor/)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/JXG/LICENSE
 *
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function i(a){throw a;}var j=void 0,n=!0,q=null,r=!1;function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function s(a){return function(){return this[a]}}var t,da=this;function fa(){}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return a!==j}function y(a){return a!=q}function ia(a){return"array"==ga(a)}function ja(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ka(a){return"string"==typeof a}function A(a){return"number"==typeof a}function la(a){return"function"==ga(a)}function pa(a){a=ga(a);return"object"==a||"array"==a||"function"==a}function qa(a){return a[ra]||(a[ra]=++sa)}
var ra="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),sa=0;function ta(a,b,c){return a.call.apply(a.bind,arguments)}function ua(a,b,c){a||i(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function va(a,b,c){va=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ta:ua;return va.apply(q,arguments)}function ya(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var za=Date.now||function(){return+new Date};
function C(a,b){var c=a.split("."),d=da;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ha(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function E(a,b){function c(){}c.prototype=b.prototype;a.j=b.prototype;a.prototype=new c;a.prototype.constructor=a};function Aa(a,b,c){this.sa=this.ra=this.qa=0;3==arguments.length?(this.qa=Number(a),this.ra=Number(b),this.sa=Number(c)):a instanceof Aa?(this.qa=Number(a.x()),this.ra=Number(a.y()),this.sa=Number(a.b())):(this.qa=Number(a[0]),this.ra=Number(a[1]),this.sa=Number(a[2]))}
Aa.prototype={f:function(){return new Aa(this.qa,this.ra,this.sa)},Ie:function(){return new Aa(-this.qa,-this.ra,-this.sa)},ic:function(a){return new Aa(this.qa+a.x(),this.ra+a.y(),this.sa+a.b())},Sc:function(a){return new Aa(this.qa-a.x(),this.ra-a.y(),this.sa-a.b())},ub:function(a){return new Aa(this.qa*a,this.ra*a,this.sa*a)},Ng:function(a){return new Aa(this.qa/a,this.ra/a,this.sa/a)},fc:function(a){return this.qa*a.x()+this.ra*a.y()+this.sa*a.b()},Nf:function(a,b){return this.ic(a.Sc(this).ub(b))},
length:function(){return Math.sqrt(this.fc(this))},Yc:function(){return this.Ng(this.length())},qe:function(a){return new Aa(this.ra*a.b()-this.sa*a.y(),this.sa*a.x()-this.qa*a.b(),this.qa*a.y()-this.ra*a.x())},x:s("qa"),y:s("ra"),b:s("sa")};var G=G||{};G.xi=n;G.ya=function(a){eval("X.DEV === undefined")||window.console.time(a)};G.ta=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.yg=0;this.ti=function(){return this.yg++}};function Ba(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c]}}
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&i(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.Uc;++c)window.Uc=window[b[c]+"RequestAnimationFrame"],window.le=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.Uc||(window.Uc=function(b){var c=Date.now(),f=Math.max(0,16-(c-a)),g=window.setTimeout(function(){b(c+f)},f);a=c+f;return g});window.le||(window.le=function(a){clearTimeout(a)})})();C("Function.prototype.bind",Function.prototype.bind);C("window.requestAnimationFrame",window.Uc);
C("window.cancelAnimationFrame",window.le);function Ca(a){if(!Fa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ga,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ha,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ia,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ja,"&quot;"));return a}var Ga=/&/g,Ha=/</g,Ia=/>/g,Ja=/\"/g,Fa=/[&<>\"]/;var Ka,La,Ma,Na,Oa,Qa,Ra;function Sa(){return da.navigator?da.navigator.userAgent:q}function Ta(){return da.navigator}Oa=Na=Ma=La=Ka=r;var Ua;if(Ua=Sa()){var Va=Ta();Ka=0==Ua.indexOf("Opera");La=!Ka&&-1!=Ua.indexOf("MSIE");Na=(Ma=!Ka&&-1!=Ua.indexOf("WebKit"))&&-1!=Ua.indexOf("Mobile");Oa=!Ka&&!Ma&&"Gecko"==Va.product}var Wa=Ka,I=La,Xa=Oa,Ya=Ma,$a=Na,ab,bb=Ta();ab=bb&&bb.platform||"";Qa=-1!=ab.indexOf("Mac");Ra=-1!=ab.indexOf("Win");var cb=!!Ta()&&-1!=(Ta().appVersion||"").indexOf("X11"),db;
a:{var eb="",fb;if(Wa&&da.opera)var jb=da.opera.version,eb="function"==typeof jb?jb():jb;else if(Xa?fb=/rv\:([^\);]+)(\)|;)/:I?fb=/MSIE\s+([^\);]+)(\)|;)/:Ya&&(fb=/WebKit\/(\S+)/),fb)var kb=fb.exec(Sa()),eb=kb?kb[1]:"";if(I){var lb,mb=da.document;lb=mb?mb.documentMode:j;if(lb>parseFloat(eb)){db=""+lb;break a}}db=eb}var nb={};
function pb(a){var b;if(!(b=nb[a])){b=0;for(var c=(""+db).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var m=k.exec(g)||["","",""],o=l.exec(h)||["","",""];if(0==m[0].length&&0==o[0].length)break;b=((0==m[1].length?0:parseInt(m[1],10))<(0==o[1].length?0:parseInt(o[1],10))?-1:(0==m[1].length?0:parseInt(m[1],
10))>(0==o[1].length?0:parseInt(o[1],10))?1:0)||((0==m[2].length)<(0==o[2].length)?-1:(0==m[2].length)>(0==o[2].length)?1:0)||(m[2]<o[2]?-1:m[2]>o[2]?1:0)}while(0==b)}b=nb[a]=0<=b}return b}var qb={};function rb(a){return qb[a]||(qb[a]=I&&document.documentMode&&document.documentMode>=a)};function sb(a,b){for(var c in a)b.call(j,a[c],c,a)}function tb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function ub(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var vb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function wb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<vb.length;f++)c=vb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var xb=Array.prototype,yb=xb.indexOf?function(a,b,c){return xb.indexOf.call(a,b,c)}:function(a,b,c){c=c==q?0:0>c?Math.max(0,a.length+c):c;if(ka(a))return!ka(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},zb=xb.forEach?function(a,b,c){xb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ab=xb.map?function(a,b,c){return xb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
ka(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Bb=xb.some?function(a,b,c){return xb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return n;return r},Gb=xb.every?function(a,b,c){return xb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return r;return n};function Hb(a,b){var c=yb(a,b);0<=c&&xb.splice.call(a,c,1)}
function Ib(a){return xb.concat.apply(xb,arguments)}function Jb(a){if(ia(a))return Ib(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function Kb(a,b,c){return 2>=arguments.length?xb.slice.call(a,b):xb.slice.call(a,b,c)};function Lb(a){if("function"==typeof a.ma)a=a.ma();else if(ja(a)||ka(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function Mb(a){if("function"==typeof a.Sb)return a.Sb();if(ka(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return tb(a)}
function Nb(a,b){if("function"==typeof a.every)return a.every(b,j);if(ja(a)||ka(a))return Gb(a,b,j);var c;if("function"==typeof a.Oc)c=a.Oc();else if("function"!=typeof a.Sb)if(ja(a)||ka(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=ub(a);else c=j;for(var d=Mb(a),e=d.length,f=0;f<e;f++)if(!b.call(j,d[f],c&&c[f],a))return r;return n};var Ob="StopIteration"in da?da.StopIteration:Error("StopIteration");function Pb(){}Pb.prototype.next=function(){i(Ob)};Pb.prototype.oc=function(){return this};function Qb(a){if(a instanceof Pb)return a;if("function"==typeof a.oc)return a.oc(r);if(ja(a)){var b=0,c=new Pb;c.next=function(){for(;;){b>=a.length&&i(Ob);if(b in a)return a[b++];b++}};return c}i(Error("Not implemented"))}
function Rb(a,b){if(ja(a))try{zb(a,b,j)}catch(c){c!==Ob&&i(c)}else{a=Qb(a);try{for(;;)b.call(j,a.next(),j,a)}catch(d){d!==Ob&&i(d)}}};function Sb(a,b){this.w={};this.s=[];var c=arguments.length;if(1<c){c%2&&i(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.je(a)}t=Sb.prototype;t.G=0;t.Zc=0;t.ma=s("G");t.Sb=function(){Tb(this);for(var a=[],b=0;b<this.s.length;b++)a.push(this.w[this.s[b]]);return a};t.Oc=function(){Tb(this);return this.s.concat()};t.oe=function(a){for(var b=0;b<this.s.length;b++){var c=this.s[b];if(Ub(this.w,c)&&this.w[c]==a)return n}return r};
t.Kc=function(a,b){if(this===a)return n;if(this.G!=a.ma())return r;var c=b||Vb;Tb(this);for(var d,e=0;d=this.s[e];e++)if(!c(this.get(d),a.get(d)))return r;return n};function Vb(a,b){return a===b}t.clear=function(){this.w={};this.Zc=this.G=this.s.length=0};t.remove=function(a){return Ub(this.w,a)?(delete this.w[a],this.G--,this.Zc++,this.s.length>2*this.G&&Tb(this),n):r};
function Tb(a){if(a.G!=a.s.length){for(var b=0,c=0;b<a.s.length;){var d=a.s[b];Ub(a.w,d)&&(a.s[c++]=d);b++}a.s.length=c}if(a.G!=a.s.length){for(var e={},c=b=0;b<a.s.length;)d=a.s[b],Ub(e,d)||(a.s[c++]=d,e[d]=1),b++;a.s.length=c}}t.get=function(a,b){return Ub(this.w,a)?this.w[a]:b};t.set=function(a,b){Ub(this.w,a)||(this.G++,this.s.push(a),this.Zc++);this.w[a]=b};t.je=function(a){var b;a instanceof Sb?(b=a.Oc(),a=a.Sb()):(b=ub(a),a=tb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};t.f=function(){return new Sb(this)};
t.oc=function(a){Tb(this);var b=0,c=this.s,d=this.w,e=this.Zc,f=this,g=new Pb;g.next=function(){for(;;){e!=f.Zc&&i(Error("The map has changed since the iterator was created"));b>=c.length&&i(Ob);var g=c[b++];return a?g:d[g]}};return g};function Ub(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Wb(a){this.w=new Sb;a&&this.je(a)}function Xb(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+qa(a):b.substr(0,1)+a}t=Wb.prototype;t.ma=function(){return this.w.ma()};t.add=function(a){this.w.set(Xb(a),a)};t.je=function(a){for(var a=Mb(a),b=a.length,c=0;c<b;c++)this.add(a[c])};t.Kd=function(a){for(var a=Mb(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};t.remove=function(a){return this.w.remove(Xb(a))};t.clear=function(){this.w.clear()};
t.contains=function(a){a=Xb(a);return Ub(this.w.w,a)};t.Lf=function(a){for(var b=new Wb,a=Mb(a),c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};t.Sb=function(){return this.w.Sb()};t.f=function(){return new Wb(this)};t.Kc=function(a){return this.ma()==Lb(a)&&Yb(this,a)};
function Yb(a,b){var c=Lb(b);if(a.ma()>c)return r;!(b instanceof Wb)&&5<c&&(b=new Wb(b));return Nb(a,function(a){if("function"==typeof b.contains)a=b.contains(a);else if("function"==typeof b.oe)a=b.oe(a);else if(ja(b)||ka(b))a=0<=yb(b,a);else a:{for(var c in b)if(b[c]==a){a=n;break a}a=r}return a})}t.oc=function(){return this.w.oc(r)};function Zb(){}Zb.prototype.zf=r;Zb.prototype.Da=function(){this.zf||(this.zf=n,this.H())};Zb.prototype.H=function(){this.Kg&&$b.apply(q,this.Kg)};function ac(a){a&&"function"==typeof a.Da&&a.Da()}function $b(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ja(d)?$b.apply(q,d):ac(d)}};function bc(a,b){this.Pf=b;this.Nc=[];a>this.Pf&&i(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Nc.push(this.wd())}E(bc,Zb);t=bc.prototype;t.wf=q;t.yf=q;function cc(a,b){a.Nc.length<a.Pf?a.Nc.push(b):a.te(b)}t.wd=function(){return this.wf?this.wf():{}};t.te=function(a){if(this.yf)this.yf(a);else if(pa(a))if(la(a.Da))a.Da();else for(var b in a)delete a[b]};t.H=function(){bc.j.H.call(this);for(var a=this.Nc;a.length;)this.te(a.pop());delete this.Nc};function dc(){this.Lc=[];this.Pe=new Sb;this.kg=this.lg=this.mg=this.hg=0;this.Xc=new Sb;this.tf=this.jg=0;this.Je=1;this.ue=new bc(0,4E3);this.ue.wd=function(){return new ec};this.ig=new bc(0,50);this.ig.wd=function(){return new fc};var a=this;this.ye=new bc(0,2E3);this.ye.wd=function(){return""+a.Je++};this.ye.te=ba()}function fc(){this.af=this.time=this.count=0}
fc.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.af&&a.push(" [VarAlloc = ",this.af,"]");return a.join("")};function ec(){}function gc(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(hc(a.Af-c));e.push(" ",ic(a.Af-b));0==a.ve?e.push(" Start        "):1==a.ve?(e.push(" Done "),e.push(hc(a.nj-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.pi&&e.push("[VarAlloc ",a.pi,"] ");return e.join("")}
ec.prototype.toString=function(){return this.type==q?this.Hg:"["+this.type+"] "+this.Hg};dc.prototype.reset=function(){for(var a=0;a<this.Lc.length;a++){var b=this.ue.id;b&&cc(this.ye,b);cc(this.ue,this.Lc[a])}this.Lc.length=0;this.Pe.clear();this.hg=za();this.tf=this.jg=this.kg=this.lg=this.mg=0;b=this.Xc.Oc();for(a=0;a<b.length;a++){var c=this.Xc.get(b[a]);c.count=0;c.time=0;c.af=0;cc(this.ig,c)}this.Xc.clear()};
dc.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Lc.length;d++){var e=this.Lc[d];1==e.ve&&c.pop();a.push(" ",gc(e,this.hg,b,c.join("")));b=e.Af;a.push("\n");0==e.ve&&c.push("|  ")}if(0!=this.Pe.ma()){var f=za();a.push(" Unstopped timers:\n");Rb(this.Pe,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",ic(b.startTime),")\n")})}b=this.Xc.Oc();for(d=0;d<b.length;d++)c=this.Xc.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.jg,"\n","Total comments created ",
this.tf,"\n","Overhead start: ",this.mg," ms\n","Overhead end: ",this.lg," ms\n","Overhead comment: ",this.kg," ms\n");return a.join("")};function hc(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function ic(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new dc;function jc(){}var kc=0;t=jc.prototype;t.key=0;t.kc=r;t.ke=r;t.ca=function(a,b,c,d,e,f){la(a)?this.Mf=n:a&&a.handleEvent&&la(a.handleEvent)?this.Mf=r:i(Error("Invalid listener argument"));this.Qc=a;this.dg=b;this.src=c;this.type=d;this.capture=!!e;this.we=f;this.ke=r;this.key=++kc;this.kc=r};t.handleEvent=function(a){return this.Mf?this.Qc.call(this.we||this.src,a):this.Qc.handleEvent.call(this.Qc,a)};!I||rb(9);var lc=!I||rb(9),mc=I&&!pb("8");!Ya||pb("528");Xa&&pb("1.9b")||I&&pb("8")||Wa&&pb("9.5")||Ya&&pb("528");!Xa||pb("8");function nc(a,b){this.type=a;this.currentTarget=this.target=b}E(nc,Zb);t=nc.prototype;t.H=function(){delete this.type;delete this.target;delete this.currentTarget};t.Vb=r;t.Vc=n;t.stopPropagation=function(){this.Vb=n};t.preventDefault=function(){this.Vc=r};function oc(a){oc[" "](a);return a}oc[" "]=fa;function pc(a,b){a&&this.ca(a,b)}E(pc,nc);t=pc.prototype;t.target=q;t.relatedTarget=q;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=r;t.altKey=r;t.shiftKey=r;t.metaKey=r;t.Ma=q;
t.ca=function(a,b){var c=this.type=a.type;nc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Xa){var e;a:{try{oc(d.nodeName);e=n;break a}catch(f){}e=r}e||(d=q)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Ya||a.offsetX!==j?a.offsetX:a.layerX;this.offsetY=Ya||a.offsetY!==j?a.offsetY:a.layerY;this.clientX=a.clientX!==j?a.clientX:a.pageX;this.clientY=a.clientY!==j?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Ma=a;delete this.Vc;delete this.Vb};t.stopPropagation=function(){pc.j.stopPropagation.call(this);this.Ma.stopPropagation?this.Ma.stopPropagation():this.Ma.cancelBubble=n};
t.preventDefault=function(){pc.j.preventDefault.call(this);var a=this.Ma;if(a.preventDefault)a.preventDefault();else if(a.returnValue=r,mc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};t.Wg=s("Ma");t.H=function(){pc.j.H.call(this);this.relatedTarget=this.currentTarget=this.target=this.Ma=q};var qc={},rc={},sc={},tc={};
function K(a,b,c,d,e){if(b){if(ia(b)){for(var f=0;f<b.length;f++)K(a,b[f],c,d,e);return q}var d=!!d,g=rc;b in g||(g[b]={G:0,wa:0});g=g[b];d in g||(g[d]={G:0,wa:0},g.G++);var g=g[d],h=qa(a),k;g.wa++;if(g[h]){k=g[h];for(f=0;f<k.length;f++)if(g=k[f],g.Qc==c&&g.we==e){if(g.kc)break;return k[f].key}}else k=g[h]=[],g.G++;f=uc();f.src=a;g=new jc;g.ca(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);qc[c]=g;sc[h]||(sc[h]=[]);sc[h].push(g);a.addEventListener?(a==da||!a.xf)&&a.addEventListener(b,f,d):a.attachEvent(b in
tc?tc[b]:tc[b]="on"+b,f);return c}i(Error("Invalid event type"))}function uc(){var a=vc,b=lc?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function wc(a,b,c,d,e){if(ia(b))for(var f=0;f<b.length;f++)wc(a,b[f],c,d,e);else a=K(a,b,c,d,e),qc[a].ke=n}
function xc(a,b,c,d,e){if(ia(b))for(var f=0;f<b.length;f++)xc(a,b[f],c,d,e);else{d=!!d;a:{f=rc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=qa(a),f[a]))){a=f[a];break a}a=q}if(a)for(f=0;f<a.length;f++)if(a[f].Qc==c&&a[f].capture==d&&a[f].we==e){yc(a[f].key);break}}}
function yc(a){if(!qc[a])return r;var b=qc[a];if(b.kc)return r;var c=b.src,d=b.type,e=b.dg,f=b.capture;c.removeEventListener?(c==da||!c.xf)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in tc?tc[d]:tc[d]="on"+d,e);c=qa(c);e=rc[d][f][c];if(sc[c]){var g=sc[c];Hb(g,b);0==g.length&&delete sc[c]}b.kc=n;e.Tf=n;Bc(d,f,c,e);delete qc[a];return n}
function Bc(a,b,c,d){if(!d.Fd&&d.Tf){for(var e=0,f=0;e<d.length;e++)d[e].kc?d[e].dg.src=q:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Tf=r;0==f&&(delete rc[a][b][c],rc[a][b].G--,0==rc[a][b].G&&(delete rc[a][b],rc[a].G--),0==rc[a].G&&delete rc[a])}}function Cc(a){var b,c=0,d=b==q;b=!!b;if(a==q)sb(sc,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)yc(f.key),c++}});else if(a=qa(a),sc[a])for(var a=sc[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)yc(f.key),c++}}
function Dc(a){var b=Ec,a=qa(a),c=sc[a];if(c){var d=ha(b),e=ha(j);return d&&e?(c=rc[b],!!c&&!!c[j]&&a in c[j]):!d&&!e?n:Bb(c,function(a){return d&&a.type==b||e&&a.capture==j})}return r}function Fc(a,b,c,d,e){var f=1,b=qa(b);if(a[b]){a.wa--;a=a[b];a.Fd?a.Fd++:a.Fd=1;try{for(var g=a.length,h=0;h<g;h++){var k=a[h];k&&!k.kc&&(f&=Gc(k,e)!==r)}}finally{a.Fd--,Bc(c,d,b,a)}}return Boolean(f)}function Gc(a,b){var c=a.handleEvent(b);a.ke&&yc(a.key);return c}
function vc(a,b){if(!qc[a])return n;var c=qc[a],d=c.type,e=rc;if(!(d in e))return n;var e=e[d],f,g;if(!lc){var h;if(!(h=b))a:{h=["window","event"];for(var k=da;f=h.shift();)if(y(k[f]))k=k[f];else{h=q;break a}h=k}f=h;h=n in e;k=r in e;if(h){if(0>f.keyCode||f.returnValue!=j)return n;a:{var l=r;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(m){l=n}if(l||f.returnValue==j)f.returnValue=n}}l=new pc;l.ca(f,this);f=n;try{if(h){for(var o=[],v=l.currentTarget;v;v=v.parentNode)o.push(v);g=e[n];g.wa=g.G;for(var p=
o.length-1;!l.Vb&&0<=p&&g.wa;p--)l.currentTarget=o[p],f&=Fc(g,o[p],d,n,l);if(k){g=e[r];g.wa=g.G;for(p=0;!l.Vb&&p<o.length&&g.wa;p++)l.currentTarget=o[p],f&=Fc(g,o[p],d,r,l)}}else f=Gc(c,l)}finally{o&&(o.length=0),l.Da()}return f}d=new pc(b,this);try{f=Gc(c,d)}finally{d.Da()}return f}var Hc=0;function Ic(a){return a+"_"+Hc++};function Jc(){}E(Jc,Zb);t=Jc.prototype;t.xf=n;t.Hd=q;t.Se=ca("Hd");t.addEventListener=function(a,b,c,d){K(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){xc(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=rc;if(b in c){if(ka(a))a=new nc(a,this);else if(a instanceof nc)a.target=a.target||this;else{var d=a,a=new nc(b,this);wb(a,d)}var d=1,e,c=c[b],b=n in c,f;if(b){e=[];for(f=this;f;f=f.Hd)e.push(f);f=c[n];f.wa=f.G;for(var g=e.length-1;!a.Vb&&0<=g&&f.wa;g--)a.currentTarget=e[g],d&=Fc(f,e[g],a.type,n,a)&&a.Vc!=r}if(r in c)if(f=c[r],f.wa=f.G,b)for(g=0;!a.Vb&&g<e.length&&f.wa;g++)a.currentTarget=e[g],d&=Fc(f,e[g],a.type,r,a)&&a.Vc!=r;else for(e=this;!a.Vb&&e&&
f.wa;e=e.Hd)a.currentTarget=e,d&=Fc(f,e,a.type,r,a)&&a.Vc!=r;a=Boolean(d)}else a=n;return a};t.H=function(){Jc.j.H.call(this);Cc(this);this.Hd=q};function L(){this.c="base";this.ua=window["X.counter"].ti();this.d=r}E(L,Jc);L.prototype.__defineGetter__("classname",s("c"));L.prototype.__defineGetter__("id",s("ua"));C("X.base",L);function Kc(a,b){this.pa=new Aa(a);this.V=new Aa(b)}Kc.prototype={f:function(){return new Kc(this.pa.f(),this.V.f())},Rb:function(){this.V=this.V.Ie()},kh:function(a,b){return new Kc(this.pa.Nf(a.pa,b),this.V.Nf(a.V,b))}};function Lc(a,b){this.V=a;this.$c=b}Lc.prototype={f:function(){return new Lc(this.V.f(),this.$c)},Rb:function(){this.V=this.V.Ie();this.$c=-this.$c}};function Mc(a,b){this.ab=a;this.Od=b;var c=a[0].pa,d=a[2].pa,d=a[1].pa.Sc(c).qe(d.Sc(c)).Yc();this.oa=new Lc(d,d.fc(c))}
Mc.prototype={f:function(){var a=this.ab.map(function(a){return a.f()});return new Mc(a,this.Od)},Rb:function(){this.ab.reverse().map(function(a){a.Rb()});this.oa.Rb()},gg:function(a,b,c,d,e){for(var f=0,g=[],h=0;h<this.ab.length;h++){var k=a.V.fc(this.ab[h].pa)-a.$c,k=-1.0E-5>k?2:1.0E-5<k?1:0,f=f|k;g.push(k)}switch(f){case 0:(0<a.V.fc(this.oa.V)?b:c).push(this);break;case 1:d.push(this);break;case 2:e.push(this);break;case 3:b=[];c=[];for(h=0;h<this.ab.length;h++){var l=(h+1)%this.ab.length,k=g[h],
m=g[l],f=this.ab[h],l=this.ab[l];2!=k&&b.push(f);1!=k&&c.push(2!=k?f.f():f);3==(k|m)&&(k=(a.$c-a.V.fc(f.pa))/a.V.fc(l.pa.Sc(f.pa)),k=f.kh(l,k),b.push(k),c.push(k.f()))}3<=b.length&&d.push(new Mc(b,this.Od));3<=c.length&&e.push(new Mc(c,this.Od))}}};function Nc(a){this.X=this.Y=this.oa=q;this.u=[];a&&this.cc(a)}
Nc.prototype={f:function(){var a=new Nc;a.ai(this.oa&&this.oa.f());a.$h(this.Y&&this.Y.f());a.Zh(this.X&&this.X.f());a.Md(this.u.map(function(a){return a.f()}));return a},R:function(){for(var a=0;a<this.u.length;a++)this.u[a].Rb();this.oa.Rb();this.Y&&this.Y.R();this.X&&this.X.R();a=this.Y;this.Y=this.X;this.X=a},ne:function(a){if(!this.oa)return a.slice();for(var b=[],c=[],d=0;d<a.length;d++)a[d].gg(this.oa,b,c,b,c);this.Y&&(b=this.Y.ne(b));c=this.X?this.X.ne(c):[];return b.concat(c)},Ca:function(a){this.u=
a.ne(this.u);this.Y&&this.Y.Ca(a);this.X&&this.X.Ca(a)},rb:function(){var a=this.u.slice();this.Y&&(a=a.concat(this.Y.rb()));this.X&&(a=a.concat(this.X.rb()));return a},cc:function(a){if(a.length){this.oa||(this.oa=a[0].oa.f());for(var b=[],c=[],d=0;d<a.length;d++)a[d].gg(this.oa,this.u,this.u,b,c);b.length&&(this.Y||(this.Y=new Nc),this.Y.cc(b));c.length&&(this.X||(this.X=new Nc),this.X.cc(c))}},ai:ca("oa"),$h:ca("Y"),Zh:ca("X"),Md:ca("u")};function Oc(){this.u=[]}function Pc(a){var b=new Oc;b.Md(a);return b}
Oc.prototype={f:function(){var a=new Oc;a.Md(this.u.map(function(a){return a.f()}));return a},Ye:function(a){var b=new Nc(this.f().u),a=new Nc(a.f().u);b.Ca(a);a.Ca(b);a.R();a.Ca(b);a.R();b.cc(a.rb());return Pc(b.rb())},$a:function(a){var b=new Nc(this.f().u),a=new Nc(a.f().u);b.R();b.Ca(a);a.Ca(b);a.R();a.Ca(b);a.R();b.cc(a.rb());b.R();return Pc(b.rb())},Ae:function(a){var b=new Nc(this.f().u),a=new Nc(a.f().u);b.R();a.Ca(b);a.R();b.Ca(a);a.Ca(b);b.cc(a.rb());b.R();return Pc(b.rb())},inverse:function(){var a=
this.f();a.u.map(function(a){a.Rb()});return a},Md:ca("u")};function Qc(){L.call(this);this.c="indexer";this.ie=[];this.ea={}}E(Qc,L);Qc.prototype.add=function(a){y(a)||i(Error("Invalid object."));var b=window.JSON.stringify(a);b in this.ea||(this.ea[b]=this.ie.length,this.ie.push(a));return this.ea[b]};Qc.prototype.unique=s("ie");function Rc(a){L.call(this);this.c="file";this.ce=a;this.d=n}E(Rc,L);function Sc(){this.dd=this.t=q}Sc.prototype.__defineSetter__("file",function(a){this.t=y(a)?new Rc(a):q});Sc.prototype.__defineGetter__("file",function(){return!this.t?"":this.t.ce});Sc.prototype.__defineGetter__("filedata",s("dd"));Sc.prototype.__defineSetter__("filedata",ca("dd"));function Tc(){L.call(this);this.c="colortable";this.ea=new Sb;Ba(this,new Sc)}E(Tc,L);Tc.prototype.add=function(a,b,c,d,e,f){(!A(a)||!A(c)||!A(d)||!A(e)||!A(f))&&i(Error("Invalid color table entry."));this.ea.set(a,[b,c,d,e,f]);this.d=n};function Vc(a,b,c){this.x=ha(a)?a:0;this.y=ha(b)?b:0;this.b=ha(c)?c:0}Vc.prototype.f=function(){return new Vc(this.x,this.y,this.b)};Vc.prototype.Xe=function(){return[this.x,this.y,this.b]};function M(a,b,c){this.x=a;this.y=b;this.b=c}E(M,Vc);t=M.prototype;t.f=function(){return new M(this.x,this.y,this.b)};t.Ub=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};t.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};t.R=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};t.normalize=function(){return this.scale(1/this.Ub())};t.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
t.$a=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};t.Kc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function Wc(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.b-b.b;return Math.sqrt(c*c+d*d+e*e)}function Xc(a,b){return new M(a.x+b.x,a.y+b.y,a.b+b.b)}function Yc(a,b){return new M(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};function Zc(a,b){this.x=ha(a)?a:0;this.y=ha(b)?b:0}Zc.prototype.f=function(){return new Zc(this.x,this.y)};function $c(a,b){return new Zc(a.x-b.x,a.y-b.y)};function ad(a,b){this.x=a;this.y=b}E(ad,Zc);t=ad.prototype;t.f=function(){return new ad(this.x,this.y)};t.Ub=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};t.scale=function(a){this.x*=a;this.y*=a;return this};t.R=function(){this.x=-this.x;this.y=-this.y;return this};t.normalize=function(){return this.scale(1/this.Ub())};t.add=function(a){this.x+=a.x;this.y+=a.y;return this};t.$a=function(a){this.x-=a.x;this.y-=a.y;return this};
t.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};t.Kc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function bd(a,b){this.width=a;this.height=b}function gd(a,b){return a==b?n:!a||!b?r:a.width==b.width&&a.height==b.height}bd.prototype.f=function(){return new bd(this.width,this.height)};bd.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};bd.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};bd.prototype.scale=function(a){this.width*=a;this.height*=a;return this};function hd(a,b){if(a instanceof hd)this.L=a.Xe();else{var c;if(c=ja(a))a:{for(var d=c=0;d<a.length;d++){if(!ja(a[d])||0<c&&a[d].length!=c){c=r;break a}for(var e=0;e<a[d].length;e++)if(!A(a[d][e])){c=r;break a}0==c&&(c=a[d].length)}c=0!=c}c?this.L=Jb(a):a instanceof bd?this.L=id(a.height,a.width):A(a)&&A(b)&&0<a&&0<b?this.L=id(a,b):i(Error("Invalid argument(s) for Matrix contructor"))}this.z=new bd(this.L[0].length,this.L.length)}
function jd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new hd(b)}function kd(a,b,c){for(var d=0;d<a.na().height;d++)for(var e=0;e<a.na().width;e++)b.call(c,a.L[d][e],d,e,a)}function ld(a,b){var c=new hd(a.na());kd(a,function(d,e,f){c.L[e][f]=b.call(j,d,e,f,a)});return c}function id(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}t=hd.prototype;
t.add=function(a){gd(this.z,a.na())||i(Error("Matrix summation is only supported on arrays of equal size"));return ld(this,function(b,c,d){return b+a.L[c][d]})};t.Kc=function(a,b){if(this.z.width!=a.z.width||this.z.height!=a.z.height)return r;for(var c=b||0,d=0;d<this.z.height;d++)for(var e=0;e<this.z.width;e++)if(!(Math.abs(this.L[d][e]-a.L[d][e])<=(c||1.0E-6)))return r;return n};t.na=s("z");t.N=function(a,b){return!(0<=a&&a<this.z.height&&0<=b&&b<this.z.width)?q:this.L[a][b]};
function N(a,b,c,d){0<=b&&b<a.z.height&&0<=c&&c<a.z.width||i(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.z.height+","+a.z.width+")"));a.L[b][c]=d}t.multiply=function(a){if(a instanceof hd)return this.z.width!=a.na().height&&i(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),md(this,a);if(A(a))return nd(this,a);i(Error("A matrix can only be multiplied by a number or another matrix."))};
t.$a=function(a){gd(this.z,a.na())||i(Error("Matrix subtraction is only supported on arrays of equal size."));return ld(this,function(b,c,d){return b-a.L[c][d]})};t.Xe=s("L");function md(a,b){var c=new hd(a.z.height,b.na().width);kd(c,function(a,e,f){for(var g=a=0;g<this.z.width;g++)a+=this.N(e,g)*b.N(g,f);N(c,e,f,a)},a);return c}function nd(a,b){return ld(a,function(a){return a*b})};function O(a,b){hd.call(this,a,b);this.c="matrix"}E(O,hd);function od(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new O(b)}t=O.prototype;t.M=function(){var a=[],b=this.na();if(0==b.height||0==b.width)return[];var c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(this.N(c,d));return a};
t.translate=function(a){this.z.width!=this.z.height&&i(Error("Can not translate non-square matrix."));var b=this.na(),c=jd(b.height);a instanceof ad&&3==b.height?(N(c,0,2,a.x),N(c,1,2,a.y)):a instanceof M&&4==b.height?(N(c,0,3,a.x),N(c,1,3,a.y),N(c,2,3,a.b)):i(Error("Translation failed."));return new O(this.multiply(c))};
t.rotate=function(a,b){(4!=this.na().height||this.z.width!=this.z.height)&&i(Error("Only 4x4 matrices can be rotated."));(!y(b)||!(b instanceof M))&&i(Error("Invalid axis vector."));A(a)||i(Error("Invalid angle."));var c=b.normalize(),d=Math.cos(a),e=Math.sin(a),f=jd(4);N(f,0,0,d+c.x*c.x*(1-d));N(f,0,1,c.x*c.y*(1-d)-c.b*e);N(f,0,2,c.x*c.b*(1-d)+c.y*e);N(f,1,0,c.y*c.x*(1-d)+c.b*e);N(f,1,1,d+c.y*c.y*(1-d));N(f,1,2,c.y*c.b*(1-d)-c.x*e);N(f,2,0,c.b*c.x*(1-d)-c.y*e);N(f,2,1,c.b*c.y*(1-d)+c.x*e);N(f,2,
2,d+c.b*c.b*(1-d));return new O(this.multiply(f))};t.Fa=function(a){var b=this.na(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;a instanceof M&&3<=b.width?(c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.b):i(Error("Multiplication by vector failed."));a=this.multiply(new hd(c));return new M(parseFloat(a.N(0,0)),parseFloat(a.N(1,0)),parseFloat(a.N(2,0)))};t.ni=function(a,b){var c=this.L[a];this.L[a]=this.L[b];this.L[b]=c};
t.mi=function(a,b){for(var c=this.na(),d=0,d=0;d<c.height;d++){var e=this.N(d,a);e||(e=0);var f=this.N(d,b);f||(f=0);N(this,d,a,f);N(this,d,b,e)}};C("X.matrix",O);C("X.matrix.createIdentityMatrix",od);C("X.matrix.prototype.flatten",O.prototype.M);C("X.matrix.prototype.translate",O.prototype.translate);C("X.matrix.prototype.rotate",O.prototype.rotate);C("X.matrix.prototype.toArray",O.prototype.Xe);C("X.matrix.prototype.getValueAt",O.prototype.N);C("X.matrix.prototype.multiplyByVector",O.prototype.Fa);
C("X.matrix.prototype.swapRows",O.prototype.ni);C("X.matrix.prototype.swapCols",O.prototype.mi);function pd(){L.call(this);this.c="transform";this.m=od(4);this.Pa=new Float32Array(this.m.M())}E(pd,L);pd.prototype.__defineGetter__("matrix",s("m"));pd.prototype.__defineSetter__("matrix",function(a){(!y(a)||!(a instanceof O))&&i(Error("Invalid matrix."));this.m=a;this.Pa=new Float32Array(this.m.M());this.d=n});t=pd.prototype;t.Th=function(a){(!A(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.m=this.m.rotate(a*Math.PI/180,new M(0,1,0));this.Pa=new Float32Array(this.m.M());this.d=n};
t.Uh=function(a){(!A(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.m=this.m.rotate(a*Math.PI/180,new M(1,0,0));this.Pa=new Float32Array(this.m.M());this.d=n};t.Vh=function(a){(!A(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.m=this.m.rotate(a*Math.PI/180,new M(0,0,1));this.Pa=new Float32Array(this.m.M());this.d=n};t.qi=function(a){A(a)||i(Error("Invalid distance."));this.m=this.m.translate(new M(a,0,0));this.Pa=new Float32Array(this.m.M());this.d=n};
t.ri=function(a){A(a)||i(Error("Invalid distance."));this.m=this.m.translate(new M(0,a,0));this.Pa=new Float32Array(this.m.M());this.d=n};t.si=function(a){A(a)||i(Error("Invalid distance."));this.m=this.m.translate(new M(0,0,a));this.Pa=new Float32Array(this.m.M());this.d=n};function qd(a,b,c){var d=a.m.N(b,c);d||(d=0);N(a.m,b,c,-1*d);a.Pa=new Float32Array(a.m.M());a.d=n}t.Sg=function(){qd(this,0,0)};t.Tg=function(){qd(this,1,1)};t.Ug=function(){qd(this,2,2)};C("X.transform",pd);
C("X.transform.prototype.rotateX",pd.prototype.Th);C("X.transform.prototype.rotateY",pd.prototype.Uh);C("X.transform.prototype.rotateZ",pd.prototype.Vh);C("X.transform.prototype.translateX",pd.prototype.qi);C("X.transform.prototype.translateY",pd.prototype.ri);C("X.transform.prototype.translateZ",pd.prototype.si);C("X.transform.prototype.flipX",pd.prototype.Sg);C("X.transform.prototype.flipY",pd.prototype.Tg);C("X.transform.prototype.flipZ",pd.prototype.Ug);function rd(){L.call(this);this.c="texture";this.Ta=this.Ab=this.t=q;this.kd=this.ld=0;Ba(this,new Sc)}E(rd,L);C("X.texture",rd);function P(a,b){L.call(this);this.c="fasttriplets";this.Gb=Infinity;this.Db=-Infinity;this.Hb=Infinity;this.Eb=-Infinity;this.Ib=Infinity;this.Fb=-Infinity;this.ad=[0,0,0];this.C=0;this.K=new Float32Array(a);y(b)&&(this.K=b.K.subarray(0,b.K.length),this.Gb=b.Gb,this.Db=b.Db,this.Hb=b.Hb,this.Eb=b.Eb,this.Ib=b.Ib,this.Fb=b.Fb,this.ad=b.ad.slice())}E(P,L);t=P.prototype;
t.add=function(a,b,c){this.Gb=Math.min(this.Gb,a);this.Db=Math.max(this.Db,a);this.Hb=Math.min(this.Hb,b);this.Eb=Math.max(this.Eb,b);this.Ib=Math.min(this.Ib,c);this.Fb=Math.max(this.Fb,c);this.ad=[(this.Gb+this.Db)/2,(this.Hb+this.Eb)/2,(this.Ib+this.Fb)/2];this.d=n;this.K[this.C++]=a;this.K[this.C++]=b;this.K[this.C++]=c;return this.C/3};t.mc=function(){if(this.C!=this.K.length){var a=new Float32Array(this.C);a.set(this.K.subarray(0,this.C));this.K=a}};
t.get=function(a){a*=3;return[this.K[a],this.K[a+1],this.K[a+2]]};t.remove=function(){i(Error("Not implemented."))};t.clear=function(){this.K=new Float32Array(this.K.length);this.d=n};P.prototype.__defineGetter__("count",function(){this.mc();return this.K.length/3});P.prototype.__defineGetter__("length",function(){this.mc();return this.K.length});C("X.triplets",P);C("X.triplets.prototype.add",P.prototype.add);C("X.triplets.prototype.resize",P.prototype.mc);C("X.triplets.prototype.get",P.prototype.get);
C("X.triplets.prototype.remove",P.prototype.remove);C("X.triplets.prototype.clear",P.prototype.clear);function Q(){this.la=sd;this.Mb=new pd;this.wb=[1,1,1];this.Lb=this.ba=this.S=this.h=this.g=q;this.Bc=[];this.Aa=n;this.bc=this.Cc=1;this.Yb=q;this.uc=r;this.Q=1;this.P=0}var sd="TRIANGLES";Q.prototype.__defineGetter__("texture",function(){this.ba||(this.ba=new rd);return this.ba});Q.prototype.__defineGetter__("transform",s("Mb"));Q.prototype.__defineGetter__("points",s("g"));Q.prototype.__defineGetter__("normals",s("h"));Q.prototype.__defineGetter__("colors",s("S"));
Q.prototype.__defineGetter__("color",s("wb"));Q.prototype.__defineSetter__("color",function(a){(!y(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid color."));for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.wb=a;this.d=n});Q.prototype.__defineGetter__("opacity",s("Q"));Q.prototype.__defineSetter__("opacity",function(a){(!A(a)||1<a||0>a)&&i(Error("Invalid opacity."));for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].opacity=a;this.Q=a;this.d=n});
Q.prototype.__defineGetter__("caption",s("Yb"));Q.prototype.__defineSetter__("caption",function(a){this.Yb=a;this.d=n});Q.prototype.__defineGetter__("visible",s("Aa"));Q.prototype.__defineSetter__("visible",function(a){for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.Aa=a;this.d=n});Q.prototype.__defineGetter__("pointsize",s("Cc"));Q.prototype.__defineSetter__("pointsize",function(a){A(a)||i(Error("Invalid point size."));this.Cc=a;this.d=n});
Q.prototype.__defineGetter__("magicmode",s("uc"));Q.prototype.__defineSetter__("magicmode",function(a){"boolean"!=typeof a&&i(Error("Invalid magic mode setting."));this.uc=a;this.d=n});Q.prototype.__defineGetter__("linewidth",s("bc"));Q.prototype.__defineSetter__("linewidth",function(a){A(a)||i(Error("Invalid line width."));this.bc=a;this.d=n});function td(){this.Ja=Infinity;this.da=this.za=-Infinity;this.fa=Infinity;this.lb=[0,0,0];this.jb=[1,1,1]}td.prototype.__defineGetter__("lowerThreshold",s("da"));td.prototype.__defineSetter__("lowerThreshold",function(a){a>=this.Ja&&a<=this.za&&(this.da=a)});td.prototype.__defineGetter__("upperThreshold",s("fa"));td.prototype.__defineSetter__("upperThreshold",function(a){a>=this.Ja&&a<=this.za&&(this.fa=a)});td.prototype.__defineGetter__("min",s("Ja"));td.prototype.__defineGetter__("max",s("za"));
td.prototype.__defineGetter__("minColor",s("lb"));td.prototype.__defineSetter__("minColor",function(a){(!y(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid min. color."));this.lb=a});td.prototype.__defineGetter__("maxColor",s("jb"));td.prototype.__defineSetter__("maxColor",function(a){(!y(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid max. color."));this.jb=a});function ud(){L.call(this);this.c="scalars";this.pc=this.r=q;this.pf=n;Ba(this,new Sc);Ba(this,new td);this.lb=[0,1,0];this.jb=[1,0,0]}E(ud,L);ud.prototype.__defineGetter__("array",s("r"));ud.prototype.__defineSetter__("array",function(a){this.pc=this.r=a;this.d=n});C("X.scalars",ud);function T(a){L.call(this);this.c="object";this.e=[];this.q=this.T=q;Ba(this,new Q);y(a)&&this.Pb(a)}E(T,L);
T.prototype.Pb=function(a){this.la=a.la;this.Mb=new pd;this.Mb.m=new O(a.Mb.m.L);this.wb=a.wb.slice();a.g&&(this.g=new P(a.g.length,a.g));a.h&&(this.h=new P(a.h.length,a.h));a.S&&(this.S=new P(a.S.length,a.S));this.ba=a.ba;this.Lb=a.Lb;a.t&&(this.t=new Rc((new String(a.t.ce)).toString()));this.Q=a.Q;this.e.length=0;var b=a.e;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.e.push(new G[b[d].c](b[d]));this.Aa=a.Aa;this.Cc=a.Cc;this.bc=a.bc;a.Yb&&(this.Yb=(new String(a.Yb)).toString());this.uc=a.uc;this.Bc=
a.Bc.slice();this.d=n};T.prototype.__defineGetter__("colortable",function(){this.T||(this.T=new Tc);return this.T});T.prototype.__defineGetter__("scalars",function(){this.q||(this.q=new ud);return this.q});T.prototype.__defineGetter__("children",s("e"));T.prototype.B=function(){var a=new vd;a.aa=this;this.dispatchEvent(a)};
function wd(a,b){(!y(a)||!y(b)||!(a instanceof T)||!(b instanceof T))&&i(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.Q?-1:1==b.Q?1:y(a.P)&&y(b.P)&&a.P>b.P?-1:1}C("X.object",T);C("X.object.prototype.modified",T.prototype.B);function xd(){}function yd(a){for(var b=a.g.count,c=[],d=0,d=0;d<b;d+=3){var e=a.g.get(d),f=a.g.get(d+1),g=a.g.get(d+2),h=a.h.get(d),k=a.h.get(d+1),l=a.h.get(d+2),m=a.wb;a.S&&0<a.S.length&&(m=a.S.get(d));var o=[];o.push(new Kc(e,h));o.push(new Kc(f,k));o.push(new Kc(g,l));c.push(new Mc(o,m))}return Pc(c)}
function zd(a,b){(!y(b)||!(b instanceof Oc))&&i(Error("Invalid CSG object."));var c=new Qc,d=[];Ab(b.u,function(a){for(var b=[],g=a.Od,b=Ab(a.ab,function(a){a.color=g;return c.add(a)}),a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.xg=Ab(c.unique(),function(a){return[a.pa.x(),a.pa.y(),a.pa.b()]});a.wg=Ab(c.unique(),function(a){return[a.V.x(),a.V.y(),a.V.b()]});a.vg=Ab(c.unique(),function(a){return!a.color?q:[a.color[0],a.color[1],a.color[2]]});a.g=new P(9*d.length);a.h=new P(9*d.length);
a.S=new P(9*d.length);Ab(d,function(a){var b=a[0],c=a[1],a=a[2],d=this.xg,k=this.wg,l=this.vg;this.g.add(d[b][0],d[b][1],d[b][2]);this.g.add(d[c][0],d[c][1],d[c][2]);this.g.add(d[a][0],d[a][1],d[a][2]);this.h.add(k[b][0],k[b][1],k[b][2]);this.h.add(k[c][0],k[c][1],k[c][2]);this.h.add(k[a][0],k[a][1],k[a][2]);l[b]&&this.S.add(l[b][0],l[b][1],l[b][2]);l[c]&&this.S.add(l[c][0],l[c][1],l[c][2]);l[a]&&this.S.add(l[a][0],l[a][1],l[a][2])}.bind(a));0==a.S.C&&(a.S=q);a.la=sd}
xd.prototype.Ye=function(a){(!y(a)||!(a instanceof Oc)&&!(a instanceof T))&&i(Error("Invalid object."));var b=a;a instanceof T&&(b=yd(b));a=new T;Ba(a,new xd);zd(a,yd(this).Ye(b));return a};xd.prototype.$a=function(a){(!y(a)||!(a instanceof Oc)&&!(a instanceof T))&&i(Error("Invalid object."));var b=a;a instanceof T&&(b=yd(b));a=new T;Ba(a,new xd);zd(a,yd(this).$a(b));return a};
xd.prototype.Ae=function(a){(!y(a)||!(a instanceof Oc)&&!(a instanceof T))&&i(Error("Invalid object."));var b=a;a instanceof T&&(b=yd(b));a=new T;Ba(a,new xd);zd(a,yd(this).Ae(b));return a};xd.prototype.inverse=function(){var a=new T;Ba(a,new xd);zd(a,yd(this).inverse());return a};C("X.constructable",xd);C("X.constructable.prototype.intersect",xd.prototype.Ae);C("X.constructable.prototype.inverse",xd.prototype.inverse);C("X.constructable.prototype.subtract",xd.prototype.$a);
C("X.constructable.prototype.union",xd.prototype.Ye);function Ad(a){nc.call(this,a);this.c="event"}E(Ad,nc);var Bd=Ic("pan"),Cd=Ic("rotate"),Dd=Ic("zoom"),Ed=Ic("scroll");Ic("render");var Fd=Ic("resetview"),Ec=Ic("modified"),Gd=Ic("progress"),Hd=Ic("hover"),Id=Ic("hover_end");function Jd(){Ad.call(this,Bd);this.P=new ad(0,0)}E(Jd,Ad);function Kd(){Ad.call(this,Cd);this.P=new ad(0,0)}E(Kd,Ad);function Ld(){Ad.call(this,Dd);this.bb=this.Bb=r}E(Ld,Ad);function Md(){Ad.call(this,Ed);this.D=r}E(Md,Ad);function Nd(){Ad.call(this,Hd);this.sd=this.rd=0}
E(Nd,Ad);function Od(){Ad.call(this,Id)}E(Od,Ad);function Pd(){Ad.call(this,Fd)}E(Pd,Ad);function vd(){Ad.call(this,Ec);this.aa=new T;this.p=q}E(vd,Ad);function Qd(){Ad.call(this,Gd);this.qf=0}E(Qd,Ad);function U(){L.call(this);this.c="parser";this.ia=q;this.C=0;this.Ag=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.fd=n}E(U,L);U.prototype.parse=function(){i(Error("The function parse() should be overloaded."))};function Rd(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)var f=a[e],b=Math.min(b,f),c=Math.max(c,f);return[b,c]}
function V(a,b,c){y(c)||(c=1);var d=1,e=Uint8Array;switch(b){case "schar":e=Int8Array;break;case "ushort":e=Uint16Array;d=2;break;case "sshort":e=Int16Array;d=2;break;case "uint":e=Uint32Array;d=4;break;case "sint":e=Int32Array;d=4;break;case "float":e=Float32Array,d=4}b=new e(a.ia.slice(a.C,a.C+=c*d));if(a.Ag!=a.fd){a=b;b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(e=0;e<a.byteLength;e+=d)for(var f=e+d-1,g=e;f>g;f--,g++){var h=b[g];b[g]=b[f];b[f]=h}b=a}return 1==c?b[0]:b}
function Sd(a,b,c){G.ya(a.c+".reslice");for(var d=b.W,e=c.max,f=c.data,g=d[2],h=d[1],d=d[0],k=b.v!=q,l=h*d,m=Array(g),o=0;o<g;o++){m[o]=Array(h);for(var v=0;v<h;v++)m[o][v]=new c.data.constructor(d)}for(var p=0,c=c=0;c<g;c++){for(var o=f.subarray(c*l,(c+1)*l),v=new Uint8Array(4*l),w=0,u=0,D=0,w=0;w<h;w++)for(u=0;u<d;u++){var p=o[D],F=0,x=0,B=0,z=0;b.T?((z=b.T.ea.get(Math.floor(p)))||(z=b.T.ea.get(b.T.ea.ma()-1)),F=255*z[1],x=255*z[2],B=255*z[3],z=255*z[4]):(F=x=B=255*(p/e),z=255);var J=4*D;v[J]=F;
v[++J]=x;v[++J]=B;v[++J]=z;m[c][w][u]=p;D++}p=new rd;p.Ta=v;p.ld=d;p.kd=h;o=b.Wa.e[c];o.ba=p;k&&(o.v=b.v.Wa.e[c].ba)}for(w=0;w<h;w++){v=new Uint8Array(4*g*d);for(c=D=0;c<g;c++)for(u=0;u<d;u++)p=m[c][w][u],b.T?((z=b.T.ea.get(Math.floor(p)))||(z=b.T.ea.get(b.T.ea.ma()-1)),F=255*z[1],x=255*z[2],B=255*z[3],z=255*z[4]):(F=x=B=255*(p/e),z=255),J=4*D,v[J]=F,v[++J]=x,v[++J]=B,v[++J]=z,D++;p=new rd;p.Ta=v;p.ld=d;p.kd=g;o=b.Va.e[w];o.ba=p;k&&(o.v=b.v.Va.e[w].ba)}for(u=0;u<d;u++){v=new Uint8Array(4*g*h);for(c=
D=0;c<g;c++)for(w=0;w<h;w++)p=m[c][w][u],b.T?((z=b.T.ea.get(Math.floor(p)))||(z=b.T.ea.get(b.T.ea.ma()-1)),F=255*z[1],x=255*z[2],B=255*z[3],z=255*z[4]):(F=x=B=255*(p/e),z=255),J=4*D,v[J]=F,v[++J]=x,v[++J]=B,v[++J]=z,D++;p=new rd;p.Ta=v;p.ld=h;p.kd=g;o=b.Ua.e[u];o.ba=p;k&&(o.v=b.v.Ua.e[u].ba)}G.ta(a.c+".reslice");return m};function Vd(){U.call(this);this.c="parserLBL"}E(Vd,U);
Vd.prototype.parse=function(a,b,c){G.ya(this.c+".parse");var d=b.Bc,e=d.length;0==e&&i(Error("No _pointIndices defined on the X.object."));this.ia=c;for(var f=[],g=V(this,"uchar",c.byteLength),h=g.length,k=r,l=0,c=1;c<h;c++)10==g[c-1]?(l=c,k=n):k&&32==g[c]&&(k=parseInt(String.fromCharCode.apply(q,g.subarray(l,c)),10),f.push(k),k=r);g=b.q.r?b.q.r:new Float32Array(e);h=f.length;for(c=0;c<h;c++)g[f[c]]=1;f=new Float32Array(3*e);for(c=h=0;c<e;c++)l=d[c],l>e&&i(Error("Could not find scalar for vertex.")),
l=g[l],f[h++]=l,f[h++]=l,f[h++]=l;b.q.r=g;b.q.pc=f;b.q.d=n;G.ta(this.c+".parse");d=new vd;d.aa=b;d.p=a;this.dispatchEvent(d)};C("X.parserLBL",Vd);C("X.parserLBL.prototype.parse",Vd.prototype.parse);function Wd(a){this.n=a;this.Of=K(this.n,Xa?"DOMMouseScroll":"mousewheel",this)}E(Wd,Jc);
Wd.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.Ma;if("mousewheel"==a.type){c=1;if(I||Ya&&(Ra||pb("532.0")))c=40;d=Ya&&Qa&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;ha(a.wheelDeltaX)?(b=Ya&&Qa&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Ya&&Qa&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ha(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;A(this.Qf)&&Math.min(Math.max(b,-this.Qf),this.Qf);A(this.Rf)&&(c=Math.min(Math.max(c,
-this.Rf),this.Rf));b=new Xd(d,a,0,c);try{this.dispatchEvent(b)}finally{b.Da()}};Wd.prototype.H=function(){Wd.j.H.call(this);yc(this.Of);delete this.Of};function Xd(a,b,c,d){b&&this.ca(b,j);this.type="mousewheel";this.detail=a;this.ec=d}E(Xd,pc);I||Ya&&pb("525");var Yd;function Zd(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=Kb(arguments,1),e;e=c;for(var f=0,g=0;g<d.length;g++)0<=yb(e,d[g])||(e.push(d[g]),f++);e=f==d.length;a.className=c.join(" ");return e};var $d=!I||rb(9);!Xa&&!I||I&&rb(9)||Xa&&pb("1.9.1");I&&pb("9");function ae(a){return a?new be(ce(a)):Yd||(Yd=new be)}function de(a){return ka(a)?document.getElementById(a):a}function ee(a,b){sb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in fe?a.setAttribute(fe[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}
var fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function ge(a,b,c){return he(document,arguments)}
function he(a,b){var c=b[0],d=b[1];if(!$d&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ca(d.name),'"');if(d.type){c.push(' type="',Ca(d.type),'"');var e={};wb(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);d&&(ka(d)?c.className=d:ia(d)?Zd.apply(q,[c].concat(d)):ee(c,d));2<b.length&&ie(a,c,b);return c}
function ie(a,b,c){function d(c){c&&b.appendChild(ka(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ja(f)&&!(pa(f)&&0<f.nodeType)?zb(je(f)?Jb(f):f,d):d(f)}}function ke(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function me(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function ne(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function ce(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function je(a){if(a&&"number"==typeof a.length){if(pa(a))return"function"==typeof a.item||"string"==typeof a.item;if(la(a))return"function"==typeof a.item}return r}function be(a){this.I=a||da.document||document}t=be.prototype;
t.zd=ae;t.i=function(a){return ka(a)?this.I.getElementById(a):a};t.dc=function(a,b,c){return he(this.I,arguments)};t.createElement=function(a){return this.I.createElement(a)};t.createTextNode=function(a){return this.I.createTextNode(a)};function oe(a){return"CSS1Compat"==a.I.compatMode}function pe(a){var b=a.I,a=!Ya&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Zc(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}t.appendChild=function(a,b){a.appendChild(b)};
t.contains=ne;function W(a){(!y(a)||!(a instanceof Element))&&i(Error("Could not add interactor to the given element."));L.call(this);this.c="interactor";this.Zb=a;this.Zd=this.jf=this.hf=this.kf=this.gf=this.lf=q;this.Yd=n;this.ob=this.kb=this.Qa=r;this.jd=[0,0];this.Ud=new ad(0,0);this.O={MOUSEWHEEL_ENABLED:n,MOUSECLICKS_ENABLED:n,KEYBOARD_ENABLED:n,HOVERING_ENABLED:n,CONTEXTMENU_ENABLED:r}}E(W,L);W.prototype.__defineGetter__("config",s("O"));W.prototype.__defineGetter__("leftButtonDown",s("Qa"));
W.prototype.__defineGetter__("middleButtonDown",s("kb"));W.prototype.__defineGetter__("rightButtonDown",s("ob"));
W.prototype.ca=function(){this.O.MOUSEWHEEL_ENABLED?(this.Zd=new Wd(this.Zb),this.lf=K(this.Zd,"mousewheel",this.Tc.bind(this))):(yc(this.lf),this.Zd=q);this.O.MOUSECLICKS_ENABLED?(this.gf=K(this.Zb,"mousedown",this.vh.bind(this)),this.kf=K(this.Zb,"mouseup",this.Ah.bind(this))):(yc(this.gf),yc(this.kf));this.Zb.oncontextmenu=this.O.CONTEXTMENU_ENABLED?q:function(){return r};window.onkeydown=this.O.KEYBOARD_ENABLED?this.Wf.bind(this):q;yc(this.hf);yc(this.jf);this.hf=K(this.Zb,"mousemove",this.xh.bind(this));
this.jf=K(this.Zb,"mouseout",this.yh.bind(this))};W.prototype.vh=function(a){0==a.button?this.Qa=n:1==a.button?this.kb=n:2==a.button&&(this.ob=n);eval("this.onMouseDown("+this.Qa+","+this.kb+","+this.ob+")");qe(this);a.preventDefault()};W.prototype.uh=ba();W.prototype.Ah=function(a){0==a.button?this.Qa=r:1==a.button?this.kb=r:2==a.button&&(this.ob=r);eval("this.onMouseUp("+this.Qa+","+this.kb+","+this.ob+")");qe(this);a.preventDefault()};W.prototype.__defineGetter__("mousePosition",s("jd"));t=W.prototype;
t.zh=ba();t.yh=function(a){this.Yd=r;this.O.KEYBOARD_ENABLED&&(window.onkeydown=q);this.ob=this.kb=this.Qa=r;qe(this);this.Ud=new ad(0,0);a.preventDefault()};t.wh=ba();
t.xh=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Yd=n;this.O.KEYBOARD_ENABLED&&window.onkeydown==q&&(window.onkeydown=this.Wf.bind(this));a.preventDefault();var b=a.shiftKey;this.jd=[a.offsetX,a.offsetY];var c=new ad(this.jd[0],this.jd[1]),a=this.Ud.$a(c);this.Ud=c.f();this.O.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.kb||this.Qa||this.ob)&&qe(this),this.xe=setTimeout(function(){qe(this);var a=new Nd;a.rd=c.x;a.sd=c.y;this.dispatchEvent(a);
this.xe=q}.bind(this),300));2>Math.abs(a.x)&&(a.x=0);2>Math.abs(a.y)&&(a.y=0);0!=a.Ub()&&(this.Qa&&!b?(b=new Kd,b.P=a,b.ij=0,this.dispatchEvent(b)):this.kb||this.Qa&&b?(b=new Jd,5<a.x?a.x=5:-5>a.x&&(a.x=-5),5<a.y?a.y=5:-5>a.y&&(a.y=-5),b.P=a,this.dispatchEvent(b)):this.ob&&(b=new Ld,b.Bb=0<a.y,b.bb=r,this.dispatchEvent(b)))};function qe(a){a.xe&&clearTimeout(a.xe);a.dispatchEvent(new Od)}t.Bh=ba();
t.Tc=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");qe(this);a.preventDefault()};t.sh=ba();
t.Wf=function(a){if(this.Yd){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");qe(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;82==f&&!b&&!c&&!d&&!e?(a.preventDefault(),a=new Pd,this.dispatchEvent(a)):37<=f&&40>=f&&(a.preventDefault(),e?a=new Jd:b?a=new Ld:(a=new Kd,this instanceof re&&(a=new Md)),a&&(c=new ad(0,0),37==f?(c.x=5,a.D=r,b&&(a.D=n,a.Bb=n,a.bb=r)):39==f?(c.x=-5,a.D=n,b&&(a.Bb=r,a.bb=r)):38==f?(c.y=5,a.D=n,b&&(a.Bb=n,a.bb=n)):40==f&&(c.y=-5,a.D=r,b&&(a.Bb=r,
a.bb=n)),a.P=c,this.dispatchEvent(a)))}};C("X.interactor",W);C("X.interactor.prototype.init",W.prototype.ca);C("X.interactor.prototype.onMouseDown",W.prototype.uh);C("X.interactor.prototype.onMouseUp",W.prototype.zh);C("X.interactor.prototype.onMouseMove",W.prototype.wh);C("X.interactor.prototype.onMouseWheel",W.prototype.Bh);C("X.interactor.prototype.onKey",W.prototype.sh);function re(a){W.call(this,a);this.c="interactor2D"}E(re,W);re.prototype.Tc=function(a){re.j.Tc.call(this,a);var b=new Md;y(a.ec)||(a.ec=0);b.D=0>a.ec;this.dispatchEvent(b)};function se(a){T.call(this);this.c="slice";this.k=[0,0,0];this.ac=[0,0,1];this.D=[0,1,0];this.A=this.F=10;this.Lb=[0,1,0,0,1,1,1,1,1,0,0,0];this.v=this.Ya=q;this.Ia=n;this.Xb=[1,1,1];y(a)&&this.Pb(a)}E(se,T);se.prototype.Pb=function(a){this.k=a.k.slice();this.ac=a.ac.slice();this.D=a.D.slice();this.F=a.F;this.A=a.A;this.Ya=a.Ya;this.v=a.v;this.Ia=a.Ia;this.Xb=a.Xb;this.zg=a.zg;se.j.Pb.call(this,a)};
se.prototype.Jc=function(){var a=new M(this.ac[0],this.ac[1],this.ac[2]),b=new M(this.D[0],this.D[1],this.D[2]),c=Yc(b,a),d=new M(this.k[0],this.k[1],this.k[2]),e=new M(1,1,1);1==a.x?(e=new M(this.k[0],this.A/2,this.F/2),this.Lb=[0,0,1,0,0,1,0,1,1,1,1,0]):1==a.y?(e=new M(this.F/2,this.k[1],this.A/2),this.Lb=[0,0,0,1,1,0,1,0,1,1,0,1]):1==a.b&&(e=new M(this.F/2,this.A/2,this.k[2]));var f=Xc(c.f().R(),b.f().R()),f=new M(f.x*e.x,f.y*e.y,f.b*e.b);f.add(d);var g=Xc(c.f().R(),b),g=new M(g.x*e.x,g.y*e.y,
g.b*e.b);g.add(d);var h=Xc(c,b.f().R()),h=new M(h.x*e.x,h.y*e.y,h.b*e.b);h.add(d);var k=h,b=Xc(c,b),b=new M(b.x*e.x,b.y*e.y,b.b*e.b);b.add(d);d=g;this.g=new P(18);this.h=new P(18);this.g.add(f.x,f.y,f.b);this.g.add(g.x,g.y,g.b);this.g.add(h.x,h.y,h.b);this.g.add(k.x,k.y,k.b);this.g.add(b.x,b.y,b.b);this.g.add(d.x,d.y,d.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.Ia&&(a=new T,a.g=new P(24),a.h=
new P(24),a.g.add(f.x,f.y,f.b),a.g.add(g.x,g.y,g.b),a.g.add(g.x,g.y,g.b),a.g.add(b.x,b.y,b.b),a.g.add(b.x,b.y,b.b),a.g.add(h.x,h.y,h.b),a.g.add(h.x,h.y,h.b),a.g.add(f.x,f.y,f.b),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.wb=[this.Xb[0],this.Xb[1],this.Xb[2]],a.la="LINES",a.bc=2,this.e.push(a))};C("X.slice",se);function Y(a){T.call(this);this.c="volume";this.k=[0,0,0];this.W=[10,10,10];this.J=[1,1,1];this.Ab=[];this.sc=this.gb=this.rc=this.fb=this.qc=this.eb=0;this.Ua=new T;this.Va=new T;this.Wa=new T;this.qd=this.Ba=r;this.qb=0;this.v=q;this.Ia=n;this.Ob=Infinity;this.Nb=-Infinity;Ba(this,new Sc);Ba(this,new td);y(a)&&this.Pb(a)}E(Y,T);
Y.prototype.Pb=function(a){window.console.log(a);this.k=a.k.slice();this.W=a.W.slice();this.J=a.J.slice();this.eb=a.eb;this.qc=a.qc;this.fb=a.fb;this.rc=a.rc;this.gb=a.gb;this.sc=a.sc;this.Ua=new T(a.Ua);this.Va=new T(a.Va);this.Wa=new T(a.Wa);this.Ba=a.Ba;this.qd=a.qd;this.qb=a.qb;this.v=a.v;this.Ia=a.Ia;Y.j.Pb.call(this,a)};
Y.prototype.Jc=function(){this.e.length=0;this.Ua.e.length=0;this.Va.e.length=0;this.Wa.e.length=0;this.e.push(this.Ua);this.e.push(this.Va);this.e.push(this.Wa);for(var a=0,a=0;3>a;a++){for(var b=(this.W[a]-1)/2,c=b,d=0,d=0;d<this.W[a];d++){var e=-b*this.J[a]+d*this.J[a],f=[[this.k[0]+e,this.k[1],this.k[2]],[this.k[0],this.k[1]+e,this.k[2]],[this.k[0],this.k[1],this.k[2]+e]],e=this.e[a].e,g=0,h=0,k=[1,1,1],l=this.Ia;0==a?(g=this.W[2]*this.J[2]-this.J[2],h=this.W[1]*this.J[1]-this.J[1],k=[1,1,0]):
1==a?(g=this.W[0]*this.J[0]-this.J[0],h=this.W[2]*this.J[2]-this.J[2],k=[1,0,0]):2==a&&(g=this.W[0]*this.J[0]-this.J[0],h=this.W[1]*this.J[1]-this.J[1],k=[0,1,0]);y(this.Ya)&&(l=r);var m=new se,o=m,f=f[a],v=[[1,0,0],[0,1,0],[0,0,1]][a],p=[[0,1,0],[0,0,-1],[0,1,0]][a];(!y(f)||!(f instanceof Array)||3!=f.length)&&i(Error("Invalid center."));(!y(v)||!(v instanceof Array)||3!=v.length)&&i(Error("Invalid front direction."));(!y(p)||!(p instanceof Array)||3!=p.length)&&i(Error("Invalid up direction."));
A(g)||i(Error("Invalid width."));A(h)||i(Error("Invalid height."));var w=r;y(l)&&(w=l);l=[1,1,1];y(k)&&(l=k);o.k=f;o.ac=v;o.D=p;o.F=g;o.A=h;o.Ia=w;o.Xb=l;o.Jc();m.Ya=this;m.visible=d==Math.floor(c);e.push(m)}0==a?this.qc=this.eb=c:1==a?this.rc=this.fb=c:2==a&&(this.sc=this.gb=c)}this.d=n};
Y.prototype.B=function(a){a="undefined"!==typeof a?a:n;if(0<this.e.length)if(this.Ba!=this.qd&&(this.Ba?(this.e[0].e[parseInt(this.eb,10)].visible=r,this.e[1].e[parseInt(this.fb,10)].visible=r,this.e[2].e[parseInt(this.gb,10)].visible=r):this.e[this.qb].visible=r,this.d=n,this.qd=this.Ba),this.Ba)te(this,this.qb);else for(var b=0,b=0;3>b;b++){var c=this.e[b],d=0,e=0;0==b?(d=this.eb,e=this.qc,this.qc=this.eb):1==b?(d=this.fb,e=this.rc,this.rc=this.fb):2==b&&(d=this.gb,e=this.sc,this.sc=this.gb);c.e[parseInt(e,
10)].visible=r;c=c.e[parseInt(d,10)];c.visible=n;c.Q=1}a&&Y.j.B.call(this)};Y.prototype.__defineGetter__("dimensions",s("W"));Y.prototype.__defineGetter__("volumeRendering",s("Ba"));Y.prototype.__defineSetter__("volumeRendering",function(a){this.Ba=a;this.B(r)});Y.prototype.__defineSetter__("visible",ca("Aa"));Y.prototype.__defineGetter__("center",s("k"));Y.prototype.__defineSetter__("center",function(a){(!y(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center."));this.k=a});
Y.prototype.__defineGetter__("image",s("Ab"));Y.prototype.__defineGetter__("labelmap",function(){this.v||(this.v=new ue(this));return this.v});Y.prototype.__defineGetter__("indexX",s("eb"));Y.prototype.__defineSetter__("indexX",function(a){A(a)&&0<=a&&a<this.Ua.e.length&&(this.eb=a,this.B(r))});Y.prototype.__defineGetter__("indexY",s("fb"));Y.prototype.__defineSetter__("indexY",function(a){A(a)&&0<=a&&a<this.Va.e.length&&(this.fb=a,this.B(r))});Y.prototype.__defineGetter__("indexZ",s("gb"));
Y.prototype.__defineSetter__("indexZ",function(a){A(a)&&0<=a&&a<this.Wa.e.length&&(this.gb=a,this.B(r))});Y.prototype.__defineGetter__("windowLow",s("Ob"));Y.prototype.__defineSetter__("windowLow",ca("Ob"));Y.prototype.__defineGetter__("windowHigh",s("Nb"));Y.prototype.__defineSetter__("windowHigh",ca("Nb"));Y.prototype.__defineGetter__("borders",s("Ia"));Y.prototype.__defineSetter__("borders",ca("Ia"));
function te(a,b){if(a.Ba&&(a.d||b!=a.qb)){var c=a.e[a.qb];c.visible=r;var c=a.e[b],d=c.e.length,e;for(e=0;e<d;e++)c.e[e].Aa=n;a.qb=b;a.d=r}}C("X.volume",Y);C("X.volume.prototype.modified",Y.prototype.B);function ve(){U.call(this);this.c="parserSTL"}E(ve,U);
ve.prototype.parse=function(a,b,c){G.ya(this.c+".parse");this.ia=c;var d=b.g,e=b.h;if("solid"==String.fromCharCode.apply(q,V(this,"uchar",5))){b.g=d=new P(c.byteLength);b.h=e=new P(c.byteLength);var f=d,d=e,e=V(this,"uchar",c.byteLength-5),c=e.length,g=r,h=r,k=0,l;for(l=0;l<c;l++)if(10==e[l]){if(g||h){var m=String.fromCharCode.apply(q,e.subarray(k,l)).split(" "),h=parseFloat(m[0]),o=parseFloat(m[1]),m=parseFloat(m[2]);g?(d.add(h,o,m),d.add(h,o,m),d.add(h,o,m)):f.add(h,o,m);h=g=r}}else 32==e[l-1]&&
(102==e[l]?(k=l+=13,g=n):118==e[l]&&(k=l+=7,h=n))}else{this.C=80;f=V(this,"uint");b.g=d=new P(9*f);b.h=e=new P(9*f);for(c=c=0;c<f;c++)g=V(this,"float",12),k=g[0],l=g[1],h=g[2],e.add(k,l,h),e.add(k,l,h),e.add(k,l,h),d.add(g[3],g[4],g[5]),d.add(g[6],g[7],g[8]),d.add(g[9],g[10],g[11]),this.C+=2}G.ta(this.c+".parse");f=new vd;f.aa=b;f.p=a;this.dispatchEvent(f)};C("X.parserSTL",ve);C("X.parserSTL.prototype.parse",ve.prototype.parse);function we(){U.call(this);this.c="parserVTK"}E(we,U);
we.prototype.parse=function(a,b,c){G.ya(this.c+".parse");var d=b.g,e=b.h,f=new Uint8Array(c),g="";b.g=d=new P(c.byteLength);b.h=e=new P(c.byteLength);for(var c=0,h=f.length;c<h;c+=32768)g+=String.fromCharCode.apply(q,f.subarray(c,Math.min(c+32768,h)));f=g.split("\n");g=f.length;this.Fc=this.Gc=q;this.yb=[];this.ja=sd;this.ae=this.mb=this.cb=this.nb=r;c=0;for(h=g%8;h--;)xe(this,f[c]),c++;for(h=0.125*g^0;h--;)xe(this,f[c]),c++,xe(this,f[c]),c++,xe(this,f[c]),c++,xe(this,f[c]),c++,xe(this,f[c]),c++,
xe(this,f[c]),c++,xe(this,f[c]),c++,xe(this,f[c]),c++;var c=this.Gc,f=this.Fc,g=f.length,k=h=this.yb.length;do{var l=this.yb[h-k],m=l.length,o;for(o=0;o<m&&!("LINES"==this.ja&&o+1>=m);o++){var v=parseInt(l[o],10),p=c.get(v);d.add(p[0],p[1],p[2]);var w=v,u=p;"LINES"==this.ja?(w=parseInt(l[o+1],10),u=c.get(w),d.add(u[0],u[1],u[2])):"TRIANGLE_STRIPS"==this.ja&&(0==o||o==m-1)&&d.add(p[0],p[1],p[2]);v<g?(u=f.get(v),e.add(u[0],u[1],u[2]),"LINES"==this.ja?(w=f.get(w),e.add(w[0],w[1],w[2])):"TRIANGLE_STRIPS"==
this.ja&&(0==o||o==m-1)&&e.add(u[0],u[1],u[2])):(w=new M(p[0],p[1],p[2]),w.normalize(),e.add(w.x,w.y,w.b),"LINES"==this.ja?(w=new M(u[0],u[1],u[2]),w.normalize(),e.add(w.x,w.y,w.b)):"TRIANGLE_STRIPS"==this.ja&&(0==o||o==m-1)&&e.add(w.x,w.y,w.b))}k--}while(0<k);b.la=this.ja;G.ta(this.c+".parse");d=new vd;d.aa=b;d.p=a;this.dispatchEvent(d)};
function xe(a,b){var b=b.replace(/^\s+|\s+$/g,""),c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.nb=n;a.cb=r;a.mb=r;c=parseInt(c[1],10);a.Gc=new P(3*c);a.Fc=new P(3*c);return;case "VERTICES":a.cb=n;a.nb=r;a.mb=r;c=parseInt(c[1],10);3<=c?a.ja=sd:1==c?a.ja="POINTS":i(Error("This VTK file is not supported!"));a.yb=[];return;case "TRIANGLE_STRIPS":a.cb=n;a.nb=r;a.mb=r;a.ja="TRIANGLE_STRIPS";a.yb=[];return;case "LINES":a.cb=n;a.nb=r;a.mb=r;a.ja="LINES";a.yb=[];return;case "POLYGONS":a.cb=n;
a.nb=r;a.mb=r;a.ja="POLYGONS";a.yb=[];return;case "POINT_DATA":a.mb=n;a.nb=r;a.cb=r;return}if(a.nb)if(1==d||isNaN(parseFloat(e)))a.nb=r;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]);a.Gc.add(e,f,g)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.Gc.add(e,f,g));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Gc.add(d,e,c))}else a.cb?1==d||isNaN(parseFloat(e))?a.cb=r:a.yb.push(c.slice(1)):a.mb&&("NORMALS"==e?a.ae=n:1==d||isNaN(parseFloat(e))?
(a.mb=r,a.ae=r):a.ae&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]),a.Fc.add(e,f,g)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.Fc.add(e,f,g)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Fc.add(d,e,c))))}C("X.parserVTK",we);C("X.parserVTK.prototype.parse",we.prototype.parse);function ye(){U.call(this);this.c="parserFSM";this.fd=r}E(ye,U);
ye.prototype.parse=function(a,b,c){G.ya(this.c+".parse");this.ia=c;var d=b.g,e=b.h,f=b.Bc,c=0,g;do g=V(this,"uchar"),c++;while(200>c&&10!=g);V(this,"uchar");var e=V(this,"uint"),c=V(this,"uint"),h=V(this,"float",3*e);g=V(this,"uint",3*c);var k=new Uint32Array(e),l=new Float32Array(9*c);b.g=d=new P(9*c);b.h=e=new P(9*c);var m;for(m=0;m<c;m++){var o=3*m,v=g[o],p=g[o+1],w=g[o+2];f.push(v);f.push(p);f.push(w);k[v]+=1;k[p]+=1;k[w]+=1;var o=3*v,u=3*p,D=3*w,F=h[o],x=h[o+1],B=h[o+2],p=h[u],w=h[u+1],v=h[u+
2],z=h[D],J=h[D+1],H=h[D+2];d.add(F,x,B);d.add(p,w,v);d.add(z,J,H);F=new M(F,x,B);z=new M(z,J,H);p=(new M(p,w,v)).f().$a(F);w=z.f().$a(F);p=Yc(p,w).normalize();l[o]+=p.x;l[o+1]+=p.y;l[o+2]+=p.b;l[u]+=p.x;l[u+1]+=p.y;l[u+2]+=p.b;l[D]+=p.x;l[D+1]+=p.y;l[D+2]+=p.b}for(m=0;m<c;m++)o=3*m,v=g[o],p=g[o+1],w=g[o+2],o=3*v,u=3*p,D=3*w,f=new M(l[u],l[u+1],l[u+2]),h=new M(l[D],l[D+1],l[D+2]),o=(new M(l[o],l[o+1],l[o+2])).scale(1/k[v]).normalize(),f=f.scale(1/k[p]).normalize(),h=h.scale(1/k[w]).normalize(),e.add(o.x,
o.y,o.b),e.add(f.x,f.y,f.b),e.add(h.x,h.y,h.b);b.la=sd;G.ta(this.c+".parse");c=new vd;c.aa=b;c.p=a;this.dispatchEvent(c)};C("X.parserFSM",ye);C("X.parserFSM.prototype.parse",ye.prototype.parse);function ze(a){function b(){zc+=8;return gb<Da.length?Da[gb++]:-1}function c(){var a;zc++;a=Ea&1;Ea>>=1;0==Ea&&(Ea=b(),a=Ea&1,Ea=Ea>>1|128);return a}function d(a){for(var b=0,d=a;d--;)b=b<<1|c();a&&(b=H[b]>>8-a);return b}function e(a){x[B++]=a;if(J==w-1){var b=new Uint8Array(2*w);b.set(p);p=b;w*=2}p[J++]=a;32768==B&&(B=0)}function f(){this.ud=this.td=0;this.Be=q}function g(){for(;;){if(hb[wa]>=cd)return-1;if(dd[hb[wa]]==wa)return hb[wa]++;hb[wa]++}}function h(){var a=Ac[Cb],b;if(17==wa)return-1;Cb++;
wa++;b=g();if(0<=b)a.td=b;else if(a.td=32768,h())return-1;b=g();if(0<=b)a.ud=b,a.Be=q;else if(a.ud=32768,a.Be=Ac[Cb],a.jj=Cb,h())return-1;wa--;return 0}function k(a,b,c){Ac=a;Cb=0;dd=c;cd=b;for(a=0;17>a;a++)hb[a]=0;wa=0;return h()?-1:0}function l(a){for(var b,d,e=0,f=a[e];;)if(b=c()){if(!(f.ud&32768))return f.ud;f=f.Be;b=a.length;for(d=0;d<b;d++)if(a[d]===f){e=d;break}}else{if(!(f.td&32768))return f.td;e++;f=a[e]}}function m(){var a,g,h,m,o;do if(a=c(),h=d(2),0==h){Ea=1;h=b();h|=b()<<8;for(b(),b();h--;)g=
b(),e(g)}else if(1==h)for(;;)if(h=H[d(7)]>>1,23<h?(h=h<<1|c(),199<h?(h-=128,h=h<<1|c()):(h-=48,143<h&&(h+=136))):h+=256,256>h)e(h);else if(256==h)break;else{var p;h-=257;o=d(na[h])+ea[h];h=H[d(5)]>>3;8<aa[h]?(p=d(8),p|=d(aa[h]-8)<<8):p=d(aa[h]);p+=oa[h];for(h=0;h<o;h++)g=x[B-p&32767],e(g)}else if(2==h){var u=Array(320);g=257+d(5);p=1+d(5);m=4+d(4);for(h=0;19>h;h++)u[h]=0;for(h=0;h<m;h++)u[Db[h]]=d(3);o=ib.length;for(m=0;m<o;m++)ib[m]=new f;if(k(ib,19,u)){B=0;return}o=g+p;m=0;for(var v=-1;m<o;)if(v++,
h=l(ib),16>h)u[m++]=h;else if(16==h){var w;h=3+d(2);if(m+h>o){B=0;return}for(w=m?u[m-1]:0;h--;)u[m++]=w}else{h=17==h?3+d(3):11+d(7);if(m+h>o){B=0;return}for(;h--;)u[m++]=0}o=Fb.length;for(m=0;m<o;m++)Fb[m]=new f;if(k(Fb,g,u)){B=0;return}o=Fb.length;for(m=0;m<o;m++)ib[m]=new f;h=[];for(m=g;m<u.length;m++)h[m-g]=u[m];if(k(ib,p,h)){B=0;return}for(;;)if(h=l(Fb),256<=h){h-=256;if(0==h)break;h--;o=d(na[h])+ea[h];h=l(ib);8<aa[h]?(p=d(8),p|=d(aa[h]-8)<<8):p=d(aa[h]);for(p+=oa[h];o--;)g=x[B-p&32767],e(g)}else e(h)}while(!a);
B=0;Ea=1}function o(){var a=[],c;u&8&&(a[0]=b(),a[1]=b(),a[2]=b(),a[3]=b(),80==a[0]&&75==a[1]&&7==a[2]&&8==a[3]&&(b(),b(),b(),b()),b(),b(),b(),b(),b(),b(),b(),b());z&&v(Da.byteLength);a[0]=b();if(8==a[0]){u=b();b();b();b();b();b();b();if(u&4){a[0]=b();a[2]=b();wa=a[0]+256*a[1];for(a=0;a<wa;a++)b()}if(u&8){a=0;for(ob=[];c=b();){if("7"==c||":"==c)a=0;a<ed-1&&(ob[a++]=c)}}if(u&16)for(;b(););u&2&&(b(),b());m();b();b();b();b();b();b();b();b();z&&v(Da.byteLength)}}function v(a){w=a;p=new Uint8Array(a);
a=[];z=r;a[0]=b();a[1]=b();120==a[0]&&218==a[1]&&(m(),F[D]=Array(2),F[D][0]=p,F[D][1]="geonext.gxt",D++);31==a[0]&&139==a[1]&&(o(),F[D]=Array(2),F[D][0]=p,F[D][1]="file",D++);if(80==a[0]&&75==a[1]&&(z=n,a[2]=b(),a[3]=b(),3==a[2]&&4==a[3])){a[0]=b();a[1]=b();u=b();u|=b()<<8;a=b();a|=b()<<8;b();b();b();b();b();b();b();b();b();b();b();b();b();b();b();b();var c=b(),c=c|b()<<8,d=b(),d=d|b()<<8,e=0;for(ob=[];c--;){var f=b();"/"==f|":"==f?e=0:e<ed-1&&(ob[e++]=String.fromCharCode(f))}fd||(fd=ob);for(e=0;e<
d;)b(),e++;J=0;8==a&&(m(),F[D]=Array(2),F[D][0]=p,F[D][1]=ob.join(""),D++);o()}}var p=q,w=0,u,D=0,F=[],x=Array(32768),B=0,z=r,J=0,H=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,
22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,
175,111,239,31,159,95,223,63,191,127,255],ea=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],na=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],oa=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],aa=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Db=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Da=a,gb=0,Ea=1,zc=0,ed=256,ob=[],fd,Fb=Array(288),ib=
Array(32),Cb=0,Ac=q,wa=0,hb=Array(17);hb[0]=0;var dd,cd;ze.prototype.Ze=function(){v(Da.byteLength);return p}};function Ae(){U.call(this);this.c="parserMGZ";this.fd=r}E(Ae,U);Ae.prototype.parse=function(a,b,c,d){G.ya(this.c+".parse");var e=c;d&&(e=(new ze(new Uint8Array(c))).Ze(),e=e.buffer);c=this.Qe(e);b.W=[c.Fe,c.Ge,c.He];b.J=c.ng;d=c.min;e=c.max;b.Ja=b.Ob=d;b.za=b.Nb=e;-Infinity==b.da&&(b.da=d);Infinity==b.fa&&(b.fa=e);b.Jc();G.ta(this.c+".parse");b.Ab=Sd(this,b,c);c=new vd;c.aa=b;c.p=a;this.dispatchEvent(c)};
Ae.prototype.Qe=function(a){this.ia=a;a={version:0,ug:0,sg:0,Vg:0,tg:0,Fe:0,Ge:0,He:0,qh:0,type:0,Og:0,eg:0,zi:q,rg:q,ng:q,data:q,min:Infinity,max:-Infinity};a.version=V(this,"uint");a.Fe=V(this,"uint");a.Ge=V(this,"uint");a.He=V(this,"uint");a.qh=V(this,"uint");a.type=V(this,"uint");a.Og=V(this,"uint");a.eg=V(this,"ushort");if(0<a.eg){a.ng=V(this,"float",3);var b=[];b.push(V(this,"float",3));b.push(V(this,"float",3));b.push(V(this,"float",3));b.push(V(this,"float",3));a.rg=b}this.C=284;b=a.Fe*a.Ge*
a.He;switch(a.type){case 0:a.data=V(this,"uchar",b);break;case 1:a.data=V(this,"uint",b);break;case 3:a.data=V(this,"float",b);break;case 4:a.data=V(this,"ushort",b);break;default:i(Error("Unsupported MGH/MGZ data type: "+a.type))}b=Rd(a.data);a.min=b[0];a.max=b[1];this.C+16<this.ia.byteLength&&(a.ug=V(this,"float"),a.Vg=V(this,"float"),a.sg=V(this,"float"),a.tg=V(this,"float"));return a};C("X.parserMGZ",Ae);C("X.parserMGZ.prototype.parse",Ae.prototype.parse);function Be(){U.call(this);this.c="parserCRV";this.fd=r}E(Be,U);
Be.prototype.parse=function(a,b,c){G.ya(this.c+".parse");var d=b.Bc;0==d.length&&i(Error("No _pointIndices defined on the X.object."));this.ia=c;this.C=3;var e=V(this,"uint");V(this,"uint");V(this,"uint");var f=0,g=0,h=0,k=0,l=0,m=0,o=0,v=0,p=0,w=0,u=0,c=Array(2),D=Array(2),F=V(this,"float",e),x;for(x=0;x<e;x++){var B=F[x];0==x&&(c[0]=D[0]=B);0<=B?(f++,k+=B):(g++,h+=B);p+=B;u++;D[0]=Math.max(B,D[0]);c[0]=Math.min(B,c[0]);F[x]=B}0!=f&&(l=k/f);0!=g&&(m=h/g);0!=u&&(w=p/u);for(u=p=h=k=0;u<e;u++)B=F[u],
x=0,0<=B?(x=Math.pow(B-l,2),k+=x):(x=Math.pow(B-m,2),h+=x),x=Math.pow(B-w,2),p+=x;1<f&&(o=Math.sqrt(k/(f-1)));1<g&&(v=Math.sqrt(h/(g-1)));c[1]=m-2.5*v;D[1]=l+2.5*o;e=d.length;f=new Float32Array(3*e);for(u=0;u<e;u++)g=F[d[u]],h=3*u,f[h]=g,f[h+1]=g,f[h+2]=g;b.q.Ja=c[1];b.q.za=D[1];-Infinity==b.q.da&&(b.q.da=c[1]);Infinity==b.q.fa&&(b.q.fa=D[1]);b.q.r=F;b.q.pc=f;b.q.d=n;G.ta(this.c+".parse");d=new vd;d.aa=b;d.p=a;this.dispatchEvent(d)};C("X.parserCRV",Be);C("X.parserCRV.prototype.parse",Be.prototype.parse);function Ce(){U.call(this);this.c="parserTRK"}E(Ce,U);
Ce.prototype.parse=function(a,b,c){G.ya(this.c+".parse");var d=b.g,e=b.h,f=b.S;this.ia=c;V(this,"uchar",6);V(this,"ushort",3);var g=V(this,"float",3);V(this,"float",3);V(this,"ushort");V(this,"uchar",200);V(this,"ushort");V(this,"uchar",200);V(this,"float",16);V(this,"uchar",444);V(this,"uchar",4);V(this,"uchar",4);V(this,"float",6);V(this,"uchar",2);V(this,"uchar");V(this,"uchar");V(this,"uchar");V(this,"uchar");V(this,"uchar");V(this,"uchar");var h=V(this,"uint");V(this,"uint");var k=V(this,"uint"),
l=[],m=[],c=Infinity,o=-Infinity,v=q,p=q,w=q,u=q,e=d=q,D=V(this,"uint",(this.ia.byteLength-1E3)/4);this.C=k;for(var F=V(this,"float",(this.ia.byteLength-1E3)/4),x=0,k=f=0;k<h;k++){for(var B=D[x],z=new P(3*B),J=0,H=0;H<B;H++){var ea=F[x+3*H+1],na=F[x+3*H+2],oa=F[x+3*H+3],ea=ea/g[0],na=na/g[1],oa=oa/g[2];z.add(ea,na,oa);if(0<H)var aa=z.get(H-1),J=J+Math.sqrt(Math.pow(ea-aa[0],2)+Math.pow(na-aa[1],2)+Math.pow(oa-aa[2],2));H<B-1&&(f+=6)}x+=3*B+1;H=z.Gb;B=z.Db;ea=z.Hb;na=z.Eb;oa=z.Ib;aa=z.Fb;if(!v||H<
v)v=H;if(!p||B>p)p=B;if(!w||ea<w)w=ea;if(!u||na>u)u=na;if(!d||oa<d)d=oa;if(!e||aa>e)e=aa;l.push(z);m.push(J)}g=(v+p)/2;w=(w+u)/2;v=(d+e)/2;u=new Float32Array(f);b.g=d=new P(f);b.h=e=new P(f);b.S=f=new P(f);for(k=p=0;k<h;k++){D=l[k];F=D.count;J=m[k];c=Math.min(c,J);o=Math.max(o,J);for(H=0;H<F-1;H++){z=D.get(H);x=D.get(H+1);d.add(z[0],z[1],z[2]);d.add(x[0],x[1],x[2]);var B=z[0]-g,ea=z[1]-w,na=z[2]-v,oa=Math.sqrt(B*B+ea*ea+na*na),aa=x[0]-g,Db=x[1]-w,Da=x[2]-v,gb=Math.sqrt(aa*aa+Db*Db+Da*Da);e.add(B/
oa,ea/oa,na/oa);e.add(aa/gb,Db/gb,Da/gb);x=[Math.abs(x[0]-z[0]),Math.abs(x[1]-z[1]),Math.abs(x[2]-z[2])];z=Math.sqrt(x[0]*x[0]+x[1]*x[1]+x[2]*x[2]);x[0]/=z;x[1]/=z;x[2]/=z;f.add(x[0],x[1],x[2]);f.add(x[0],x[1],x[2]);u[p++]=J;u[p++]=J;u[p++]=J;u[p++]=J;u[p++]=J;u[p++]=J}}b.la="LINES";h=new ud;h.Ja=c;h.za=o;h.da=c;h.fa=o;h.pc=u;h.pf=r;h.d=n;b.q=h;G.ta(this.c+".parse");c=new vd;c.aa=b;c.p=a;this.dispatchEvent(c)};C("X.parserTRK",Ce);C("X.parserTRK.prototype.parse",Ce.prototype.parse);function De(){U.call(this);this.c="parserIMAGE"}E(De,U);De.prototype.parse=function(a,b,c,d){c instanceof ArrayBuffer||i(Error());for(var e=new Uint8Array(c),f=e.length,g=Array(f);f--;)g[f]=String.fromCharCode(e[f]);e=window.btoa(g.join(""));f=new Image;wc(f,"load",this.Ih.bind(this,f,a,b,c,d));f.src="data:image/"+d+";base64,"+e};De.prototype.Ih=function(a,b,c){b.Ab=a;b.Ta=q;a=new vd;a.aa=c;a.p=b;this.dispatchEvent(a)};C("X.parserIMAGE",De);C("X.parserIMAGE.prototype.parse",De.prototype.parse);function Ee(){U.call(this);this.c="parserLUT"}E(Ee,U);
Ee.prototype.parse=function(a,b,c){G.ya(this.c+".parse");this.ia=c;var c=V(this,"uchar",c.byteLength),d=c.length,e=0,f;for(f=0;f<d;f++)if(10==c[f]){var g=String.fromCharCode.apply(q,c.subarray(e,f)),e=f+1,g=g.replace(/^\s+|\s+$/g,"");"#"!=g[0]&&(g=g.split(" "),g=g.filter(function(a){return""!=a}),6==g.length&&(g[2]=parseInt(g[2],10)/255,g[3]=parseInt(g[3],10)/255,g[4]=parseInt(g[4],10)/255,g[5]=parseInt(g[5],10)/255,a.add(parseInt(g[0],10),g[1],g[2],g[3],g[4],g[5],10)))}G.ta(this.c+".parse");c=new vd;
c.aa=b;c.p=a;this.dispatchEvent(c)};C("X.parserLUT",Ee);C("X.parserLUT.prototype.parse",Ee.prototype.parse);function Fe(){U.call(this);this.c="parserNRRD"}E(Fe,U);
Fe.prototype.parse=function(a,b,c){G.ya(this.c+".parse");this.ia=c;var c=V(this,"uchar",c.byteLength),d=c.length,e=q,f=0,g;for(g=1;g<d;g++)if(10==c[g-1]&&10==c[g]){e=String.fromCharCode.apply(q,c.subarray(0,g-2));f=g+1;break}var h,k,l,m,d=e.split(/\r?\n/);for(e=0,g=d.length;e<g;e++)if(h=d[e],h.match(/NRRD\d+/))this.mh=n;else if(!h.match(/^#/)&&(m=h.match(/(.*):(.*)/)))k=m[1].trim(),h=m[2].trim(),(l=this.Rg[k])?l.call(this,h):this[k]=h;this.mh||i(Error("Not an NRRD file"));"raw"!==this.encoding&&"gzip"!==
this.encoding&&"gz"!==this.encoding&&i(Error("Only raw or gz/gzip encoding is allowed"));if(!this.xa&&(this.xa=[new M(1,0,0),new M(0,1,0),new M(0,0,1)],this.Ve)){d=[];for(m=0;2>=m;m++)d.push(!isNaN(this.Ve[m])?this.xa[m].scale(this.Ve[m]):j)}f=c.subarray(f);if("gzip"==this.encoding||"gz"==this.encoding)f=(new ze(f)).Ze();f=f.buffer;c={data:q,min:Infinity,max:-Infinity};c.data=new this.vb(f);m=Rd(c.data);f=c.min=m[0];m=c.max=m[1];b.W=[this.Te[0],this.Te[1],this.Te[2]];b.J=[(new M(this.xa[0][0],this.xa[0][1],
this.xa[0][2])).Ub(),(new M(this.xa[1][0],this.xa[1][1],this.xa[1][2])).Ub(),(new M(this.xa[2][0],this.xa[2][1],this.xa[2][2])).Ub()];b.Ja=b.Ob=f;b.za=b.Nb=m;-Infinity==b.da&&(b.da=f);Infinity==b.fa&&(b.fa=m);b.Jc();G.ta(this.c+".parse");b.Ab=Sd(this,b,c);c=new vd;c.aa=b;c.p=a;this.dispatchEvent(c)};
Fe.prototype.Rg={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.vb=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.vb=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.vb=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.vb=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.vb=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.vb=Uint32Array;break;case "float":this.vb=Float32Array;break;default:i(Error("Unsupported NRRD data type: "+a))}return this.type=a},endian:function(a){return a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.sb=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.Te=e},"space directions":function(a){var b,
c,d;c=a.match(/\(.*?\)/g);return this.xa=function(){var a,f,g;g=[];for(a=0,f=c.length;a<f;a++)d=c[a],g.push(function(){var a,c,e,f;e=d.slice(1,-1).split(/,/);f=[];for(a=0,c=e.length;a<c;a++)b=e[a],f.push(parseFloat(b));return f}());return g}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.Ve=e}};C("X.parserNRRD",Fe);C("X.parserNRRD.prototype.parse",Fe.prototype.parse);function Ge(){U.call(this);this.c="parserNII"}E(Ge,U);Ge.prototype.parse=function(a,b,c){G.ya(this.c+".parse");var d=c;348!=(new Uint32Array(c,0,1))[0]&&(d=(new ze(new Uint8Array(c))).Ze(),d=d.buffer);c=this.Qe(d);b.W=[c.sb[1],c.sb[2],c.sb[3]];b.J=[c.Id[1],c.Id[2],c.Id[3]];var d=c.min,e=c.max;b.Ja=b.Ob=d;b.za=b.Nb=e;-Infinity==b.da&&(b.da=d);Infinity==b.fa&&(b.fa=e);b.Jc();G.ta(this.c+".parse");b.Ab=Sd(this,b,c);c=new vd;c.aa=b;c.p=a;this.dispatchEvent(c)};
Ge.prototype.Qe=function(a){this.ia=a;a={di:0,Ig:q,Jg:q,Qg:0,Yh:0,Rh:0,Mg:q,sb:q,hh:0,ih:0,jh:0,fh:0,se:0,Eg:0,hi:0,Id:q,og:0,Xh:0,Wh:0,gi:0,ei:q,vi:q,Fg:0,Gg:0,fi:0,oi:0,Xg:0,Yg:0,Lg:q,Dg:q,Kh:0,bi:0,Oh:0,Ph:0,Qh:0,Lh:0,Mh:0,Nh:0,ii:q,ji:q,ki:q,gh:q,nh:q,data:q,min:Infinity,max:-Infinity};a.di=V(this,"uint");a.Ig=V(this,"uchar",10);a.Jg=V(this,"uchar",18);a.Qg=V(this,"uint");a.Yh=V(this,"ushort");a.Rh=V(this,"uchar");a.Mg=V(this,"uchar");a.sb=V(this,"ushort",8);a.hh=V(this,"float");a.ih=V(this,"float");
a.jh=V(this,"float");a.fh=V(this,"ushort");a.se=V(this,"ushort");a.Eg=V(this,"ushort");a.hi=V(this,"ushort");a.Id=V(this,"float",8);a.og=V(this,"float");a.Xh=V(this,"float");a.Wh=V(this,"float");a.gi=V(this,"ushort");a.ei=V(this,"uchar");a.vi=V(this,"uchar");a.Fg=V(this,"float");a.Gg=V(this,"float");a.fi=V(this,"float");a.oi=V(this,"float");a.Xg=V(this,"uint",1);a.Yg=V(this,"uint",1);a.Lg=V(this,"uchar",80);a.Dg=V(this,"uchar",24);a.Kh=V(this,"ushort");a.bi=V(this,"ushort");a.Oh=V(this,"float");a.Ph=
V(this,"float");a.Qh=V(this,"float");a.Lh=V(this,"float");a.Mh=V(this,"float");a.Nh=V(this,"float");a.ii=V(this,"float",4);a.ji=V(this,"float",4);a.ki=V(this,"float",4);a.gh=V(this,"uchar",16);a.nh=V(this,"uchar",4);this.C=parseInt(a.og,10);var b=a.sb[1]*a.sb[2]*a.sb[3];switch(a.se){case 2:a.data=V(this,"uchar",b);break;case 4:a.data=V(this,"sshort",b);break;case 8:a.data=V(this,"sint",b);break;case 16:a.data=V(this,"float",b);break;case 256:a.data=V(this,"schar",b);break;case 512:a.data=V(this,"ushort",
b);break;case 768:a.data=V(this,"uint",b);break;default:i(Error("Unsupported NII data type: "+a.se))}b=Rd(a.data);a.min=b[0];a.max=b[1];return a};C("X.parserNII",Ge);C("X.parserNII.prototype.parse",Ge.prototype.parse);function He(){L.call(this);this.c="loader";this.tc=new Sb;this.Dc=0}E(He,L);function Ie(a,b){a.Dc+=b/a.tc.ma()/3;a.Dc=Math.min(1,a.Dc);var c=new Qd;c.qf=a.Dc;a.dispatchEvent(c)}function Je(a){var a=a.t.ce,b=a.split(".").pop().toUpperCase();b in Ke||i(Error("The "+b+" file format is not supported."));return[a,b,Ke[b][0],Ke[b][1],Ke[b][2]]}
He.prototype.load=function(a,b){(!a||!b)&&i(Error("No container or object to load."));if(!Ub(this.tc.w,a.ua)){this.tc.set(a.ua,r);var c=Je(a)[0];if(a.dd!=q)this.parse(q,a,b);else{var d=new XMLHttpRequest;K(d,"abort",this.Cf.bind(this,d,a,b));K(d,"error",this.Cf.bind(this,d,a,b));K(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,n);d.responseType="arraybuffer";d.send(q)}}};
He.prototype.parse=function(a,b,c){Ie(this,1);setTimeout(function(){var d=Je(b),e=d[3],d=new d[2];wc(d,Ec,this.complete.bind(this));var f=b.dd;f==q&&(f=a.response);d.parse(b,c,f,e)}.bind(this),100)};He.prototype.complete=function(a){Ie(this,1);setTimeout(function(){var b=a.p,c=a.aa;b.t.d=r;b.d=n;c.B();this.tc.set(b.ua,n)}.bind(this),100)};He.prototype.Cf=function(a,b,c){i(Error("Loading failed: ",b,c))};
var Ke={STL:[ve,q],VTK:[we,q],TRK:[Ce,q],FSM:[ye,q],INFLATED:[ye,q],SMOOTHWM:[ye,q],SPHERE:[ye,q],PIAL:[ye,q],ORIG:[ye,q],NRRD:[Fe,q],NII:[Ge,q],GZ:[Ge,q],CRV:[Be,q],LABEL:[Vd,q],MGH:[Ae,r],MGZ:[Ae,n],TXT:[Ee,q],LUT:[Ee,q],PNG:[De,"png"],JPG:[De,"jpeg"],JPEG:[De,"jpeg"],GIF:[De,"gif"]};function Z(a,b){(!A(a)||!A(b))&&i(Error("A camera needs valid width and height values."));L.call(this);this.c="camera";this.ka=new M(0,0,100);this.$b=new M(0,0,0);this.D=new M(0,1,0);this.l=this.Gd(this.ka,this.$b);this.zb=new Float32Array(this.l.M())}E(Z,L);Z.prototype.Ke=function(a){(!y(a)||!(a instanceof W))&&i(Error("Could not observe the interactor."));K(a,Bd,this.Ch.bind(this));K(a,Dd,this.Hh.bind(this))};
Z.prototype.Hh=function(a){a instanceof Ld||i(Error("Received no valid zoom event."));a.Bb?this.pg(a.bb):this.qg(a.bb)};Z.prototype.Ch=function(a){a instanceof Jd||i(Error("Received no valid pan event."));this.ag(a.P)};Z.prototype.__defineGetter__("view",s("l"));Z.prototype.__defineSetter__("view",function(a){(!y(a)||!(a instanceof O))&&i(Error("Invalid view matrix."));this.l=a;this.zb=new Float32Array(this.l.M())});Z.prototype.__defineGetter__("position",function(){return[this.ka.x,this.ka.y,this.ka.b]});
Z.prototype.__defineSetter__("position",function(a){(!y(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid position."));this.ka=new M(a[0],a[1],a[2]);this.reset()});Z.prototype.__defineGetter__("focus",function(){return[this.$b.x,this.$b.y,this.$b.b]});Z.prototype.__defineSetter__("focus",function(a){(!y(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid focus"));this.$b=new M(a[0],a[1],a[2]);this.reset()});Z.prototype.__defineGetter__("up",function(){return[this.D.x,this.D.y,this.D.b]});
Z.prototype.__defineSetter__("up",function(a){(!y(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid up vector."));this.D=new M(a[0],a[1],a[2]);this.reset()});t=Z.prototype;t.reset=function(){this.l=this.Gd(this.ka,this.$b);this.zb=new Float32Array(this.l.M())};t.ag=function(a){a instanceof Array&&2==a.length?a=new ad(a[0],a[1]):a instanceof ad||i(Error("Invalid distance vector for pan operation."));a=new M(-a.x,a.y,0);a=od(4).translate(a);this.l=new O(a.multiply(this.l));this.zb=new Float32Array(this.l.M())};
t.pg=function(a){var b=20;y(a)&&!a&&(b=1);a=new M(0,0,b);a=od(4).translate(a);this.l=new O(a.multiply(this.l));this.zb=new Float32Array(this.l.M())};t.qg=function(a){var b=30;y(a)&&!a&&(b=1);a=new M(0,0,-b);a=od(4).translate(a);this.l=new O(a.multiply(this.l));this.zb=new Float32Array(this.l.M())};t.Gd=function(a,b){(!(a instanceof M)||!(b instanceof M))&&i(Error("3D vectors required for calculating the view."));return od(4)};C("X.camera",Z);C("X.camera.prototype.pan",Z.prototype.ag);
C("X.camera.prototype.zoomIn",Z.prototype.pg);C("X.camera.prototype.zoomOut",Z.prototype.qg);function Le(a){function b(a,b,d){b=2*b*Math.PI;b=k.ub(Math.cos(b)).ic(l.ub(Math.sin(b)));a=c.ic(e.ub(a)).ic(b.ub(f));d=b.ub(1-Math.abs(d)).ic(g.ub(d));return new Kc(a,d)}this.u=[];for(var a=a||{},c=new Aa(a.start||[0,-1,0]),d=new Aa(a.end||[0,1,0]),e=d.Sc(c),f=a.Na||1,a=a.Ue||16,g=e.Yc(),h=0.5<Math.abs(g.y()),k=(new Aa(h,!h,0)).qe(g).Yc(),l=k.qe(g).Yc(),h=new Kc(c,g.Ie()),d=new Kc(d,g.Yc()),m=[],o=0;o<a;o++){var v=o/a,p=(o+1)/a;m.push(new Mc([h,b(0,v,-1),b(0,p,-1)]));m.push(new Mc([b(0,p,0),b(0,v,
0),b(1,v,0),b(1,p,0)]));m.push(new Mc([d,b(1,p,1),b(1,v,1)]))}return Pc(m)}E(Le,Oc);function Me(){T.call(this);this.c="cylinder";this.he=[-10,-10,-10];this.Rd=[10,10,10];this.Jb=10;this.Kb=32;Ba(this,new xd)}E(Me,T);Me.prototype.__defineGetter__("start",s("he"));Me.prototype.__defineSetter__("start",function(a){(!y(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid start"));this.he=a});Me.prototype.__defineGetter__("end",s("Rd"));Me.prototype.__defineSetter__("end",function(a){(!y(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid end"));this.Rd=a});
Me.prototype.__defineGetter__("radius",s("Jb"));Me.prototype.__defineSetter__("radius",function(a){A(a)||i(Error("Invalid radius."));this.Jb=a});Me.prototype.B=function(){zd(this,new Le({start:this.he,end:this.Rd,Na:this.Jb,Ue:this.Kb}));Me.j.B.call(this)};C("X.cylinder",Me);C("X.cylinder.prototype.modified",Me.prototype.B);function Ne(a){function b(a,b){var a=a*2*Math.PI,b=b*Math.PI,e=new Aa(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));g.push(new Kc(c.ic(e.ub(d)),e))}this.u=[];for(var a=a||{},c=new Aa(a.me||[0,0,0]),d=a.Na||1,e=a.Ue||16,a=a.li||8,f=[],g=[],h=0;h<e;h++)for(var k=0;k<a;k++)g=[],b(h/e,k/a),0<k&&b((h+1)/e,k/a),k<a-1&&b((h+1)/e,(k+1)/a),b(h/e,(k+1)/a),f.push(new Mc(g));return Pc(f)}E(Ne,Oc);function Oe(){T.call(this);this.c="sphere";this.k=[0,0,0];this.Jb=5;this.Kb=32;this.Bg=16;Ba(this,new xd)}E(Oe,T);Oe.prototype.__defineGetter__("center",s("k"));Oe.prototype.__defineSetter__("center",function(a){(!y(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center"));this.k=a});Oe.prototype.__defineGetter__("radius",s("Jb"));Oe.prototype.__defineSetter__("radius",function(a){A(a)||i(Error("Invalid radius."));this.Jb=a});
Oe.prototype.B=function(){zd(this,new Ne({me:this.k,Na:this.Jb,Ue:this.Kb,li:this.Bg}));Oe.j.B.call(this)};C("X.sphere",Oe);C("X.sphere.prototype.modified",Oe.prototype.B);function ue(a){Y.call(this);this.c="labelmap";this.Ya=a}E(ue,Y);ue.prototype.B=function(){var a=new vd;a.aa=this;this.dispatchEvent(a);this.Ya.B()};C("X.labelmap",ue);function Pe(a){this.u=[];var a=a||{},b=new Aa(a.me||[0,0,0]),c=!a.Na?[1,1,1]:a.Na.length?a.Na:[a.Na,a.Na,a.Na];return Pc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Mc(a[0].map(function(e){e=new Aa(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.b()+c[2]*(2*!!(e&4)-1));return new Kc(e,new Aa(a[1]))}))}))}E(Pe,Oc);function Qe(){T.call(this);this.c="cube";this.k=[0,0,0];this.Xd=this.Wd=this.Vd=20;this.Lb=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Ba(this,new xd)}E(Qe,T);Qe.prototype.__defineGetter__("center",s("k"));Qe.prototype.__defineSetter__("center",function(a){(!y(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center"));this.k=a});Qe.prototype.__defineGetter__("lengthX",s("Vd"));
Qe.prototype.__defineSetter__("lengthX",function(a){A(a)||i(Error("Invalid lengthX."));this.Vd=a});Qe.prototype.__defineGetter__("lengthY",s("Wd"));Qe.prototype.__defineSetter__("lengthY",function(a){A(a)||i(Error("Invalid lengthY."));this.Wd=a});Qe.prototype.__defineGetter__("lengthZ",s("Xd"));Qe.prototype.__defineSetter__("lengthZ",function(a){A(a)||i(Error("Invalid lengthZ."));this.Xd=a});Qe.prototype.B=function(){zd(this,new Pe({me:this.k,Na:[this.Vd/2,this.Wd/2,this.Xd/2]}));Qe.j.B.call(this)};
C("X.cube",Qe);C("X.cube.prototype.modified",Qe.prototype.B);function Re(a){W.call(this,a);this.c="interactor3D"}E(Re,W);Re.prototype.Tc=function(a){Re.j.Tc.call(this,a);var b=new Ld;y(a.ec)||(a.ec=0);b.Bb=0>a.ec;b.bb=n;this.dispatchEvent(b)};function Se(a){L.call(this);this.c="array";this.r=[];this.cf=a}E(Se,L);Se.prototype.add=function(a){this.r.push(a);return n};Se.prototype.clear=function(){this.r.length=0};function Te(a,b,c){var d=c-b;if(!(2>d)){d=b+Math.floor(d/2);Te(a,b,d);for(Te(a,d,c);b<d;++b)if(0<a.cf(a.r[b],a.r[d])){var e=a.r[b];a.r[b]=a.r[d];for(var f=a,g=d,h=c;g+1<h&&0>f.cf(f.r[g+1],e);){var k=f,l=g+1,m=k.r[g];k.r[g]=k.r[l];k.r[l]=m;++g}f.r[g]=e}}}Se.prototype.sort=function(){Te(this,0,this.r.length)};function Ue(a,b){Z.call(this,a,b);this.c="camera2D"}E(Ue,Z);function Ve(a,b){Z.call(this,a,b);this.c="camera3D";this.df=45;this.mf=new Float32Array(We(this.df,a/b).M())}E(Ve,Z);Ve.prototype.Ke=function(a){Ve.j.Ke.call(this,a);K(a,Cd,this.Fh.bind(this))};Ve.prototype.Fh=function(a){a instanceof Kd||i(Error("Received no valid rotate event."));this.rotate(a.P)};function We(a,b){var c=1*Math.tan(a*Math.PI/360),d=-c;return new O([[2/(c*b-d*b),0,(c*b+d*b)/(c*b-d*b),0],[0,2/(c-d),(c+d)/(c-d),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]])}
Ve.prototype.rotate=function(a){a instanceof Array&&2==a.length?a=new ad(a[0],a[1]):a instanceof ad||i(Error("Invalid distance vector for rotate operation."));var b=-a.x/5*Math.PI/180,a=-a.y/5*Math.PI/180,c=od(4),d=new M(parseFloat(this.l.N(0,0)),parseFloat(this.l.N(0,1)),parseFloat(this.l.N(0,2))),b=c.rotate(b,new M(parseFloat(this.l.N(1,0)),parseFloat(this.l.N(1,1)),parseFloat(this.l.N(1,2)))),a=c.rotate(a,d);this.l=new O(this.l.multiply(a.multiply(b)));this.zb=new Float32Array(this.l.M())};
Ve.prototype.Gd=function(a,b){Ve.j.Gd.call(this,a,b);var c=od(4),d=new M(a.x-b.x,a.y-b.y,a.b-b.b),d=d.normalize(),e=this.D.f();e.Kc(d)&&(e.b+=1.0E-6);var f=Yc(e,d),e=Yc(d,f),f=f.normalize(),e=e.normalize();N(c,0,0,f.x);N(c,0,1,f.y);N(c,0,2,f.b);N(c,0,3,0);N(c,1,0,e.x);N(c,1,1,e.y);N(c,1,2,e.b);N(c,1,3,0);N(c,2,0,d.x);N(c,2,1,d.y);N(c,2,2,d.b);N(c,2,3,0);N(c,3,0,0);N(c,3,1,0);N(c,3,2,0);N(c,3,3,1);d=a.f();return c.translate(d.R())};C("X.camera3D",Ve);C("X.camera3D.prototype.rotate",Ve.prototype.rotate);function Xe(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Xe.prototype.f=function(){return new Xe(this.top,this.right,this.bottom,this.left)};Xe.prototype.contains=function(a){return!this||!a?r:a instanceof Xe?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Ye(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Ye.prototype.f=function(){return new Ye(this.left,this.top,this.width,this.height)};Ye.prototype.Lf=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,n}return r};
Ye.prototype.contains=function(a){return a instanceof Ye?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};Ye.prototype.na=function(){return new bd(this.width,this.height)};function Ze(a,b){var c=ce(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,q))?c[b]||c.getPropertyValue(b):""}function $e(a,b){return a.currentStyle?a.currentStyle[b]:q}function af(a,b){return Ze(a,b)||$e(a,b)||a.style&&a.style[b]}function bf(a){a=a?9==a.nodeType?a:ce(a):document;return I&&!rb(9)&&!oe(ae(a))?a.body:a.documentElement}
function cf(a){var b=a.getBoundingClientRect();I&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function df(a){if(I&&!rb(8))return a.offsetParent;for(var b=ce(a),c=af(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=af(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return q}
function ef(a){for(var b=new Xe(0,Infinity,Infinity,0),c=ae(a),d=c.I.body,e=c.I.documentElement,f=!Ya&&"CSS1Compat"==c.I.compatMode?c.I.documentElement:c.I.body;a=df(a);)if((!I||0!=a.clientWidth)&&(!Ya||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=af(a,"overflow")){var g=ff(a),h;h=a;if(Xa&&!pb("1.9")){var k=parseFloat(Ze(h,"borderLeftWidth"));if(gf(h))var l=h.offsetWidth-h.clientWidth-k-parseFloat(Ze(h,"borderRightWidth")),k=k+l;h=new Zc(k,parseFloat(Ze(h,"borderTopWidth")))}else h=new Zc(h.clientLeft,
h.clientTop);g.x+=h.x;g.y+=h.y;b.top=Math.max(b.top,g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.I.parentWindow||c.I.defaultView||window;e=c.document;Ya&&!pb("500")&&!$a?("undefined"==typeof c.innerHeight&&(c=window),e=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<e&&(e-=15),c=new bd(c.innerWidth,e)):(c="CSS1Compat"==
e.compatMode?e.documentElement:e.body,c=new bd(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:q}
function ff(a){var b,c=ce(a),d=af(a,"position"),e=Xa&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new Zc(0,0),g=bf(c);if(a==g)return f;if(a.getBoundingClientRect)b=cf(a),a=pe(ae(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);
if(Ya&&"fixed"==af(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Wa||Ya&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=df(b))&&b!=c.body&&b!=g;)if(f.x-=b.scrollLeft,!Wa||"TR"!=b.tagName)f.y-=b.scrollTop}return f}function hf(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function jf(a){if("none"!=af(a,"display"))return kf(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=kf(a);b.display=c;b.position=e;b.visibility=d;return a}function kf(a){var b=a.offsetWidth,c=a.offsetHeight,d=Ya&&!b&&!c;return(!ha(b)||d)&&a.getBoundingClientRect?(a=cf(a),new bd(a.right-a.left,a.bottom-a.top)):new bd(b,c)}function lf(a,b){a.style.display=b?"":"none"}function gf(a){return"rtl"==af(a,"direction")}
function mf(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}var nf={thin:2,medium:4,thick:6};function of(a,b){if("none"==$e(a,b+"Style"))return 0;var c=$e(a,b+"Width");return c in nf?nf[c]:mf(a,c)};function pf(a){this.Ea=a;this.s=[]}E(pf,Zb);var qf=[];function rf(a,b,c,d,e){ia(c)||(qf[0]=c,c=qf);for(var f=0;f<c.length;f++)a.s.push(K(b,c[f],d||a,e||r,a.Ea||a))}pf.prototype.Kd=function(){zb(this.s,yc);this.s.length=0};pf.prototype.H=function(){pf.j.H.call(this);this.Kd()};pf.prototype.handleEvent=function(){i(Error("EventHandler.handleEvent not implemented"))};function sf(){}(function(a){a.Df=function(){return a.eh||(a.eh=new a)}})(sf);sf.prototype.Je=0;sf.Df();function tf(a){this.La=a||ae()}E(tf,Jc);t=tf.prototype;t.bh=sf.Df();t.Kf=q;t.Tb=r;t.n=q;t.hc=q;t.vd=q;t.Ic=q;t.ui=r;t.i=s("n");t.Se=function(a){this.hc&&this.hc!=a&&i(Error("Method not supported"));tf.j.Se.call(this,a)};t.zd=s("La");t.dc=function(){this.n=this.La.createElement("div")};t.Wb=function(a){this.tb(a)};t.tb=function(a,b){this.Tb&&i(Error("Component already rendered"));this.n||this.dc();a?a.insertBefore(this.n,b||q):this.La.I.body.appendChild(this.n);(!this.hc||this.hc.Tb)&&this.yd()};
t.yd=function(){this.Tb=n;uf(this,function(a){!a.Tb&&a.i()&&a.yd()})};t.Mc=function(){uf(this,function(a){a.Tb&&a.Mc()});this.Dd&&this.Dd.Kd();this.Tb=r};t.H=function(){tf.j.H.call(this);this.Tb&&this.Mc();this.Dd&&(this.Dd.Da(),delete this.Dd);uf(this,function(a){a.Da()});!this.ui&&this.n&&ke(this.n);this.hc=this.n=this.Ic=this.vd=q};function uf(a,b){a.vd&&zb(a.vd,b,j)}
t.removeChild=function(a,b){if(a){var c=ka(a)?a:a.Kf||(a.Kf=":"+(a.bh.Je++).toString(36)),a=this.Ic&&c?(c in this.Ic?this.Ic[c]:j)||q:q;if(c&&a){var d=this.Ic;c in d&&delete d[c];Hb(this.vd,a);b&&(a.Mc(),a.n&&ke(a.n));c=a;c==q&&i(Error("Unable to set parent component"));c.hc=q;tf.j.Se.call(c,q)}}a||i(Error("Child is not in parent component"));return a};function vf(){}E(vf,Jc);t=vf.prototype;t.$e=0;t.Rc=0;t.Ee=100;t.Bf=0;t.We=1;t.lh=r;t.ph=r;t.Nd=function(a){a=wf(this,a);this.$e!=a&&(this.$e=a+this.Bf>this.Ee?this.Ee-this.Bf:a<this.Rc?this.Rc:a,!this.lh&&!this.ph&&this.dispatchEvent("change"))};t.Cd=function(){return wf(this,this.$e)};t.Bd=function(){return wf(this,this.Rc)};t.Ad=function(){return wf(this,this.Ee)};function wf(a,b){return a.We==q?b:a.Rc+Math.round((b-a.Rc)/a.We)*a.We};function xf(a){this.La=a||ae();this.jc=new vf;K(this.jc,"change",this.Zg,r,this)}E(xf,tf);var yf={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};t=xf.prototype;t.dc=function(){this.Ha=this.zd().dc("div","progress-bar-thumb");var a=yf[this.$f];this.n=this.zd().dc("div",a,this.Ha);zf(this);this.i().setAttribute("aria-valuemin",this.Bd());this.i().setAttribute("aria-valuemax",this.Ad())};
t.yd=function(){xf.j.yd.call(this);I&&7>db&&K(this.i(),"resize",this.Pd,r,this);this.Pd();var a=this.i();a.setAttribute("role","progressbar");a.mj="progressbar";this.i().setAttribute("aria-live","polite")};t.Mc=function(){xf.j.Mc.call(this);Af(this)};function Af(a){I&&7>db&&xc(a.i(),"resize",a.Pd,r,a)}t.Cd=function(){return this.jc.Cd()};t.Nd=function(a){this.jc.Nd(a);this.i()&&zf(this)};function zf(a){var b=a.Cd();a.i().setAttribute("aria-valuenow",b)}t.Bd=function(){return this.jc.Bd()};t.Ad=function(){return this.jc.Ad()};
t.$f="horizontal";t.Zg=function(){this.Pd();this.dispatchEvent("change")};t.Pd=function(){if(this.Ha){var a=this.Bd(),b=this.Ad(),a=(this.Cd()-a)/(b-a),b=Math.round(100*a);"vertical"==this.$f?I&&7>db?(this.Ha.style.top=0,this.Ha.style.height="100%",b=this.Ha.offsetHeight,a=Math.round(a*b),this.Ha.style.top=b-a+"px",this.Ha.style.height=a+"px"):(this.Ha.style.top=100-b+"%",this.Ha.style.height=b+"%"):this.Ha.style.width=b+"%"}};t.H=function(){Af(this);xf.j.H.call(this);this.Ha=q;this.jc.Da()};function Bf(a,b){y(a)||i(Error("No valid parent element."));y(b)||i(Error("Invalid initial value."));xf.call(this);this.c="progressbar";this.va=a;this.cd=this.Xa=q;this.xb=[];this.xb=[".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n  background: white;\n  padding: 1px;\n  overflow: hidden;\n  margin: 2px;\n  width: 100px;\n  height: 5px;\n}",".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n  overflow: hidden;\n  width: 0%;\n  height: 100%;\n}",
".progress-bar-thumb-done {\n  background: #57E964;\n}"];this.Nd(b);this.ze()}E(Bf,xf);
Bf.prototype.ze=function(){if("static"==this.va.style.position||""==this.va.style.position)this.va.style.position="relative";var a=document.getElementsByTagName("head")[0],b=ge("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.xb[0]),d=document.createTextNode(this.xb[1]),e=document.createTextNode(this.xb[2]);a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.Xa=b;this.Wb(this.va);a=this.i();a.style.position="absolute";a.style.top=(this.va.clientHeight-
5)/2;a.style.left=(this.va.clientWidth-100)/2;a.classList.add("xtk-progress-bar")};function Cf(a){var b=a.i().style.top,c=a.i().style.left;ke(a.i());var d=new Bf(a.va,100),e=d.i();e.style.position="absolute";e.style.top=b;e.style.left=c;e.classList.add("xtk-progress-bar");(e.firstElementChild!=j?e.firstElementChild:me(e.firstChild)).classList.add("progress-bar-thumb-done");a.cd=d}Bf.prototype.Ce=function(){this.Xa&&ke(this.Xa);this.i()&&ke(this.i());this.cd&&ke(this.cd.i());this.cd=this.Xa=q};var Df=da.window;function Ef(a,b,c){la(a)?c&&(a=va(a,c)):a&&"function"==typeof a.handleEvent?a=va(a.handleEvent,a):i(Error("Invalid listener argument"));return 2147483647<b?-1:Df.setTimeout(a,b||0)};function Ff(){L.call(this);this.c="renderer";this.p=window.document.body;this.F=this.p.clientWidth;this.A=this.p.clientHeight;this.Cb=this.o=this.Z=q;this.Ra=new Se(wd);this.pb=[];this.U=q;this.be=this.gd=this.hd=r;this.a=this.Ka=q;this.O={PROGRESSBAR_ENABLED:n};window.console.log("XTK Release pre8 -- 08/17/12 -- http://www.goXTK.com -- @goXTK")}E(Ff,L);t=Ff.prototype;t.Dh=function(a){this.Ka&&this.Ka.Nd(100*a.qf)};t.th=function(a){y(a)&&a instanceof vd&&this.Oa(a.aa)};
t.Ne=function(a){(!y(a)||!(a instanceof Nd))&&i(Error("Invalid hover event."))};t.Eh=function(){var a=de(this.p);this.F=a.clientWidth;this.A=a.clientHeight;a=de(this.Z);a.width=this.F;a.height=this.A;this instanceof Gf&&(this.a.viewport(0,0,this.F,this.A),this.o.mf=new Float32Array(We(this.o.df,this.Z.width/this.Z.height).M()));this.lc()};t.Oe=function(a){(!y(a)||!(a instanceof Md))&&i(Error("Invalid scroll event."))};Ff.prototype.__defineGetter__("config",s("O"));
Ff.prototype.__defineGetter__("interactor",s("Cb"));Ff.prototype.__defineGetter__("camera",s("o"));Ff.prototype.__defineGetter__("loadingCompleted",s("gd"));Ff.prototype.__defineGetter__("container",s("p"));Ff.prototype.__defineSetter__("container",function(a){y(a)||i(Error("An ID to a valid container (<div>..) is required."));var b=a;ka(b)&&(b=de(a));pa(b)&&1==b.nodeType||i(Error("Could not find the given container."));this.p=b});t=Ff.prototype;t.lc=function(){this.o.reset()};
function Hf(a){a.O.PROGRESSBAR_ENABLED&&a.Ka&&!a.bf&&(Cf(a.Ka),a.bf=Ef(function(){this.bf=q;this.Ka&&(this.Ka.Ce(),this.Ka=q);this.Wb()}.bind(a),700))}
t.ca=function(a){var b=ge("canvas");this.p.appendChild(b);this.F=this.p.clientWidth;this.A=this.p.clientHeight;b.width=this.F;b.height=this.A;try{var c=b.getContext(a);c||i(Error())}catch(d){var e="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..';this.p.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+e+"</p>";
i(Error(e))}this.U=new He;K(this.U,Gd,this.Dh.bind(this));this.Z=b;this.a=c;b=new Re(this.Z);"2d"==a&&(b=new re(this.Z));b.ca();K(b,Fd,this.lc.bind(this));K(b,Hd,this.Ne.bind(this));K(b,Ed,this.Oe.bind(this));this.Cb=b;b=new Ve(this.F,this.A);"2d"==a&&(b=new Ue(this.F,this.A));b.Ke(this.Cb);this.o=b;K(window,"resize",this.Eh,r,this)};t.add=function(a){(a instanceof Qe||a instanceof Oe||a instanceof Me)&&a.B();this.pb.push(a);this.Oa(a)};
t.Oa=function(a){(!this.Z||!this.a)&&i(Error("The renderer was not initialized properly."));y(a)||(window.console.log(a),i(Error("Illegal object.")));Dc(a)||K(a,Ec,this.th.bind(this))};t.get=function(a){y(a)||i(Error("Invalid object id."));for(var b=this.Ra.r,c=b.length,d=0,d=0;d<c;d++)if(b[d].ua==a)return b[d];return q};
t.Wb=function(){(!this.Z||!this.a)&&i(Error("The renderer was not initialized properly."));y(this.of)||(this.U.tc.oe(r)?(this.O.PROGRESSBAR_ENABLED&&!this.Ka&&(this.Ka=new Bf(this.p,3)),this.be=this.gd=r,this.of=Ef(function(){this.of=q;this.Wb()}.bind(this),100)):(!this.gd&&!this.be&&(this.be=n,eval("this.onShowtime()"),this.gd=n),this.Ka?Hf(this):(window.Uc(this.Wb.bind(this),this.Z),eval("this.onRender()"),this.tb(r,n))))};t.Zf=ba();t.Xf=ba();t.tb=ba();
t.xd=function(){this.Ra.clear();delete this.Ra;this.pb.length=0;delete this.pb;delete this.U;this.U=q;delete this.o;this.o=q;delete this.Cb;this.Cb=q;delete this.a;this.a=q;ke(this.Z);delete this.Z;this.Z=q};function If(){L.call(this);this.c="shaders";this.pd="";this.pd="precision mediump float;\n\nattribute vec3 vertexPosition;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\nattribute vec2 vertexTexturePos;\nattribute float vertexScalar;\n\nuniform mat4 view;\nuniform mat4 perspective;\nuniform vec3 center;\nuniform mat4 objectTransform;\nuniform bool useObjectColor;\nuniform bool useScalars;\nuniform bool scalarsReplaceMode;\nuniform float scalarsMin;\nuniform float scalarsMax;\nuniform vec3 scalarsMinColor;\nuniform vec3 scalarsMaxColor;\nuniform float scalarsMinThreshold;\nuniform float scalarsMaxThreshold;\nuniform vec3 objectColor;\nuniform float pointSize;\n\nvarying float fDiscardNow;\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fVertexNormal;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * vertexNormal;\n  fVertexNormal = vertexNormal;\n  fDiscardNow = 0.0;\n  vec3 vertexPosition2 = vertexPosition - center;\n  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n  fragmentTexturePos = vertexTexturePos;\n  if (useScalars) {\n    float scalarValue = vertexScalar;\n    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n      if (scalarsReplaceMode) {\n        fragmentColor = objectColor;\n      } else {\n        fDiscardNow = 1.0;\n      }\n    } else {\n      if (scalarsReplaceMode) {\n        fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n      } else {\n        fragmentColor = vertexColor;\n      }\n    }\n  } else if (useObjectColor) {\n    fragmentColor = objectColor;\n  } else {\n    fragmentColor = vertexColor;\n  }\n  gl_PointSize = pointSize;\n  gl_Position = perspective * fVertexPosition;\n}\n";
this.ed="";this.ed="precision mediump float;\n\nuniform bool usePicking;\nuniform bool useTexture;\nuniform bool volumeTexture;\nuniform bool useLabelMapTexture;\nuniform sampler2D textureSampler;\nuniform sampler2D textureSampler2;\nuniform float objectOpacity;\nuniform float labelmapOpacity;\nuniform float volumeLowerThreshold;\nuniform float volumeUpperThreshold;\nuniform float volumeScalarMin;\nuniform float volumeScalarMax;\nuniform vec3 volumeScalarMinColor;\nuniform vec3 volumeScalarMaxColor;\nuniform float volumeWindowLow;\nuniform float volumeWindowHigh;\n\nvarying float fDiscardNow;\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fVertexNormal;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n if (fDiscardNow > 0.0) {\n   discard;\n }\n if (usePicking) {\n   gl_FragColor = vec4(fragmentColor, 1.0);\n } else if (useTexture) {\n   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n   vec4 textureSum = texture1;\n   if (volumeTexture) {\n     float _windowLow = (volumeWindowLow / volumeScalarMax);\n     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n     vec3 fac = _maxrange - _minrange;\n     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n   }\n   if (useLabelMapTexture) {\n     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n     if (texture2.a > 0.0) {\n       if (labelmapOpacity < 1.0) {\n         textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n       } else {\n         textureSum = texture2;\n       }\n     }\n   }\n   if (volumeTexture) {\n     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n     if (texture1.r < _volumeLowerThreshold ||\n         texture1.r > _volumeUpperThreshold) {\n       discard;\n     };\n   };\n   gl_FragColor = textureSum;\n   gl_FragColor.a = objectOpacity;\n } else {\n   vec3 nNormal = normalize(fTransformedVertexNormal);\n   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n     gl_FragColor = vec4(fragmentColor,1.0);\n     return;\n   }\n   vec3 light = vec3(0.0, 0.0, 1.0);\n   vec3 lightDirection = vec3(0,0,-10);\n   lightDirection = normalize(lightDirection);\n   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n   float ambient = 0.3;\n   gl_FragColor = vec4(fragmentColor * ambient +\n                       fragmentColor * diffuse +\n                       vec3(0.2, 0.2, 0.2) * specular,\n                       objectOpacity);\n }\n}\n"}
E(If,L);
var Jf={Wi:"vertexPosition",Vi:"vertexNormal",Ui:"vertexColor",Yi:"vertexTexturePos",Xi:"vertexScalar"},Kf={Zi:"view",Ei:"perspective",wi:"center",Di:"objectTransform",Qi:"useObjectColor",Bi:"objectColor",Si:"useScalars",Mi:"scalarsReplaceMode",Ji:"scalarsMin",Gi:"scalarsMax",Ki:"scalarsMinColor",Hi:"scalarsMaxColor",Li:"scalarsMinThreshold",Ii:"scalarsMaxThreshold",Fi:"pointSize",Ci:"objectOpacity",Ai:"normal",Ri:"usePicking",Ti:"useTexture",Pi:"useLabelMapTexture",yi:"labelmapOpacity",Ni:"textureSampler",Oi:"textureSampler2",
$i:"volumeLowerThreshold",fj:"volumeUpperThreshold",cj:"volumeScalarMin",aj:"volumeScalarMax",dj:"volumeScalarMinColor",bj:"volumeScalarMaxColor",hj:"volumeWindowLow",gj:"volumeWindowHigh",ej:"volumeTexture"};
function Lf(a){var b=Object.keys(Kf);Object.keys(Jf).every(function(a){a=Jf[a];return-1!=this.pd.search(a)||-1!=this.ed.search(a)}.bind(a))||i(Error("Could not find all attributes in the shader sources."));b.every(function(a){a=Kf[a];return-1!=this.pd.search(a)||-1!=this.ed.search(a)}.bind(a))||i(Error("Could not find all uniforms in the shader sources."))};function Mf(a,b,c){y(a)||i(Error("Invalid GL Buffer."));y(b)||i(Error("Invalid number of items."));y(c)||i(Error("Invalid item size."));L.call(this);this.c="buffer";this.$=a;this.hb=b;this.ib=c}E(Mf,L);function Nf(a,b,c,d,e,f,g,h){var k,l=c.offsetParent;if(l){var m="HTML"==l.tagName||"BODY"==l.tagName;if(!m||"static"!=af(l,"position"))k=ff(l),m||(k=$c(k,new Zc(l.scrollLeft,l.scrollTop)))}l=ff(a);m=jf(a);l=new Ye(l.x,l.y,m.width,m.height);(m=ef(a))&&l.Lf(new Ye(m.left,m.top,m.right-m.left,m.bottom-m.top));var m=ae(a),o=ae(c);if(m.I!=o.I){var v=m.I.body,o=o.I.parentWindow||o.I.defaultView,p=new Zc(0,0),w=ce(v)?ce(v).parentWindow||ce(v).defaultView:window,u=v;do{var D;if(w==o)D=ff(u);else{var F=u;
D=new Zc;if(1==F.nodeType)if(F.getBoundingClientRect)F=cf(F),D.x=F.left,D.y=F.top;else{var x=pe(ae(F)),F=ff(F);D.x=F.x-x.x;D.y=F.y-x.y}else{var x=la(F.Wg),B=F;F.targetTouches?B=F.targetTouches[0]:x&&F.Ma.targetTouches&&(B=F.Ma.targetTouches[0]);D.x=B.clientX;D.y=B.clientY}}p.x+=D.x;p.y+=D.y}while(w&&w!=o&&(u=w.frameElement)&&(w=w.parent));v=$c(p,ff(v));I&&!oe(m)&&(v=$c(v,pe(m)));l.left+=v.x;l.top+=v.y}a=(b&4&&gf(a)?b^2:b)&-5;b=new Zc(a&2?l.left+l.width:l.left,a&1?l.top+l.height:l.top);k&&(b=$c(b,
k));e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var z;if(g&&(z=ef(c))&&k)z.top-=k.y,z.right-=k.x,z.bottom-=k.y,z.left-=k.x;return Of(b,c,d,f,z,g,h)}
function Of(a,b,c,d,e,f,g){var a=a.f(),h=0,k=(c&4&&gf(b)?c^2:c)&-5,c=jf(b),g=g?g.f():c.f();if(d||0!=k)k&2?a.x-=g.width+(d?d.right:0):d&&(a.x+=d.left),k&1?a.y-=g.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){h=a;d=0;if(65==(f&65)&&(h.x<e.left||h.x>=e.right))f&=-2;if(132==(f&132)&&(h.y<e.top||h.y>=e.bottom))f&=-5;h.x<e.left&&f&1&&(h.x=e.left,d|=1);h.x<e.left&&h.x+g.width>e.right&&f&16&&(g.width=Math.max(g.width-(h.x+g.width-e.right),0),d|=4);h.x+g.width>e.right&&f&1&&(h.x=Math.max(e.right-g.width,
e.left),d|=1);f&2&&(d|=(h.x<e.left?16:0)|(h.x+g.width>e.right?32:0));h.y<e.top&&f&4&&(h.y=e.top,d|=2);h.y>=e.top&&h.y+g.height>e.bottom&&f&32&&(g.height=Math.max(g.height-(h.y+g.height-e.bottom),0),d|=8);h.y+g.height>e.bottom&&f&4&&(h.y=Math.max(e.bottom-g.height,e.top),d|=2);f&8&&(d|=(h.y<e.top?64:0)|(h.y+g.height>e.bottom?128:0));h=d}else h=256;if(h&496)return h}f=a;e=Xa&&(Qa||cb)&&pb("1.9");f instanceof Zc?(a=f.x,f=f.y):(a=f,f=j);b.style.left=hf(a,e);b.style.top=hf(f,e);gd(c,g)||(a=oe(ae(ce(b))),
I&&(!a||!pb("8"))?(c=b.style,a?(I?(a=mf(b,$e(b,"paddingLeft")),e=mf(b,$e(b,"paddingRight")),f=mf(b,$e(b,"paddingTop")),d=mf(b,$e(b,"paddingBottom")),a=new Xe(f,e,d,a)):(a=Ze(b,"paddingLeft"),e=Ze(b,"paddingRight"),f=Ze(b,"paddingTop"),d=Ze(b,"paddingBottom"),a=new Xe(parseFloat(f),parseFloat(e),parseFloat(d),parseFloat(a))),I?(e=of(b,"borderLeft"),f=of(b,"borderRight"),d=of(b,"borderTop"),b=of(b,"borderBottom"),b=new Xe(d,f,b,e)):(e=Ze(b,"borderLeftWidth"),f=Ze(b,"borderRightWidth"),d=Ze(b,"borderTopWidth"),
b=Ze(b,"borderBottomWidth"),b=new Xe(parseFloat(d),parseFloat(f),parseFloat(b),parseFloat(e))),c.pixelWidth=g.width-b.left-a.left-a.right-b.right,c.pixelHeight=g.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=g.width,c.pixelHeight=g.height)):(b=b.style,Xa?b.MozBoxSizing="border-box":Ya?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(g.width,0)+"px",b.height=Math.max(g.height,0)+"px"));return h};function Pf(){}Pf.prototype.Ga=ba();function Qf(a,b){this.element=a;this.vf=b}E(Qf,Pf);Qf.prototype.Ga=function(a,b,c){Nf(this.element,this.vf,a,b,j,c)};function Rf(a,b){this.Ea=new pf(this);this.Re(a||q);b&&(this.nc=b)}E(Rf,Jc);t=Rf.prototype;t.n=q;t.Cg=n;t.rf=q;t.ha=r;t.ci=r;t.De=-1;t.ah=r;t.Pg=n;t.nc="toggle_display";t.i=s("n");t.Re=function(a){this.ha&&i(Error("Can not change this state of the popup while showing."));this.n=a};
function Sf(a,b){a.Wc&&a.Wc.stop();a.Pc&&a.Pc.stop();if(b){if(!a.ha&&a.Le()){a.n||i(Error("Caller must call setElement before trying to show the popup"));a.Ga();var c=ce(a.n);a.ah&&rf(a.Ea,c,"keydown",a.rh,n);if(a.Cg)if(rf(a.Ea,c,"mousedown",a.Vf,n),I){var d;try{d=c.activeElement}catch(e){}for(;d&&"IFRAME"==d.nodeName;){try{var f=d.contentDocument||d.contentWindow.document}catch(g){break}c=f;d=c.activeElement}rf(a.Ea,c,"mousedown",a.Vf,n);rf(a.Ea,c,"deactivate",a.Uf)}else rf(a.Ea,c,"blur",a.Uf);"toggle_display"==
a.nc?(a.n.style.visibility="visible",lf(a.n,n)):"move_offscreen"==a.nc&&a.Ga();a.ha=n;a.Wc?(wc(a.Wc,"end",a.Yf,r,a),a.Wc.play()):a.Yf()}}else Tf(a)}t.Ga=fa;function Tf(a,b){if(!a.ha||!a.dispatchEvent({type:"beforehide",target:b}))return r;a.Ea&&a.Ea.Kd();a.Pc?(wc(a.Pc,"end",ya(a.uf,b),r,a),a.Pc.play()):a.uf(b);return n}t.uf=function(a){"toggle_display"==this.nc?this.ci?Ef(this.Jf,0,this):this.Jf():"move_offscreen"==this.nc&&(this.n.style.left="-200px",this.n.style.top="-200px");this.ha=r;this.Me(a)};
t.Jf=function(){this.n.style.visibility="hidden";lf(this.n,r)};t.Le=function(){return this.dispatchEvent("beforeshow")};t.Yf=function(){this.De=za();this.dispatchEvent("show")};t.Me=function(a){za();this.dispatchEvent({type:"hide",target:a})};t.Vf=function(a){a=a.target;!ne(this.n,a)&&(!this.rf||ne(this.rf,a))&&!(150>za()-this.De)&&Tf(this,a)};t.rh=function(a){27==a.keyCode&&Tf(this,a.target)&&(a.preventDefault(),a.stopPropagation())};
t.Uf=function(a){if(this.Pg){var b=ce(this.n);if(I||Wa){if(a=b.activeElement,!a||ne(this.n,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>za()-this.De||Tf(this)}};t.H=function(){Rf.j.H.call(this);this.Ea.Da();ac(this.Wc);ac(this.Pc);delete this.n;delete this.Ea};function Uf(a,b){this.pe=a instanceof Zc?a:new Zc(a,b)}E(Uf,Pf);Uf.prototype.Ga=function(a,b,c,d){Nf(bf(a),0,a,b,this.pe,c,q,d)};function Vf(a,b){this.Jh=4;this.Jd=b||j;Rf.call(this,a)}E(Vf,Rf);Vf.prototype.Ga=function(){if(this.Jd){var a=!this.ha&&"move_offscreen"!=this.nc,b=this.i();a&&(b.style.visibility="hidden",lf(b,n));this.Jd.Ga(b,this.Jh,this.kj);a&&lf(b,r)}};function Wf(a,b,c){this.La=c||(a?ae(de(a)):ae());Vf.call(this,this.La.dc("div",{style:"position:absolute;display:none;"}));this.re=new Zc(1,1);this.Qb=new Wb;a&&Xf(this,a);if(b!=q)if(a=this.i(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(ce(a).createTextNode(b))}}E(Wf,Vf);var Yf=[];t=Wf.prototype;t.ga=q;t.className="goog-tooltip";
t.fg=500;t.$g=0;t.zd=s("La");function Xf(a,b){b=de(b);a.Qb.add(b);K(b,"mouseover",a.Gf,r,a);K(b,"mouseout",a.Ed,r,a);K(b,"mousemove",a.Ff,r,a);K(b,"focus",a.Ef,r,a);K(b,"blur",a.Ed,r,a)}t.detach=function(a){if(a)a=de(a),Zf(this,a),this.Qb.remove(a);else{for(var b=this.Qb.Sb(),c=0;a=b[c];c++)Zf(this,a);this.Qb.clear()}};function Zf(a,b){xc(b,"mouseover",a.Gf,r,a);xc(b,"mouseout",a.Ed,r,a);xc(b,"mousemove",a.Ff,r,a);xc(b,"focus",a.Ef,r,a);xc(b,"blur",a.Ed,r,a)}
t.Re=function(a){var b=this.i();b&&ke(b);Wf.j.Re.call(this,a);a&&(b=this.La.I.body,b.insertBefore(a,b.lastChild))};t.Le=function(){if(!Rf.prototype.Le.call(this))return r;if(this.anchor)for(var a,b=0;a=Yf[b];b++)ne(a.i(),this.anchor)||Sf(a,r);0<=yb(Yf,this)||Yf.push(this);a=this.i();a.className=this.className;$f(this);K(a,"mouseover",this.If,r,this);K(a,"mouseout",this.Hf,r,this);ag(this);return n};
t.Me=function(){Hb(Yf,this);for(var a=this.i(),b,c=0;b=Yf[c];c++)b.anchor&&ne(a,b.anchor)&&Sf(b,r);this.bg&&bg(this.bg);xc(a,"mouseover",this.If,r,this);xc(a,"mouseout",this.Hf,r,this);this.anchor=j;if(0==(this.Za?this.ha?4:1:this.gc?3:this.ha?2:0))this.Ld=r;Rf.prototype.Me.call(this)};t.Sf=function(a,b){this.anchor==a&&this.Qb.contains(this.anchor)&&(this.Ld||!this.lj?(Sf(this,r),this.ha||(this.anchor=a,this.Jd=b||cg(this,0)||j,this.ha&&this.Ga(),Sf(this,n))):this.anchor=j);this.Za=j};
t.oh=function(a){this.gc=j;a==this.anchor&&(this.ga==q||this.ga!=this.i()&&!this.Qb.contains(this.ga))&&(!this.sf||!this.sf.ga)&&Sf(this,r)};function dg(a,b){var c=pe(a.La);a.re.x=b.clientX+c.x;a.re.y=b.clientY+c.y}t.Gf=function(a){var b=eg(this,a.target);this.ga=b;$f(this);b!=this.anchor&&(this.anchor=b,this.Za||(this.Za=Ef(va(this.Sf,this,b,j),this.fg)),fg(this),dg(this,a))};function eg(a,b){try{for(;b&&!a.Qb.contains(b);)b=b.parentNode;return b}catch(c){return q}}
t.Ff=function(a){dg(this,a);this.Ld=n};t.Ef=function(a){this.ga=a=eg(this,a.target);this.Ld=n;if(this.anchor!=a){this.anchor=a;var b=cg(this,1);$f(this);this.Za||(this.Za=Ef(va(this.Sf,this,a,b),this.fg));fg(this)}};function cg(a,b){if(0==b){var c=a.re.f();return new gg(c)}return new hg(a.ga)}function fg(a){if(a.anchor)for(var b,c=0;b=Yf[c];c++)ne(b.i(),a.anchor)&&(b.sf=a,a.bg=b)}
t.Ed=function(a){var b=eg(this,a.target),c=eg(this,a.relatedTarget);b!=c&&(b==this.ga&&(this.ga=q),ag(this),this.Ld=r,this.ha&&(!a.relatedTarget||!ne(this.i(),a.relatedTarget))?bg(this):this.anchor=j)};t.If=function(){var a=this.i();this.ga!=a&&($f(this),this.ga=a)};t.Hf=function(a){var b=this.i();if(this.ga==b&&(!a.relatedTarget||!ne(b,a.relatedTarget)))this.ga=q,bg(this)};function ag(a){a.Za&&(Df.clearTimeout(a.Za),a.Za=j)}
function bg(a){if(2==(a.Za?a.ha?4:1:a.gc?3:a.ha?2:0))a.gc=Ef(va(a.oh,a,a.anchor),a.$g)}function $f(a){a.gc&&(Df.clearTimeout(a.gc),a.gc=j)}t.H=function(){Sf(this,r);ag(this);this.detach();this.i()&&ke(this.i());this.ga=q;delete this.La;Wf.j.H.call(this)};function gg(a,b){Uf.call(this,a,b)}E(gg,Uf);gg.prototype.Ga=function(a,b,c){b=bf(a);b=ef(b);c=c?new Xe(c.top+10,c.right,c.bottom,c.left+10):new Xe(10,0,0,10);Of(this.pe,a,4,c,b,9)&496&&Of(this.pe,a,4,c,b,5)};function hg(a){Qf.call(this,a,3)}
E(hg,Qf);hg.prototype.Ga=function(a,b,c){var d=new Zc(10,0);Nf(this.element,this.vf,a,b,d,c,9)&496&&Nf(this.element,2,a,1,d,c,5)};function ig(a,b,c,d){y(a)||i(Error("No valid parent element."));(!A(b)||!A(c))&&i(Error("Invalid coordinates."));(!y(d)||!(d instanceof W))&&i(Error("Invalid interactor."));Wf.call(this);this.c="caption";this.va=a;this.rd=b;this.sd=c;this.Cb=d;this.Xa=q;this.xb=[];this.xb=[".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n  border: 1px solid infotext;\n  padding: 1px;\n  font-family: sans-serif;\n}"];wc(d,Id,this.Ce.bind(this));this.ze()}E(ig,Wf);
ig.prototype.ze=function(){if("static"==this.va.style.position||""==this.va.style.position)this.va.style.position="relative";var a=document.getElementsByTagName("head")[0],b=ge("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.xb[0]);a.appendChild(b);b.appendChild(c);this.Xa=b;this.Jd=new Uf(this.rd,this.sd)||j;this.ha&&this.Ga();Sf(this,n);Xf(this,this.va);this.i().classList.add("x-tooltip")};
ig.prototype.Ce=function(){Sf(this,r);this.Xa&&ke(this.Xa);this.i()&&ke(this.i());this.Xa=q};function Gf(){Ff.call(this);this.c="renderer3D";this.xc=this.Ac=this.wc=this.zc=this.vc=this.yc=this.de=this.ee=q;this.k=[0,0,0];this.nf=q;this.Qd=new Sb;this.Ec=new Sb;this.Hc=new Sb;this.$d=new Sb;this.bd=new Sb;this.md=new Sb;this.nd=new Sb;this.od=new Sb;this.O={PROGRESSBAR_ENABLED:n,PICKING_ENABLED:n,ORDERING_ENABLED:n,STATISTICS_ENABLED:r}}E(Gf,Ff);Gf.prototype.__defineGetter__("config",s("O"));t=Gf.prototype;t.Sh=function(){this.xc=this.Ac=this.wc=this.zc=this.vc=this.yc=q;this.k=[0,0,0]};
t.Ne=function(a){Gf.j.Ne.call(this,a);var b=a.rd,a=a.sd,c=this.get(this.cg(b,a));if(c&&(c=c.Yb))(new ig(this.p,this.p.offsetLeft+b+10,this.p.offsetTop+a+10,this.Cb)).i().innerHTML=c};
t.ca=function(){Gf.j.ca.call(this,"experimental-webgl");try{if(this.a.viewport(0,0,this.F,this.A),this.a.clearColor(0,0,0,0),this.a.enable(this.a.BLEND),this.a.blendEquation(this.a.FUNC_ADD),this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA),this.a.enable(this.a.DEPTH_TEST),this.a.depthFunc(this.a.LEQUAL),this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),this.O.PICKING_ENABLED){var a=this.a.createFramebuffer(),b=this.a.createRenderbuffer(),c=this.a.createTexture();this.a.bindTexture(this.a.TEXTURE_2D,
c);this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,this.F,this.A,0,this.a.RGB,this.a.UNSIGNED_BYTE,q);this.a.bindFramebuffer(this.a.FRAMEBUFFER,a);this.a.bindRenderbuffer(this.a.RENDERBUFFER,b);this.a.renderbufferStorage(this.a.RENDERBUFFER,this.a.DEPTH_COMPONENT16,this.F,this.A);this.a.bindRenderbuffer(this.a.RENDERBUFFER,q);this.a.framebufferTexture2D(this.a.FRAMEBUFFER,this.a.COLOR_ATTACHMENT0,this.a.TEXTURE_2D,c,0);this.a.framebufferRenderbuffer(this.a.FRAMEBUFFER,this.a.DEPTH_ATTACHMENT,this.a.RENDERBUFFER,
b);this.a.bindFramebuffer(this.a.FRAMEBUFFER,q);this.nf=a}}catch(d){i(Error("Exception while accessing GL Context!\n"+d))}jg(this)};
function jg(a){var b=new If;(!y(a.Z)||!y(a.a)||!y(a.o))&&i(Error("Renderer was not initialized properly."));(!y(b)||!(b instanceof If))&&i(Error("Could not add shaders."));Lf(b);var c=a.a.createShader(a.a.FRAGMENT_SHADER),d=a.a.createShader(a.a.VERTEX_SHADER);a.a.shaderSource(c,b.ed);a.a.shaderSource(d,b.pd);a.a.compileShader(c);a.a.compileShader(d);a.a.getShaderParameter(c,a.a.COMPILE_STATUS)||i(Error("Fragement Shader compilation failed!\n"+a.a.getShaderInfoLog(c)));a.a.getShaderParameter(d,a.a.COMPILE_STATUS)||
i(Error("Vertex Shader compilation failed!\n"+a.a.getShaderInfoLog(d)));var e=a.a.createProgram();a.a.attachShader(e,d);a.a.attachShader(e,c);a.a.linkProgram(e);a.a.getProgramParameter(e,a.a.LINK_STATUS)||i(Error("Could not create shader program!\n"+a.a.getShaderInfoLog(c)+"\n"+a.a.getShaderInfoLog(d)+"\n"+a.a.getProgramInfoLog(e)));a.a.useProgram(e);a.de=e;Object.keys(Jf).forEach(function(a){a=Jf[a];this.Qd.set(a,this.a.getAttribLocation(this.de,a));this.a.enableVertexAttribArray(this.Qd.get(a))}.bind(a));
Object.keys(Kf).forEach(function(a){a=Kf[a];this.Ec.set(a,this.a.getUniformLocation(this.de,a))}.bind(a));a.ee=b}
t.Oa=function(a){Gf.j.Oa.call(this,a);var b=r;this.get(a.ua)&&(b=n);var c=a.ua,d=a.g,e=a.h,f=a.S,g=a.ba,h=a.t,k=a.Mb,l=a.T,m=a.v,o=a.q;if(y(m)&&y(m.t)&&m.t.d)this.Oa(m);else if(y(m)&&m.d&&this.Oa(m),y(l)&&y(l.t)&&l.t.d)this.U.load(l,a);else if(y(g)&&y(g.t)&&g.t.d)this.U.load(g,a);else if(y(h)&&h.d)this.U.load(a,a);else if(y(o)&&y(o.t)&&o.t.d)this.U.load(o,a);else{if(0<a.e.length){h=a.e;l=h.length;for(m=m=0;m<l;m++)this.Oa(h[m])}if(d){for(h=0;this.hd;)h++,window.console.log("Possible thread lock avoided: "+
h);this.hd=n;l=a instanceof se&&a.Ya instanceof ue;b&&y(g)&&g.d&&(h=this.nd.get(c),y(h)&&this.a.isBuffer(h.$)&&this.a.deleteBuffer(h.$));h=q;y(g)&&(!b||g.d?(h=a.Lb,y(h)||i(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),m=r,g.Ta&&(m=n),this.a.pixelStorei(this.a.UNPACK_FLIP_Y_WEBGL,m),m=this.a.createTexture(),m.dh=g.Ab,this.od.set(g.ua,m),this.a.bindTexture(this.a.TEXTURE_2D,m),g.Ta?this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,g.ld,g.kd,
0,this.a.RGBA,this.a.UNSIGNED_BYTE,g.Ta):this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,this.a.RGBA,this.a.UNSIGNED_BYTE,m.dh),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),l?(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST)):(this.a.texParameteri(this.a.TEXTURE_2D,
this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR)),this.a.bindTexture(this.a.TEXTURE_2D,q),m=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,m),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(h),this.a.STATIC_DRAW),h=new Mf(m,h.length,2),g.d=r):h=this.nd.get(c));Ie(this.U,0.1);if(l)this.hd=r,G.ta(this.c+".update"),Ie(this.U,0.9);else{if(!b||d.d||k.d){l=k.m;g=l.Fa(new M(d.Gb,d.Hb,d.Ib));l=l.Fa(new M(d.Db,d.Eb,
d.Fb));if(this.yc===q||g.x<this.yc)this.yc=g.x;if(this.vc===q||l.x>this.vc)this.vc=l.x;if(this.zc===q||g.y<this.zc)this.zc=g.y;if(this.wc===q||l.y>this.wc)this.wc=l.y;if(this.Ac===q||g.b<this.Ac)this.Ac=g.b;if(this.xc===q||l.b>this.xc)this.xc=l.b;this.k=[(this.yc+this.vc)/2,(this.zc+this.wc)/2,(this.Ac+this.xc)/2];k.d=r}b&&d.d&&(k=this.Hc.get(c),y(k)&&this.a.isBuffer(k.$)&&this.a.deleteBuffer(k.$));k=q;!b||d.d?(k=this.a.createBuffer(),d.mc(),this.a.bindBuffer(this.a.ARRAY_BUFFER,k),this.a.bufferData(this.a.ARRAY_BUFFER,
d.K,this.a.STATIC_DRAW),k=new Mf(k,d.count,3),d.d=r):k=this.Hc.get(c);Ie(this.U,0.3);b&&e.d&&(g=this.Hc.get(c),y(g)&&this.a.isBuffer(g.$)&&this.a.deleteBuffer(g.$));g=q;!b||e.d?(g=this.a.createBuffer(),e.mc(),this.a.bindBuffer(this.a.ARRAY_BUFFER,g),this.a.bufferData(this.a.ARRAY_BUFFER,e.K,this.a.STATIC_DRAW),g=new Mf(g,e.count,3),e.d=r):g=this.$d.get(c);Ie(this.U,0.3);b&&f&&f.d&&(e=this.bd.get(c),y(e)&&this.a.isBuffer(e.$)&&this.a.deleteBuffer(e.$));e=q;f&&(!b||f.d?(f.length!=d.length&&i(Error("Mismatch between points and point colors.")),
e=this.a.createBuffer(),f.mc(),this.a.bindBuffer(this.a.ARRAY_BUFFER,e),this.a.bufferData(this.a.ARRAY_BUFFER,f.K,this.a.STATIC_DRAW),e=new Mf(e,f.count,3),f.d=r):e=this.bd.get(c));Ie(this.U,0.2);b&&o&&o.d&&(f=this.md.get(c),y(f)&&this.a.isBuffer(f.$)&&this.a.deleteBuffer(f.$));f=q;o&&(f=o.pc,!b||o.d?(f.length!=d.length&&i(Error("Mismatch between points and scalars.")),d=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,d),this.a.bufferData(this.a.ARRAY_BUFFER,f,this.a.STATIC_DRAW),f=new Mf(d,
f.length,3),o.d=r):f=this.md.get(c));Ie(this.U,0.1);b||this.Ra.add(a);this.Hc.set(c,k);this.$d.set(c,g);this.bd.set(c,e);this.nd.set(c,h);this.md.set(c,f);this.hd=a.d=r}}else a.d=r}};function kg(a,b){var c=b.g.ad,c=a.o.l.Fa(b.Mb.m.Fa(new M(c[0],c[1],c[2]))),c=Wc(a.o.ka,c);return Math.round(1E3*c)/1E3}t.cg=function(a,b){if(this.O.PICKING_ENABLED){this.tb(n,r);var c=new Uint8Array(4);this.a.readPixels(a,this.A-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
t.tb=function(a,b){Gf.j.tb.call(this,a,b);var c=this.Ra.r,d=c.length;if(0!=d){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.nf):this.a.bindFramebuffer(this.a.FRAMEBUFFER,q);this.a.viewport(0,0,this.F,this.A);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var e=this.o.mf,f=this.o.zb;this.a.uniformMatrix4fv(this.Ec.get("perspective"),r,e);this.a.uniformMatrix4fv(this.Ec.get("view"),r,f);e=this.k;this.a.uniform3f(this.Ec.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
f=this.pb.length;for(e=0;e<f;++e){var g=this.pb[e];if(g instanceof Y){var h=new M(1,0,0),h=this.o.l.Fa(h),k=Wc(this.o.ka,h),h=new M(-1,0,0),h=this.o.l.Fa(h),l=Wc(this.o.ka,h),h=new M(0,1,0),h=this.o.l.Fa(h),m=Wc(this.o.ka,h),h=new M(0,-1,0),h=this.o.l.Fa(h),o=Wc(this.o.ka,h),h=new M(0,0,1),h=this.o.l.Fa(h),v=Wc(this.o.ka,h),h=new M(0,0,-1),h=this.o.l.Fa(h),h=Wc(this.o.ka,h),p=Math.max(k,m,v,l,o,h);p==k||p==l?te(g,0):p==m||p==o?te(g,1):(p==v||p==h)&&te(g,2)}}if(this.O.ORDERING_ENABLED){k=r;f=this.pb;
g=f.length-1;do if(e=f[g],e instanceof Y&&e.Ba){l=e.qb;k=e.Ua.e;1==l?k=e.Va.e:2==l&&(k=e.Wa.e);l=k.length;m=k[0];m.P=kg(this,m);m.Q=e.Q;o=k[l-1];o.P=kg(this,o);o.Q=e.Q;o=Math.round(1E3*((o.P-m.P)/l))/1E3;for(v=v=1;v<l-1;v++)h=Math.round(1E3*(m.P+v*o))/1E3,k[v].P=h,k[v].Q=e.Q;k=n}while(g--);f=this.Ra.r;g=f.length-1;do if(e=f[g],e.Aa&&!(1==e.Q||e instanceof se))e.P=kg(this,e),k=n;while(g--);k&&this.Ra.sort()}if(f=!a&&y(b)&&b&&this.O.STATISTICS_ENABLED)var w=0,u=0,D=0,F=0;var e=this.Qd,g=e.get("vertexPosition"),
k=e.get("vertexNormal"),l=e.get("vertexColor"),m=e.get("vertexTexturePos"),o=e.get("vertexScalar"),e=this.Ec,v=e.get("usePicking"),h=e.get("useObjectColor"),p=e.get("objectColor"),x=e.get("useScalars"),B=e.get("scalarsReplaceMode"),z=e.get("scalarsMin"),J=e.get("scalarsMax"),H=e.get("scalarsMinColor"),ea=e.get("scalarsMaxColor"),na=e.get("scalarsMinThreshold"),oa=e.get("scalarsMaxThreshold"),aa=e.get("objectOpacity"),Db=e.get("labelmapOpacity"),Da=e.get("useTexture"),gb=e.get("useLabelMapTexture"),
Ea=e.get("textureSampler"),zc=e.get("textureSampler2"),ed=e.get("volumeLowerThreshold"),ob=e.get("volumeUpperThreshold"),fd=e.get("volumeScalarMin"),Fb=e.get("volumeScalarMax"),ib=e.get("volumeWindowLow"),Cb=e.get("volumeWindowHigh"),Ac=e.get("volumeScalarMinColor"),wa=e.get("volumeScalarMaxColor"),hb=e.get("volumeTexture"),dd=e.get("objectTransform"),cd=e.get("pointSize"),e=d;do{var R=c[d-e];if(R){var S=q;R instanceof se&&R.Ya&&(S=R.Ya);if(R.Aa&&(!S||S.Aa)){var ma=R.ua,Pa=R.uc,xa=this.Hc.get(ma),
Za=this.$d.get(ma),Td=this.bd.get(ma),Eb=this.md.get(ma),Ud=this.nd.get(ma);this.a.bindBuffer(this.a.ARRAY_BUFFER,xa.$);this.a.vertexAttribPointer(g,xa.ib,this.a.FLOAT,r,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,Za.$);this.a.vertexAttribPointer(k,Za.ib,this.a.FLOAT,r,0,0);a?this.a.uniform1i(v,n):this.a.uniform1i(v,r);Td&&!a&&!Pa?(this.a.uniform1i(h,r),this.a.bindBuffer(this.a.ARRAY_BUFFER,Td.$),this.a.vertexAttribPointer(l,Td.ib,this.a.FLOAT,r,0,0)):(Za=1,Pa&&!a&&(Za=0),this.a.uniform1i(h,Za),Za=
R.wb,a&&(Za=[Math.floor(ma%65025%255)/255,Math.floor(ma%65025/255)/255,Math.floor(ma/65025)/255]),this.a.uniform3f(p,parseFloat(Za[0]),parseFloat(Za[1]),parseFloat(Za[2])),this.a.vertexAttribPointer(l,xa.ib,this.a.FLOAT,r,0,0));Eb&&!a&&!Pa?(this.a.uniform1i(x,n),this.a.uniform1i(B,R.q.pf),ma=R.q.lb,Pa=R.q.jb,this.a.uniform3f(H,parseFloat(ma[0]),parseFloat(ma[1]),parseFloat(ma[2])),this.a.uniform3f(ea,parseFloat(Pa[0]),parseFloat(Pa[1]),parseFloat(Pa[2])),this.a.uniform1f(na,parseFloat(R.q.da)),this.a.uniform1f(oa,
parseFloat(R.q.fa)),this.a.uniform1f(z,parseFloat(R.q.Ja)),this.a.uniform1f(J,parseFloat(R.q.za)),this.a.bindBuffer(this.a.ARRAY_BUFFER,Eb.$),this.a.vertexAttribPointer(o,Eb.ib,this.a.FLOAT,r,0,0)):(this.a.uniform1i(x,r),this.a.vertexAttribPointer(o,xa.ib,this.a.FLOAT,r,0,0));this.a.uniform1f(aa,parseFloat(R.Q));R.ba&&Ud&&!a?(this.a.uniform1i(Da,n),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.od.get(R.ba.ua)),this.a.uniform1i(Ea,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,
Ud.$),this.a.vertexAttribPointer(m,Ud.ib,this.a.FLOAT,r,0,0),this.a.uniform1i(hb,r)):(this.a.uniform1i(Da,r),this.a.vertexAttribPointer(m,xa.ib,this.a.FLOAT,r,0,0));S&&(this.a.uniform1i(hb,n),this.a.uniform1f(ed,S.da),this.a.uniform1f(ob,S.fa),this.a.uniform1f(fd,S.Ja),this.a.uniform1f(Fb,S.za),ma=S.lb,Pa=S.jb,this.a.uniform3f(Ac,parseFloat(ma[0]),parseFloat(ma[1]),parseFloat(ma[2])),this.a.uniform3f(wa,parseFloat(Pa[0]),parseFloat(Pa[1]),parseFloat(Pa[2])),this.a.uniform1f(ib,S.Ob),this.a.uniform1f(Cb,
S.Nb),Eb=S.v,this.a.uniform1i(gb,r),S.Ba?this.a.uniform1f(aa,parseFloat(S.Q)):Eb&&Eb.Aa&&(S=R.v.ua,this.a.uniform1i(gb,n),this.a.activeTexture(this.a.TEXTURE1),this.a.bindTexture(this.a.TEXTURE_2D,this.od.get(S)),this.a.uniform1i(zc,1),this.a.uniform1f(Db,Eb.Q)));this.a.uniformMatrix4fv(dd,r,R.Mb.Pa);S=1;"POINTS"==R.la&&(S=R.Cc);this.a.uniform1f(cd,S);S=-1;R.la==sd?(S=this.a.TRIANGLES,f&&(u+=xa.hb/3)):"LINES"==R.la?(this.a.lineWidth(R.bc),S=this.a.LINES,f&&(D+=xa.hb/2)):"POINTS"==R.la?(S=this.a.POINTS,
f&&(F+=xa.hb)):"TRIANGLE_STRIPS"==R.la?(S=this.a.TRIANGLE_STRIP,f&&(u+=xa.hb/3)):"POLYGONS"==R.la&&(S=0==xa.hb%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,f&&(u+=xa.hb/3));f&&(w+=xa.hb);this.a.drawArrays(S,0,xa.hb)}}}while(--e);f&&(c="Objects: "+d+" | "+("Vertices: "+w+" | ")+("Triangles: "+Math.round(u)+" | "),c=c+("Lines: "+D+" | ")+("Points: "+F+" | ")+("Textures: "+this.od.ma()),window.console.log(c))}};
t.xd=function(){this.ee=q;delete this.ee;this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);Gf.j.xd.call(this)};C("X.renderer3D",Gf);C("X.renderer3D.prototype.init",Gf.prototype.ca);C("X.renderer3D.prototype.add",Gf.prototype.add);C("X.renderer3D.prototype.onShowtime",Gf.prototype.Zf);C("X.renderer3D.prototype.onRender",Gf.prototype.Xf);C("X.renderer3D.prototype.get",Gf.prototype.get);C("X.renderer3D.prototype.render",Gf.prototype.Wb);C("X.renderer3D.prototype.destroy",Gf.prototype.xd);
C("X.renderer3D.prototype.resetBoundingBox",Gf.prototype.Sh);C("X.renderer3D.prototype.resetViewAndRender",Gf.prototype.lc);C("X.renderer3D.prototype.pick",Gf.prototype.cg);function $(){Ff.call(this);this.c="renderer2D";this.ff=this.Td=this.ef=this.Sd=this.Sa=q;this.fe=this.ge=0}E($,Ff);$.prototype.Gh=ba();$.prototype.Oe=function(a){$.j.Oe.call(this,a);var b=this.pb[0];if(b){var c=this.Sa;b["index"+c]=a.D?b["index"+c]+1:b["index"+c]-1;eval("this.onScroll();")}};$.prototype.__defineGetter__("orientation",s("Sa"));$.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"X"!=a&&"Y"!=a&&"Z"!=a&&i(Error("Invalid orientation."));this.Sa=a});
$.prototype.ca=function(){this.Sa||i(Error("No 2D orientation set."));$.j.ca.call(this,"2d");this.a.fillStyle="rgba(0,0,0,0)";this.a.fillRect(0,0,this.Z.width,this.Z.height);this.Sd=ge("canvas");this.Td=ge("canvas")};$.prototype.lc=function(){$.j.lc.call(this);lg(this)};
$.prototype.Oa=function(a){$.j.Oa.call(this,a);var b=r;this.get(a.ua)&&(b=n);var c=a.t,d=a.v,e=a.T;if(y(d)&&y(d.t)&&d.t.d)this.Oa(d);else if(y(e)&&y(e.t)&&e.t.d)this.U.load(e,a);else if(y(c)&&c.d)this.U.load(a,a);else{d=c=0;e=a.W;"X"==this.Sa?(this.Kb=a.Ua.e,c=e[2],d=e[1]):"Y"==this.Sa?(this.Kb=a.Va.e,c=e[0],d=e[2]):"Z"==this.Sa&&(this.Kb=a.Wa.e,c=e[0],d=e[1]);"X"==this.Sa&&(e=d,d=c,c=e);this.ge=c;this.fe=d;e=this.Sd;e.width=c;e.height=d;var f=this.Td;f.width=c;f.height=d;this.ef=e.getContext("2d");
this.ff=f.getContext("2d");b||(this.Ra.add(a),lg(this))}};function lg(a){var b=Math.min(a.F/a.ge,a.A/a.fe);N(a.o.l,2,3,10*b-10)}
$.prototype.tb=function(a,b){$.j.tb.call(this,a,b);if(0!=this.Ra.r.length){var c=this.F,d=this.A,e=this.o.l;this.a.save();this.a.clearRect(-c,-d,2*c,2*d);this.a.restore();var f=1*e.N(0,3),g=-1*e.N(1,3),h=Math.max(1+e.N(2,3)/10,0.6);this.a.setTransform(h,0,0,h,f,g);var e=this.pb[0],k=this.Kb[parseInt(e["index"+this.Sa],10)],l=k.ba.Ta,k=k.v,m=q;k&&(m=k.Ta);var o=this.ge,v=this.fe,c=1/(2*h)*(c-o*h)+f,d=1/(2*h)*(d-v*h)+g,g=this.ef,f=this.ff,h=g.getImageData(0,0,o,v),o=f.getImageData(0,0,o,v),v=h.data,
p=o.data,w=v.length,u=e.za,D=e.da,F=e.fa,x=0;do{var B=[0,0,0,0],z=[0,0,0,0],J=l[x]/255*u,H=l[x],ea=e.Ob/u,H=(H/255-ea)/(e.Nb/u-ea),H=255*H;J>=D&&J<=F&&(B=new M(e.lb[0],e.lb[1],e.lb[2]),B=(new M(e.jb[0],e.jb[1],e.jb[2])).scale(H).add(B.scale(255-H)),B=[Math.floor(B.x),Math.floor(B.y),Math.floor(B.b),255],k&&(z=[m[x],m[x+1],m[x+2],m[x+3]]));H=w-1-x;v[H-3]=B[0];v[H-2]=B[1];v[H-1]=B[2];v[H]=B[3];p[H-3]=z[0];p[H-2]=z[1];p[H-1]=z[2];p[H]=z[3];x+=4}while(x<w);g.putImageData(h,0,0);f.putImageData(o,0,0);
this.a.globalAlpha=1;this.a.drawImage(this.Sd,c,d);k&&e.v.Aa&&(this.a.globalAlpha=e.v.Q,this.a.drawImage(this.Td,c,d))}};C("X.renderer2D",$);C("X.renderer2D.prototype.init",$.prototype.ca);C("X.renderer2D.prototype.add",$.prototype.add);C("X.renderer2D.prototype.onShowtime",$.prototype.Zf);C("X.renderer2D.prototype.onRender",$.prototype.Xf);C("X.renderer2D.prototype.onScroll",$.prototype.Gh);C("X.renderer2D.prototype.get",$.prototype.get);C("X.renderer2D.prototype.resetViewAndRender",$.prototype.lc);
C("X.renderer2D.prototype.render",$.prototype.Wb);C("X.renderer2D.prototype.destroy",$.prototype.xd);function mg(){T.call(this);this.c="fibers";Ba(this,new Sc)}E(mg,T);C("X.fibers",mg);function ng(){T.call(this);this.c="mesh";Ba(this,new Sc)}E(ng,T);C("X.mesh",ng);
